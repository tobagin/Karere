2025-06-17 20:51:43 [INFO]: Starting Karere Backend initialization
2025-06-17 20:51:43 [INFO]: Initializing Service Manager
2025-06-17 20:51:43 [INFO]: Cron job scheduled: health-check (*/5 * * * *)
2025-06-17 20:51:43 [INFO]: Cron job scheduled: log-rotation (0 * * * *)
2025-06-17 20:51:43 [INFO]: Cron job scheduled: database-cleanup (0 2 * * *)
2025-06-17 20:51:43 [INFO]: Cron job scheduled: memory-report (0 * * * *)
2025-06-17 20:51:43 [INFO]: System Information
{
  "nodeVersion": "v22.16.0",
  "platform": "linux",
  "arch": "arm64",
  "memory": {
    "rss": 138059776,
    "heapTotal": 46845952,
    "heapUsed": 32430368,
    "external": 3511728,
    "arrayBuffers": 70016
  },
  "uptime": 4.527013329
}
2025-06-17 20:51:43 [INFO]: Karere Backend Starting
{
  "pid": 41386
}
2025-06-17 20:51:43 [INFO]: Service Manager initialized successfully
2025-06-17 20:51:43 [INFO]: Initializing database
{
  "path": "data/karere.db"
}
2025-06-17 20:51:43 [INFO]: Database tables and indexes created successfully
2025-06-17 20:51:43 [INFO]: Performance: database_initialization completed in 103ms
{
  "type": "performance",
  "operation": "database_initialization",
  "duration": 103
}
2025-06-17 20:51:43 [INFO]: Database initialized successfully
2025-06-17 20:51:43 [INFO]: Service registered: database
2025-06-17 20:51:43 [INFO]: Performance: websocket_server_init completed in 10ms
{
  "type": "performance",
  "operation": "websocket_server_init",
  "duration": 10
}
2025-06-17 20:51:43 [INFO]: WebSocket server started on ws://localhost:8765
2025-06-17 20:51:43 [INFO]: Service registered: websocket
2025-06-17 20:51:43 [INFO]: Initializing WhatsApp connection
{
  "component": "baileys"
}
2025-06-17 20:51:44 [INFO]: Using WhatsApp version 2.3000.1023223821
{
  "component": "baileys"
}
2025-06-17 20:51:44 [INFO]: Performance: whatsapp_connection completed in 434ms
{
  "type": "performance",
  "operation": "whatsapp_connection",
  "duration": 434
}
2025-06-17 20:51:44 [INFO]: WhatsApp socket initialized successfully
{
  "component": "baileys"
}
2025-06-17 20:51:44 [INFO]: Karere Backend initialized successfully
2025-06-17 20:51:44 [INFO]: Connecting to WhatsApp...
{
  "component": "baileys"
}
2025-06-17 20:51:44 [WARN]: Cannot send to frontend: no active connection
{
  "type": "connection_status"
}
2025-06-17 20:51:45 [INFO]: WhatsApp connection is open
{
  "component": "baileys"
}
2025-06-17 20:51:45 [WARN]: Cannot send to frontend: no active connection
{
  "type": "baileys_ready"
}
2025-06-17 20:51:45 [WARN]: Cannot send to frontend: no active connection
{
  "type": "connection_status"
}
2025-06-17 20:51:45 [INFO]: Loading initial chats
{
  "component": "baileys"
}
2025-06-17 20:51:45 [INFO]: Performance: get_chats completed in 30ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_chats",
  "duration": 30
}
2025-06-17 20:51:55 [INFO]: Performance: message_upsert completed in 0ms
{
  "type": "performance",
  "operation": "message_upsert",
  "duration": 0
}
2025-06-17 20:54:42 [INFO]: Starting Karere Backend initialization
2025-06-17 20:54:42 [INFO]: Initializing Service Manager
2025-06-17 20:54:42 [INFO]: Cron job scheduled: health-check (*/5 * * * *)
2025-06-17 20:54:42 [INFO]: Cron job scheduled: log-rotation (0 * * * *)
2025-06-17 20:54:42 [INFO]: Cron job scheduled: database-cleanup (0 2 * * *)
2025-06-17 20:54:42 [INFO]: Cron job scheduled: memory-report (0 * * * *)
2025-06-17 20:54:42 [INFO]: System Information
{
  "nodeVersion": "v22.16.0",
  "platform": "linux",
  "arch": "arm64",
  "memory": {
    "rss": 134205440,
    "heapTotal": 47632384,
    "heapUsed": 31819384,
    "external": 3511728,
    "arrayBuffers": 70016
  },
  "uptime": 3.3492852
}
2025-06-17 20:54:42 [INFO]: Karere Backend Starting
{
  "pid": 41863
}
2025-06-17 20:54:42 [INFO]: Service Manager initialized successfully
2025-06-17 20:54:42 [INFO]: Initializing database
{
  "path": "data/karere.db"
}
2025-06-17 20:54:42 [INFO]: Database tables and indexes created successfully
2025-06-17 20:54:42 [INFO]: Performance: database_initialization completed in 41ms
{
  "type": "performance",
  "operation": "database_initialization",
  "duration": 41
}
2025-06-17 20:54:42 [INFO]: Database initialized successfully
2025-06-17 20:54:42 [INFO]: Service registered: database
2025-06-17 20:54:42 [INFO]: Performance: websocket_server_init completed in 11ms
{
  "type": "performance",
  "operation": "websocket_server_init",
  "duration": 11
}
2025-06-17 20:54:42 [INFO]: WebSocket server started on ws://localhost:8765
2025-06-17 20:54:42 [INFO]: Service registered: websocket
2025-06-17 20:54:42 [INFO]: Initializing WhatsApp connection
{
  "component": "baileys"
}
2025-06-17 20:54:42 [INFO]: Using WhatsApp version 2.3000.1023223821
{
  "component": "baileys"
}
2025-06-17 20:54:42 [INFO]: Performance: whatsapp_connection completed in 302ms
{
  "type": "performance",
  "operation": "whatsapp_connection",
  "duration": 302
}
2025-06-17 20:54:42 [INFO]: WhatsApp socket initialized successfully
{
  "component": "baileys"
}
2025-06-17 20:54:42 [INFO]: Karere Backend initialized successfully
2025-06-17 20:54:42 [INFO]: Connecting to WhatsApp...
{
  "component": "baileys"
}
2025-06-17 20:54:42 [WARN]: Cannot send to frontend: no active connection
{
  "type": "connection_status"
}
2025-06-17 20:54:43 [INFO]: WhatsApp connection is open
{
  "component": "baileys"
}
2025-06-17 20:54:43 [WARN]: Cannot send to frontend: no active connection
{
  "type": "baileys_ready"
}
2025-06-17 20:54:43 [WARN]: Cannot send to frontend: no active connection
{
  "type": "connection_status"
}
2025-06-17 20:54:43 [INFO]: Loading initial chats
{
  "component": "baileys"
}
2025-06-17 20:54:43 [INFO]: Performance: get_chats completed in 16ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_chats",
  "duration": 16
}
2025-06-17 20:54:57 [INFO]: Performance: get_chats completed in 3ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_chats",
  "duration": 3
}
2025-06-17 20:54:57 [INFO]: Cache is empty, setting client waiting flag to true.
2025-06-17 20:54:57 [INFO]: Performance: websocket_message_processing completed in 10ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 10
}
2025-06-17 21:00:49 [INFO]: Starting Karere Backend initialization
2025-06-17 21:00:49 [INFO]: Initializing Service Manager
2025-06-17 21:00:49 [INFO]: Cron job scheduled: health-check (*/5 * * * *)
2025-06-17 21:00:49 [INFO]: Cron job scheduled: log-rotation (0 * * * *)
2025-06-17 21:00:49 [INFO]: Cron job scheduled: database-cleanup (0 2 * * *)
2025-06-17 21:00:49 [INFO]: Cron job scheduled: memory-report (0 * * * *)
2025-06-17 21:00:49 [INFO]: System Information
{
  "nodeVersion": "v22.16.0",
  "platform": "linux",
  "arch": "arm64",
  "memory": {
    "rss": 139624448,
    "heapTotal": 47632384,
    "heapUsed": 31925776,
    "external": 3511728,
    "arrayBuffers": 70016
  },
  "uptime": 3.912385302
}
2025-06-17 21:00:49 [INFO]: Karere Backend Starting
{
  "pid": 42490
}
2025-06-17 21:00:49 [INFO]: Service Manager initialized successfully
2025-06-17 21:00:49 [INFO]: Initializing database
{
  "path": "data/karere.db"
}
2025-06-17 21:00:50 [INFO]: Database tables and indexes created successfully
2025-06-17 21:00:50 [INFO]: Performance: database_initialization completed in 65ms
{
  "type": "performance",
  "operation": "database_initialization",
  "duration": 65
}
2025-06-17 21:00:50 [INFO]: Database initialized successfully
2025-06-17 21:00:50 [INFO]: Service registered: database
2025-06-17 21:00:50 [INFO]: Performance: websocket_server_init completed in 18ms
{
  "type": "performance",
  "operation": "websocket_server_init",
  "duration": 18
}
2025-06-17 21:00:50 [INFO]: WebSocket server started on ws://localhost:8765
2025-06-17 21:00:50 [INFO]: Service registered: websocket
2025-06-17 21:00:50 [INFO]: Initializing WhatsApp connection
{
  "component": "baileys"
}
2025-06-17 21:00:50 [INFO]: Using WhatsApp version 2.3000.1023223821
{
  "component": "baileys"
}
2025-06-17 21:00:50 [INFO]: Performance: whatsapp_connection completed in 363ms
{
  "type": "performance",
  "operation": "whatsapp_connection",
  "duration": 363
}
2025-06-17 21:00:50 [INFO]: WhatsApp socket initialized successfully
{
  "component": "baileys"
}
2025-06-17 21:00:50 [INFO]: Karere Backend initialized successfully
2025-06-17 21:00:50 [INFO]: Connecting to WhatsApp...
{
  "component": "baileys"
}
2025-06-17 21:00:50 [WARN]: Cannot send to frontend: no active connection
{
  "type": "connection_status"
}
2025-06-17 21:00:53 [INFO]: Connection closed
{
  "statusCode": 401,
  "reason": "Connection Failure",
  "component": "baileys"
}
2025-06-17 21:00:53 [INFO]: Logged out, deleting credentials and restarting
{
  "component": "baileys"
}
2025-06-17 21:00:53 [INFO]: Authentication credentials deleted
{
  "component": "baileys"
}
2025-06-17 21:00:55 [INFO]: Initializing WhatsApp connection
{
  "component": "baileys"
}
2025-06-17 21:00:55 [INFO]: Using WhatsApp version 2.3000.1023223821
{
  "component": "baileys"
}
2025-06-17 21:00:55 [INFO]: Performance: whatsapp_connection completed in 179ms
{
  "type": "performance",
  "operation": "whatsapp_connection",
  "duration": 179
}
2025-06-17 21:00:55 [INFO]: WhatsApp socket initialized successfully
{
  "component": "baileys"
}
2025-06-17 21:00:55 [INFO]: Connecting to WhatsApp...
{
  "component": "baileys"
}
2025-06-17 21:00:55 [INFO]: QR Code received, generating image
{
  "component": "baileys"
}
2025-06-17 21:00:55 [INFO]: QR code sent to frontend
{
  "component": "baileys"
}
2025-06-17 21:01:07 [INFO]: Performance: websocket_connection completed in 14684ms
{
  "type": "performance",
  "operation": "websocket_connection",
  "duration": 14684
}
2025-06-17 21:01:55 [INFO]: QR Code received, generating image
{
  "component": "baileys"
}
2025-06-17 21:01:55 [ERROR]: Uncaught Exception
Error: write EPIPE
    at afterWriteDispatched (node:internal/stream_base_commons:159:15)
    at writeGeneric (node:internal/stream_base_commons:150:3)
    at Socket._writeGeneric (node:net:971:11)
    at Socket._write (node:net:983:8)
    at writeOrBuffer (node:internal/streams/writable:572:12)
    at _write (node:internal/streams/writable:501:10)
    at Writable.write (node:internal/streams/writable:510:10)
    at Console.log (/home/tobagin/Projects/Karere/backend/node_modules/winston/lib/winston/transports/console.js:87:23)
    at Console._write (/home/tobagin/Projects/Karere/backend/node_modules/winston-transport/modern.js:103:17)
    at doWrite (/home/tobagin/Projects/Karere/backend/node_modules/winston-transport/node_modules/readable-stream/lib/_stream_writable.js:390:139)
{
  "error": "write EPIPE"
}
2025-06-17 21:01:55 [INFO]: Received uncaughtException, starting graceful shutdown
2025-06-17 21:01:55 [INFO]: Stopping cron job: health-check
2025-06-17 21:01:55 [INFO]: Stopping cron job: log-rotation
2025-06-17 21:01:55 [INFO]: Stopping cron job: database-cleanup
2025-06-17 21:01:55 [INFO]: Stopping cron job: memory-report
2025-06-17 21:01:55 [INFO]: Shutting down service: database
2025-06-17 21:01:55 [INFO]: Shutting down service: websocket
2025-06-17 21:03:05 [INFO]: Starting Karere Backend initialization
2025-06-17 21:03:05 [INFO]: Initializing Service Manager
2025-06-17 21:03:05 [INFO]: Cron job scheduled: health-check (*/5 * * * *)
2025-06-17 21:03:05 [INFO]: Cron job scheduled: log-rotation (0 * * * *)
2025-06-17 21:03:05 [INFO]: Cron job scheduled: database-cleanup (0 2 * * *)
2025-06-17 21:03:05 [INFO]: Cron job scheduled: memory-report (0 * * * *)
2025-06-17 21:03:05 [INFO]: System Information
{
  "nodeVersion": "v22.16.0",
  "platform": "linux",
  "arch": "arm64",
  "memory": {
    "rss": 132435968,
    "heapTotal": 47370240,
    "heapUsed": 31290056,
    "external": 3511728,
    "arrayBuffers": 70016
  },
  "uptime": 4.703132164
}
2025-06-17 21:03:05 [INFO]: Karere Backend Starting
{
  "pid": 43038
}
2025-06-17 21:03:05 [INFO]: Service Manager initialized successfully
2025-06-17 21:03:05 [INFO]: Initializing database
{
  "path": "data/karere.db"
}
2025-06-17 21:03:05 [INFO]: Database tables and indexes created successfully
2025-06-17 21:03:05 [INFO]: Performance: database_initialization completed in 46ms
{
  "type": "performance",
  "operation": "database_initialization",
  "duration": 46
}
2025-06-17 21:03:05 [INFO]: Database initialized successfully
2025-06-17 21:03:05 [INFO]: Service registered: database
2025-06-17 21:03:05 [INFO]: Performance: websocket_server_init completed in 16ms
{
  "type": "performance",
  "operation": "websocket_server_init",
  "duration": 16
}
2025-06-17 21:03:05 [INFO]: WebSocket server started on ws://localhost:8765
2025-06-17 21:03:05 [INFO]: Service registered: websocket
2025-06-17 21:03:05 [INFO]: Initializing WhatsApp connection
{
  "component": "baileys"
}
2025-06-17 21:03:05 [INFO]: Using WhatsApp version 2.3000.1023223821
{
  "component": "baileys"
}
2025-06-17 21:03:05 [INFO]: Performance: whatsapp_connection completed in 499ms
{
  "type": "performance",
  "operation": "whatsapp_connection",
  "duration": 499
}
2025-06-17 21:03:05 [INFO]: WhatsApp socket initialized successfully
{
  "component": "baileys"
}
2025-06-17 21:03:05 [INFO]: Karere Backend initialized successfully
2025-06-17 21:03:05 [INFO]: Connecting to WhatsApp...
{
  "component": "baileys"
}
2025-06-17 21:03:05 [WARN]: Cannot send to frontend: no active connection
{
  "type": "connection_status"
}
2025-06-17 21:03:06 [INFO]: QR Code received, generating image
{
  "component": "baileys"
}
2025-06-17 21:03:06 [WARN]: Cannot send to frontend: no active connection
{
  "type": "qr"
}
2025-06-17 21:03:06 [INFO]: QR code sent to frontend
{
  "component": "baileys"
}
2025-06-17 21:03:17 [INFO]: Performance: websocket_connection completed in 10060ms
{
  "type": "performance",
  "operation": "websocket_connection",
  "duration": 10060
}
2025-06-17 21:03:17 [ERROR]: Uncaught Exception
Error: write EPIPE
    at afterWriteDispatched (node:internal/stream_base_commons:159:15)
    at writeGeneric (node:internal/stream_base_commons:150:3)
    at Socket._writeGeneric (node:net:971:11)
    at Socket._write (node:net:983:8)
    at writeOrBuffer (node:internal/streams/writable:572:12)
    at _write (node:internal/streams/writable:501:10)
    at Writable.write (node:internal/streams/writable:510:10)
    at Console.log (/home/tobagin/Projects/Karere/backend/node_modules/winston/lib/winston/transports/console.js:87:23)
    at Console._write (/home/tobagin/Projects/Karere/backend/node_modules/winston-transport/modern.js:103:17)
    at doWrite (/home/tobagin/Projects/Karere/backend/node_modules/winston-transport/node_modules/readable-stream/lib/_stream_writable.js:390:139)
{
  "error": "write EPIPE"
}
2025-06-17 21:03:17 [INFO]: Received uncaughtException, starting graceful shutdown
2025-06-17 21:03:17 [INFO]: Stopping cron job: health-check
2025-06-17 21:03:17 [INFO]: Stopping cron job: log-rotation
2025-06-17 21:03:17 [INFO]: Stopping cron job: database-cleanup
2025-06-17 21:03:17 [INFO]: Stopping cron job: memory-report
2025-06-17 21:03:17 [INFO]: Shutting down service: database
2025-06-17 21:03:17 [INFO]: Shutting down service: websocket
2025-06-17 21:05:05 [INFO]: Starting Karere Backend initialization
2025-06-17 21:05:05 [INFO]: Initializing Service Manager
2025-06-17 21:05:05 [INFO]: Cron job scheduled: health-check (*/5 * * * *)
2025-06-17 21:05:05 [INFO]: Cron job scheduled: log-rotation (0 * * * *)
2025-06-17 21:05:05 [INFO]: Cron job scheduled: database-cleanup (0 2 * * *)
2025-06-17 21:05:05 [INFO]: Cron job scheduled: memory-report (0 * * * *)
2025-06-17 21:05:05 [INFO]: System Information
{
  "nodeVersion": "v22.16.0",
  "platform": "linux",
  "arch": "arm64",
  "memory": {
    "rss": 135409664,
    "heapTotal": 47632384,
    "heapUsed": 31253944,
    "external": 3511728,
    "arrayBuffers": 70016
  },
  "uptime": 1.790043428
}
2025-06-17 21:05:05 [INFO]: Karere Backend Starting
{
  "pid": 43311
}
2025-06-17 21:05:05 [INFO]: Service Manager initialized successfully
2025-06-17 21:05:05 [INFO]: Initializing database
{
  "path": "data/karere.db"
}
2025-06-17 21:05:05 [INFO]: Database tables and indexes created successfully
2025-06-17 21:05:05 [INFO]: Performance: database_initialization completed in 22ms
{
  "type": "performance",
  "operation": "database_initialization",
  "duration": 22
}
2025-06-17 21:05:05 [INFO]: Database initialized successfully
2025-06-17 21:05:05 [INFO]: Service registered: database
2025-06-17 21:05:05 [INFO]: Performance: websocket_server_init completed in 4ms
{
  "type": "performance",
  "operation": "websocket_server_init",
  "duration": 4
}
2025-06-17 21:05:05 [INFO]: WebSocket server started on ws://localhost:8765
2025-06-17 21:05:05 [INFO]: Service registered: websocket
2025-06-17 21:05:05 [INFO]: Initializing WhatsApp connection
{
  "component": "baileys"
}
2025-06-17 21:05:06 [INFO]: Using WhatsApp version 2.3000.1023223821
{
  "component": "baileys"
}
2025-06-17 21:05:06 [INFO]: Performance: whatsapp_connection completed in 841ms
{
  "type": "performance",
  "operation": "whatsapp_connection",
  "duration": 841
}
2025-06-17 21:05:06 [INFO]: WhatsApp socket initialized successfully
{
  "component": "baileys"
}
2025-06-17 21:05:06 [INFO]: Karere Backend initialized successfully
2025-06-17 21:05:06 [INFO]: Connecting to WhatsApp...
{
  "component": "baileys"
}
2025-06-17 21:05:06 [INFO]: QR Code received, generating image
{
  "component": "baileys"
}
2025-06-17 21:05:06 [INFO]: QR code sent to frontend
{
  "component": "baileys"
}
2025-06-17 21:05:17 [INFO]: Received SIGTERM, starting graceful shutdown
2025-06-17 21:05:17 [INFO]: Stopping cron job: health-check
2025-06-17 21:05:17 [INFO]: Stopping cron job: log-rotation
2025-06-17 21:05:17 [INFO]: Stopping cron job: database-cleanup
2025-06-17 21:05:17 [INFO]: Stopping cron job: memory-report
2025-06-17 21:05:17 [INFO]: Shutting down service: database
2025-06-17 21:05:17 [INFO]: Shutting down service: websocket
2025-06-17 21:06:06 [INFO]: Starting Karere Backend initialization
2025-06-17 21:06:06 [INFO]: Initializing Service Manager
2025-06-17 21:06:06 [INFO]: Cron job scheduled: health-check (*/5 * * * *)
2025-06-17 21:06:06 [INFO]: Cron job scheduled: log-rotation (0 * * * *)
2025-06-17 21:06:06 [INFO]: Cron job scheduled: database-cleanup (0 2 * * *)
2025-06-17 21:06:06 [INFO]: Cron job scheduled: memory-report (0 * * * *)
2025-06-17 21:06:06 [INFO]: System Information
{
  "nodeVersion": "v22.16.0",
  "platform": "linux",
  "arch": "arm64",
  "memory": {
    "rss": 138543104,
    "heapTotal": 47370240,
    "heapUsed": 31973672,
    "external": 3511728,
    "arrayBuffers": 70016
  },
  "uptime": 6.585435702
}
2025-06-17 21:06:06 [INFO]: Karere Backend Starting
{
  "pid": 43444
}
2025-06-17 21:06:06 [INFO]: Service Manager initialized successfully
2025-06-17 21:06:06 [INFO]: Initializing database
{
  "path": "data/karere.db"
}
2025-06-17 21:06:06 [INFO]: Database tables and indexes created successfully
2025-06-17 21:06:06 [INFO]: Performance: database_initialization completed in 45ms
{
  "type": "performance",
  "operation": "database_initialization",
  "duration": 45
}
2025-06-17 21:06:06 [INFO]: Database initialized successfully
2025-06-17 21:06:06 [INFO]: Service registered: database
2025-06-17 21:06:06 [INFO]: Performance: websocket_server_init completed in 9ms
{
  "type": "performance",
  "operation": "websocket_server_init",
  "duration": 9
}
2025-06-17 21:06:06 [INFO]: WebSocket server started on ws://localhost:8765
2025-06-17 21:06:06 [INFO]: Service registered: websocket
2025-06-17 21:06:06 [INFO]: Initializing WhatsApp connection
{
  "component": "baileys"
}
2025-06-17 21:06:06 [INFO]: Using WhatsApp version 2.3000.1023223821
{
  "component": "baileys"
}
2025-06-17 21:06:06 [INFO]: Performance: whatsapp_connection completed in 506ms
{
  "type": "performance",
  "operation": "whatsapp_connection",
  "duration": 506
}
2025-06-17 21:06:06 [INFO]: WhatsApp socket initialized successfully
{
  "component": "baileys"
}
2025-06-17 21:06:06 [INFO]: Karere Backend initialized successfully
2025-06-17 21:06:06 [INFO]: Connecting to WhatsApp...
{
  "component": "baileys"
}
2025-06-17 21:06:06 [WARN]: Cannot send to frontend: no active connection
{
  "type": "connection_status"
}
2025-06-17 21:06:07 [INFO]: QR Code received, generating image
{
  "component": "baileys"
}
2025-06-17 21:06:07 [WARN]: Cannot send to frontend: no active connection
{
  "type": "qr"
}
2025-06-17 21:06:07 [INFO]: QR code sent to frontend
{
  "component": "baileys"
}
2025-06-17 21:06:43 [INFO]: Received SIGTERM, starting graceful shutdown
2025-06-17 21:06:43 [INFO]: Stopping cron job: health-check
2025-06-17 21:06:43 [INFO]: Stopping cron job: log-rotation
2025-06-17 21:06:43 [INFO]: Stopping cron job: database-cleanup
2025-06-17 21:06:43 [INFO]: Stopping cron job: memory-report
2025-06-17 21:06:43 [INFO]: Shutting down service: database
2025-06-17 21:06:43 [INFO]: Shutting down service: websocket
2025-06-17 21:07:02 [INFO]: Starting Karere Backend initialization
2025-06-17 21:07:02 [INFO]: Initializing Service Manager
2025-06-17 21:07:02 [INFO]: Cron job scheduled: health-check (*/5 * * * *)
2025-06-17 21:07:02 [INFO]: Cron job scheduled: log-rotation (0 * * * *)
2025-06-17 21:07:02 [INFO]: Cron job scheduled: database-cleanup (0 2 * * *)
2025-06-17 21:07:02 [INFO]: Cron job scheduled: memory-report (0 * * * *)
2025-06-17 21:07:02 [INFO]: System Information
{
  "nodeVersion": "v22.16.0",
  "platform": "linux",
  "arch": "arm64",
  "memory": {
    "rss": 134893568,
    "heapTotal": 47894528,
    "heapUsed": 31159736,
    "external": 3511728,
    "arrayBuffers": 70016
  },
  "uptime": 1.405779043
}
2025-06-17 21:07:02 [INFO]: Karere Backend Starting
{
  "pid": 43538
}
2025-06-17 21:07:02 [INFO]: Service Manager initialized successfully
2025-06-17 21:07:02 [INFO]: Initializing database
{
  "path": "data/karere.db"
}
2025-06-17 21:07:02 [INFO]: Database tables and indexes created successfully
2025-06-17 21:07:02 [INFO]: Performance: database_initialization completed in 58ms
{
  "type": "performance",
  "operation": "database_initialization",
  "duration": 58
}
2025-06-17 21:07:02 [INFO]: Database initialized successfully
2025-06-17 21:07:02 [INFO]: Service registered: database
2025-06-17 21:07:02 [INFO]: Performance: websocket_server_init completed in 5ms
{
  "type": "performance",
  "operation": "websocket_server_init",
  "duration": 5
}
2025-06-17 21:07:02 [INFO]: WebSocket server started on ws://localhost:8765
2025-06-17 21:07:02 [INFO]: Service registered: websocket
2025-06-17 21:07:02 [INFO]: Initializing WhatsApp connection
{
  "component": "baileys"
}
2025-06-17 21:07:03 [INFO]: Using WhatsApp version 2.3000.1023223821
{
  "component": "baileys"
}
2025-06-17 21:07:03 [INFO]: Performance: whatsapp_connection completed in 324ms
{
  "type": "performance",
  "operation": "whatsapp_connection",
  "duration": 324
}
2025-06-17 21:07:03 [INFO]: WhatsApp socket initialized successfully
{
  "component": "baileys"
}
2025-06-17 21:07:03 [INFO]: Karere Backend initialized successfully
2025-06-17 21:07:03 [INFO]: Connecting to WhatsApp...
{
  "component": "baileys"
}
2025-06-17 21:07:03 [WARN]: Cannot send to frontend: no active connection
{
  "type": "connection_status"
}
2025-06-17 21:07:03 [INFO]: QR Code received, generating image
{
  "component": "baileys"
}
2025-06-17 21:07:03 [INFO]: QR code sent to frontend
{
  "component": "baileys"
}
2025-06-17 21:07:13 [INFO]: Connection closed
{
  "statusCode": 515,
  "reason": "Stream Errored (restart required)",
  "component": "baileys"
}
2025-06-17 21:07:13 [INFO]: Scheduling reconnection attempt 1/5
{
  "component": "baileys"
}
2025-06-17 21:07:18 [INFO]: Initializing WhatsApp connection
{
  "component": "baileys"
}
2025-06-17 21:07:18 [INFO]: Using WhatsApp version 2.3000.1023223821
{
  "component": "baileys"
}
2025-06-17 21:07:18 [INFO]: Performance: whatsapp_connection completed in 97ms
{
  "type": "performance",
  "operation": "whatsapp_connection",
  "duration": 97
}
2025-06-17 21:07:18 [INFO]: WhatsApp socket initialized successfully
{
  "component": "baileys"
}
2025-06-17 21:07:18 [INFO]: Connecting to WhatsApp...
{
  "component": "baileys"
}
2025-06-17 21:07:19 [INFO]: WhatsApp connection is open
{
  "component": "baileys"
}
2025-06-17 21:07:19 [INFO]: Loading initial chats
{
  "component": "baileys"
}
2025-06-17 21:07:19 [INFO]: Performance: get_chats completed in 2ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_chats",
  "duration": 2
}
2025-06-17 21:07:19 [INFO]: Performance: get_chats completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_chats",
  "duration": 1
}
2025-06-17 21:07:19 [INFO]: Cache is empty, setting client waiting flag to true.
2025-06-17 21:07:19 [INFO]: Performance: websocket_message_processing completed in 5ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 5
}
2025-06-17 21:07:24 [INFO]: Received history via "messaging-history.set"
{
  "chatCount": 45,
  "component": "baileys"
}
2025-06-17 21:07:24 [INFO]: Performance: message_upsert completed in 0ms
{
  "type": "performance",
  "operation": "message_upsert",
  "duration": 0
}
2025-06-17 21:07:24 [INFO]: Performance: save_chat completed in 4ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 4
}
2025-06-17 21:07:24 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:24 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:24 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:24 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:24 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:24 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:24 [INFO]: Performance: save_chat completed in 0ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 0
}
2025-06-17 21:07:24 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:24 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:24 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:24 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:24 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:24 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:24 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:24 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:24 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:24 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:24 [INFO]: Performance: save_chat completed in 2ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 2
}
2025-06-17 21:07:24 [INFO]: Performance: save_chat completed in 3ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 3
}
2025-06-17 21:07:24 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:24 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:24 [INFO]: Performance: save_chat completed in 2ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 2
}
2025-06-17 21:07:24 [INFO]: Performance: save_chat completed in 3ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 3
}
2025-06-17 21:07:24 [INFO]: Performance: save_chat completed in 0ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 0
}
2025-06-17 21:07:24 [INFO]: Performance: save_chat completed in 5ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 5
}
2025-06-17 21:07:24 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:24 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:24 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:24 [INFO]: Performance: save_chat completed in 2ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 2
}
2025-06-17 21:07:24 [INFO]: Performance: save_chat completed in 4ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 4
}
2025-06-17 21:07:24 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:24 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:24 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:24 [INFO]: Performance: save_chat completed in 2ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 2
}
2025-06-17 21:07:24 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:24 [INFO]: Performance: save_chat completed in 7ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 7
}
2025-06-17 21:07:24 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:24 [INFO]: Performance: save_chat completed in 5ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 5
}
2025-06-17 21:07:24 [INFO]: Performance: save_chat completed in 3ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 3
}
2025-06-17 21:07:24 [INFO]: Performance: save_chat completed in 0ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 0
}
2025-06-17 21:07:24 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:24 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:24 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:24 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:24 [INFO]: Client was waiting for chats, sending now
{
  "component": "baileys"
}
2025-06-17 21:07:24 [INFO]: Performance: history_set completed in 159ms
{
  "chatCount": 45,
  "type": "performance",
  "operation": "history_set",
  "duration": 159
}
2025-06-17 21:07:28 [INFO]: Received history via "chats.set"
{
  "chatCount": 65,
  "component": "baileys"
}
2025-06-17 21:07:28 [INFO]: Performance: message_upsert completed in 0ms
{
  "type": "performance",
  "operation": "message_upsert",
  "duration": 0
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 2ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 2
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 2ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 2
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 2ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 2
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 0ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 0
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 0ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 0
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 0ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 0
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 0ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 0
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 0ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 0
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 0ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 0
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 0ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 0
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 2ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 2
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 2ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 2
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 6ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 6
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 0ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 0
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 0ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 0
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 3ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 3
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 4ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 4
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 2ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 2
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 2ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 2
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 2ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 2
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 10ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 10
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 0ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 0
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 0ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 0
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 2ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 2
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 1ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 1
}
2025-06-17 21:07:28 [INFO]: Performance: save_chat completed in 2ms
{
  "type": "performance",
  "operation": "save_chat",
  "duration": 2
}
2025-06-17 21:07:28 [INFO]: Performance: history_set completed in 178ms
{
  "chatCount": 65,
  "type": "performance",
  "operation": "history_set",
  "duration": 178
}
2025-06-17 21:08:04 [INFO]: Received SIGTERM, starting graceful shutdown
2025-06-17 21:08:04 [INFO]: Stopping cron job: health-check
2025-06-17 21:08:04 [INFO]: Stopping cron job: log-rotation
2025-06-17 21:08:04 [INFO]: Stopping cron job: database-cleanup
2025-06-17 21:08:04 [INFO]: Stopping cron job: memory-report
2025-06-17 21:08:04 [INFO]: Shutting down service: database
2025-06-17 21:08:04 [INFO]: Shutting down service: websocket
2025-06-17 21:11:25 [INFO]: Starting Karere Backend initialization
2025-06-17 21:11:25 [INFO]: Initializing Service Manager
2025-06-17 21:11:25 [INFO]: Cron job scheduled: health-check (*/5 * * * *)
2025-06-17 21:11:25 [INFO]: Cron job scheduled: log-rotation (0 * * * *)
2025-06-17 21:11:25 [INFO]: Cron job scheduled: database-cleanup (0 2 * * *)
2025-06-17 21:11:25 [INFO]: Cron job scheduled: memory-report (0 * * * *)
2025-06-17 21:11:25 [INFO]: System Information
{
  "nodeVersion": "v22.16.0",
  "platform": "linux",
  "arch": "arm64",
  "memory": {
    "rss": 139001856,
    "heapTotal": 47108096,
    "heapUsed": 32119304,
    "external": 3511728,
    "arrayBuffers": 70016
  },
  "uptime": 3.791484123
}
2025-06-17 21:11:25 [INFO]: Karere Backend Starting
{
  "pid": 43831
}
2025-06-17 21:11:25 [INFO]: Service Manager initialized successfully
2025-06-17 21:11:25 [INFO]: Initializing database
{
  "path": "data/karere.db"
}
2025-06-17 21:11:25 [INFO]: Database tables and indexes created successfully
2025-06-17 21:11:25 [INFO]: Performance: database_initialization completed in 55ms
{
  "type": "performance",
  "operation": "database_initialization",
  "duration": 55
}
2025-06-17 21:11:25 [INFO]: Database initialized successfully
2025-06-17 21:11:25 [INFO]: Service registered: database
2025-06-17 21:11:25 [INFO]: Performance: websocket_server_init completed in 14ms
{
  "type": "performance",
  "operation": "websocket_server_init",
  "duration": 14
}
2025-06-17 21:11:25 [INFO]: WebSocket server started on ws://localhost:8765
2025-06-17 21:11:25 [INFO]: Service registered: websocket
2025-06-17 21:11:25 [INFO]: Initializing WhatsApp connection
{
  "component": "baileys"
}
2025-06-17 21:11:25 [INFO]: Using WhatsApp version 2.3000.1023223821
{
  "component": "baileys"
}
2025-06-17 21:11:25 [INFO]: Performance: whatsapp_connection completed in 314ms
{
  "type": "performance",
  "operation": "whatsapp_connection",
  "duration": 314
}
2025-06-17 21:11:25 [INFO]: WhatsApp socket initialized successfully
{
  "component": "baileys"
}
2025-06-17 21:11:25 [INFO]: Karere Backend initialized successfully
2025-06-17 21:11:25 [INFO]: Connecting to WhatsApp...
{
  "component": "baileys"
}
2025-06-17 21:11:25 [WARN]: Cannot send to frontend: no active connection
{
  "type": "connection_status"
}
2025-06-17 21:11:26 [INFO]: WhatsApp connection is open
{
  "component": "baileys"
}
2025-06-17 21:11:26 [WARN]: Cannot send to frontend: no active connection
{
  "type": "baileys_ready"
}
2025-06-17 21:11:26 [WARN]: Cannot send to frontend: no active connection
{
  "type": "connection_status"
}
2025-06-17 21:11:26 [INFO]: Loading initial chats
{
  "component": "baileys"
}
2025-06-17 21:11:26 [INFO]: Performance: get_chats completed in 11ms
{
  "count": 50,
  "type": "performance",
  "operation": "get_chats",
  "duration": 11
}
2025-06-17 21:11:26 [INFO]: Performance: load_initial_chats completed in 17ms
{
  "source": "database",
  "count": 50,
  "type": "performance",
  "operation": "load_initial_chats",
  "duration": 17
}
2025-06-17 21:11:26 [INFO]: Initial chats loaded from database
{
  "count": 50,
  "component": "baileys"
}
2025-06-17 21:11:28 [INFO]: Client requested chats. Sending cached list.
2025-06-17 21:11:28 [INFO]: Performance: websocket_message_processing completed in 6ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 6
}
2025-06-17 21:11:32 [INFO]: Fetching message history
{
  "jid": "353857055000@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:11:32 [INFO]: Performance: get_messages completed in 2ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 2
}
2025-06-17 21:11:32 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:11:32 [INFO]: Performance: get_message_history completed in 48ms
{
  "jid": "353857055000@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 48
}
2025-06-17 21:11:32 [INFO]: Message history sent
{
  "jid": "353857055000@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:11:32 [INFO]: Performance: websocket_message_processing completed in 51ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 51
}
2025-06-17 21:11:35 [INFO]: Fetching message history
{
  "jid": "557199027750@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:11:35 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:11:35 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:11:35 [INFO]: Performance: get_message_history completed in 16ms
{
  "jid": "557199027750@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 16
}
2025-06-17 21:11:35 [INFO]: Message history sent
{
  "jid": "557199027750@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:11:35 [INFO]: Performance: websocket_message_processing completed in 18ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 18
}
2025-06-17 21:11:37 [INFO]: Fetching message history
{
  "jid": "553399888256@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:11:37 [INFO]: Performance: get_messages completed in 2ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 2
}
2025-06-17 21:11:37 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:11:37 [INFO]: Performance: get_message_history completed in 24ms
{
  "jid": "553399888256@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 24
}
2025-06-17 21:11:37 [INFO]: Message history sent
{
  "jid": "553399888256@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:11:37 [INFO]: Performance: websocket_message_processing completed in 27ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 27
}
2025-06-17 21:11:40 [INFO]: Fetching message history
{
  "jid": "353899678402@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:11:40 [INFO]: Performance: get_messages completed in 2ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 2
}
2025-06-17 21:11:40 [INFO]: Performance: get_messages completed in 2ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 2
}
2025-06-17 21:11:40 [INFO]: Performance: get_message_history completed in 21ms
{
  "jid": "353899678402@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 21
}
2025-06-17 21:11:40 [INFO]: Message history sent
{
  "jid": "353899678402@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:11:40 [INFO]: Performance: websocket_message_processing completed in 24ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 24
}
2025-06-17 21:12:25 [INFO]: Performance: websocket_connection completed in 57118ms
{
  "type": "performance",
  "operation": "websocket_connection",
  "duration": 57118
}
2025-06-17 21:12:25 [ERROR]: Uncaught Exception
Error: write EPIPE
    at afterWriteDispatched (node:internal/stream_base_commons:159:15)
    at writeGeneric (node:internal/stream_base_commons:150:3)
    at Socket._writeGeneric (node:net:971:11)
    at Socket._write (node:net:983:8)
    at writeOrBuffer (node:internal/streams/writable:572:12)
    at _write (node:internal/streams/writable:501:10)
    at Writable.write (node:internal/streams/writable:510:10)
    at Console.log (/home/tobagin/Projects/Karere/backend/node_modules/winston/lib/winston/transports/console.js:87:23)
    at Console._write (/home/tobagin/Projects/Karere/backend/node_modules/winston-transport/modern.js:103:17)
    at doWrite (/home/tobagin/Projects/Karere/backend/node_modules/winston-transport/node_modules/readable-stream/lib/_stream_writable.js:390:139)
{
  "error": "write EPIPE"
}
2025-06-17 21:12:25 [INFO]: Received uncaughtException, starting graceful shutdown
2025-06-17 21:12:25 [INFO]: Stopping cron job: health-check
2025-06-17 21:12:25 [INFO]: Stopping cron job: log-rotation
2025-06-17 21:12:25 [INFO]: Stopping cron job: database-cleanup
2025-06-17 21:12:25 [INFO]: Stopping cron job: memory-report
2025-06-17 21:12:25 [INFO]: Shutting down service: database
2025-06-17 21:12:25 [INFO]: Shutting down service: websocket
2025-06-17 21:12:38 [INFO]: Starting Karere Backend initialization
2025-06-17 21:12:38 [INFO]: Initializing Service Manager
2025-06-17 21:12:38 [INFO]: Cron job scheduled: health-check (*/5 * * * *)
2025-06-17 21:12:38 [INFO]: Cron job scheduled: log-rotation (0 * * * *)
2025-06-17 21:12:38 [INFO]: Cron job scheduled: database-cleanup (0 2 * * *)
2025-06-17 21:12:38 [INFO]: Cron job scheduled: memory-report (0 * * * *)
2025-06-17 21:12:38 [INFO]: System Information
{
  "nodeVersion": "v22.16.0",
  "platform": "linux",
  "arch": "arm64",
  "memory": {
    "rss": 134303744,
    "heapTotal": 47108096,
    "heapUsed": 31819080,
    "external": 3511728,
    "arrayBuffers": 70016
  },
  "uptime": 3.580570524
}
2025-06-17 21:12:38 [INFO]: Karere Backend Starting
{
  "pid": 44016
}
2025-06-17 21:12:38 [INFO]: Service Manager initialized successfully
2025-06-17 21:12:38 [INFO]: Initializing database
{
  "path": "data/karere.db"
}
2025-06-17 21:12:38 [INFO]: Database tables and indexes created successfully
2025-06-17 21:12:38 [INFO]: Performance: database_initialization completed in 55ms
{
  "type": "performance",
  "operation": "database_initialization",
  "duration": 55
}
2025-06-17 21:12:38 [INFO]: Database initialized successfully
2025-06-17 21:12:38 [INFO]: Service registered: database
2025-06-17 21:12:38 [INFO]: Performance: websocket_server_init completed in 12ms
{
  "type": "performance",
  "operation": "websocket_server_init",
  "duration": 12
}
2025-06-17 21:12:38 [INFO]: WebSocket server started on ws://localhost:8765
2025-06-17 21:12:38 [INFO]: Service registered: websocket
2025-06-17 21:12:38 [INFO]: Initializing WhatsApp connection
{
  "component": "baileys"
}
2025-06-17 21:12:39 [INFO]: Using WhatsApp version 2.3000.1023223821
{
  "component": "baileys"
}
2025-06-17 21:12:39 [INFO]: Performance: whatsapp_connection completed in 268ms
{
  "type": "performance",
  "operation": "whatsapp_connection",
  "duration": 268
}
2025-06-17 21:12:39 [INFO]: WhatsApp socket initialized successfully
{
  "component": "baileys"
}
2025-06-17 21:12:39 [INFO]: Karere Backend initialized successfully
2025-06-17 21:12:39 [INFO]: Connecting to WhatsApp...
{
  "component": "baileys"
}
2025-06-17 21:12:39 [WARN]: Cannot send to frontend: no active connection
{
  "type": "connection_status"
}
2025-06-17 21:12:39 [INFO]: WhatsApp connection is open
{
  "component": "baileys"
}
2025-06-17 21:12:39 [WARN]: Cannot send to frontend: no active connection
{
  "type": "baileys_ready"
}
2025-06-17 21:12:39 [WARN]: Cannot send to frontend: no active connection
{
  "type": "connection_status"
}
2025-06-17 21:12:39 [INFO]: Loading initial chats
{
  "component": "baileys"
}
2025-06-17 21:12:39 [INFO]: Performance: get_chats completed in 8ms
{
  "count": 50,
  "type": "performance",
  "operation": "get_chats",
  "duration": 8
}
2025-06-17 21:12:39 [INFO]: Performance: load_initial_chats completed in 13ms
{
  "source": "database",
  "count": 50,
  "type": "performance",
  "operation": "load_initial_chats",
  "duration": 13
}
2025-06-17 21:12:39 [INFO]: Initial chats loaded from database
{
  "count": 50,
  "component": "baileys"
}
2025-06-17 21:12:42 [INFO]: Client requested chats. Sending cached list.
2025-06-17 21:12:42 [INFO]: Performance: websocket_message_processing completed in 6ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 6
}
2025-06-17 21:12:52 [INFO]: Fetching message history
{
  "jid": "353857055000@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:12:52 [INFO]: Performance: get_messages completed in 2ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 2
}
2025-06-17 21:12:52 [INFO]: Performance: get_messages completed in 2ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 2
}
2025-06-17 21:12:52 [INFO]: Performance: get_message_history completed in 66ms
{
  "jid": "353857055000@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 66
}
2025-06-17 21:12:52 [INFO]: Message history sent
{
  "jid": "353857055000@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:12:52 [INFO]: Performance: websocket_message_processing completed in 75ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 75
}
2025-06-17 21:13:01 [INFO]: Fetching message history
{
  "jid": "557199027750@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:13:01 [INFO]: Performance: get_messages completed in 2ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 2
}
2025-06-17 21:13:01 [INFO]: Performance: get_messages completed in 0ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 0
}
2025-06-17 21:13:01 [INFO]: Performance: get_message_history completed in 27ms
{
  "jid": "557199027750@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 27
}
2025-06-17 21:13:01 [INFO]: Message history sent
{
  "jid": "557199027750@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:13:01 [INFO]: Performance: websocket_message_processing completed in 29ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 29
}
2025-06-17 21:13:02 [INFO]: Fetching message history
{
  "jid": "553399888256@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:13:02 [INFO]: Performance: get_messages completed in 3ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 3
}
2025-06-17 21:13:02 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:13:02 [INFO]: Performance: get_message_history completed in 23ms
{
  "jid": "553399888256@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 23
}
2025-06-17 21:13:02 [INFO]: Message history sent
{
  "jid": "553399888256@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:13:02 [INFO]: Performance: websocket_message_processing completed in 25ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 25
}
2025-06-17 21:13:04 [INFO]: Fetching message history
{
  "jid": "353899678402@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:13:04 [INFO]: Performance: get_messages completed in 2ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 2
}
2025-06-17 21:13:04 [INFO]: Performance: get_messages completed in 2ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 2
}
2025-06-17 21:13:04 [INFO]: Performance: get_message_history completed in 20ms
{
  "jid": "353899678402@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 20
}
2025-06-17 21:13:04 [INFO]: Message history sent
{
  "jid": "353899678402@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:13:04 [INFO]: Performance: websocket_message_processing completed in 24ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 24
}
2025-06-17 21:13:05 [INFO]: Fetching message history
{
  "jid": "553399888256@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:13:05 [INFO]: Performance: get_messages completed in 0ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 0
}
2025-06-17 21:13:05 [INFO]: Performance: get_messages completed in 0ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 0
}
2025-06-17 21:13:05 [INFO]: Performance: get_message_history completed in 19ms
{
  "jid": "553399888256@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 19
}
2025-06-17 21:13:05 [INFO]: Message history sent
{
  "jid": "553399888256@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:13:05 [INFO]: Performance: websocket_message_processing completed in 21ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 21
}
2025-06-17 21:13:07 [INFO]: Fetching message history
{
  "jid": "5527988378482@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:13:07 [INFO]: Performance: get_messages completed in 7ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 7
}
2025-06-17 21:13:07 [INFO]: Performance: get_messages completed in 0ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 0
}
2025-06-17 21:13:07 [INFO]: Performance: get_message_history completed in 33ms
{
  "jid": "5527988378482@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 33
}
2025-06-17 21:13:07 [INFO]: Message history sent
{
  "jid": "5527988378482@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:13:07 [INFO]: Performance: websocket_message_processing completed in 35ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 35
}
2025-06-17 21:13:16 [INFO]: Performance: websocket_connection completed in 34206ms
{
  "type": "performance",
  "operation": "websocket_connection",
  "duration": 34206
}
2025-06-17 21:13:16 [ERROR]: Uncaught Exception
Error: write EPIPE
    at afterWriteDispatched (node:internal/stream_base_commons:159:15)
    at writeGeneric (node:internal/stream_base_commons:150:3)
    at Socket._writeGeneric (node:net:971:11)
    at Socket._write (node:net:983:8)
    at writeOrBuffer (node:internal/streams/writable:572:12)
    at _write (node:internal/streams/writable:501:10)
    at Writable.write (node:internal/streams/writable:510:10)
    at Console.log (/home/tobagin/Projects/Karere/backend/node_modules/winston/lib/winston/transports/console.js:87:23)
    at Console._write (/home/tobagin/Projects/Karere/backend/node_modules/winston-transport/modern.js:103:17)
    at doWrite (/home/tobagin/Projects/Karere/backend/node_modules/winston-transport/node_modules/readable-stream/lib/_stream_writable.js:390:139)
{
  "error": "write EPIPE"
}
2025-06-17 21:13:16 [INFO]: Received uncaughtException, starting graceful shutdown
2025-06-17 21:13:16 [INFO]: Stopping cron job: health-check
2025-06-17 21:13:16 [INFO]: Stopping cron job: log-rotation
2025-06-17 21:13:16 [INFO]: Stopping cron job: database-cleanup
2025-06-17 21:13:16 [INFO]: Stopping cron job: memory-report
2025-06-17 21:13:16 [INFO]: Shutting down service: database
2025-06-17 21:13:16 [INFO]: Shutting down service: websocket
2025-06-17 21:13:26 [INFO]: Starting Karere Backend initialization
2025-06-17 21:13:26 [INFO]: Initializing Service Manager
2025-06-17 21:13:26 [INFO]: Cron job scheduled: health-check (*/5 * * * *)
2025-06-17 21:13:26 [INFO]: Cron job scheduled: log-rotation (0 * * * *)
2025-06-17 21:13:26 [INFO]: Cron job scheduled: database-cleanup (0 2 * * *)
2025-06-17 21:13:26 [INFO]: Cron job scheduled: memory-report (0 * * * *)
2025-06-17 21:13:26 [INFO]: System Information
{
  "nodeVersion": "v22.16.0",
  "platform": "linux",
  "arch": "arm64",
  "memory": {
    "rss": 138186752,
    "heapTotal": 47108096,
    "heapUsed": 32445256,
    "external": 3511728,
    "arrayBuffers": 70016
  },
  "uptime": 3.075677923
}
2025-06-17 21:13:26 [INFO]: Karere Backend Starting
{
  "pid": 44209
}
2025-06-17 21:13:26 [INFO]: Service Manager initialized successfully
2025-06-17 21:13:26 [INFO]: Initializing database
{
  "path": "data/karere.db"
}
2025-06-17 21:13:26 [INFO]: Database tables and indexes created successfully
2025-06-17 21:13:26 [INFO]: Performance: database_initialization completed in 60ms
{
  "type": "performance",
  "operation": "database_initialization",
  "duration": 60
}
2025-06-17 21:13:26 [INFO]: Database initialized successfully
2025-06-17 21:13:26 [INFO]: Service registered: database
2025-06-17 21:13:26 [INFO]: Performance: websocket_server_init completed in 14ms
{
  "type": "performance",
  "operation": "websocket_server_init",
  "duration": 14
}
2025-06-17 21:13:26 [INFO]: WebSocket server started on ws://localhost:8765
2025-06-17 21:13:26 [INFO]: Service registered: websocket
2025-06-17 21:13:26 [INFO]: Initializing WhatsApp connection
{
  "component": "baileys"
}
2025-06-17 21:13:26 [INFO]: Using WhatsApp version 2.3000.1023223821
{
  "component": "baileys"
}
2025-06-17 21:13:27 [INFO]: Performance: whatsapp_connection completed in 281ms
{
  "type": "performance",
  "operation": "whatsapp_connection",
  "duration": 281
}
2025-06-17 21:13:27 [INFO]: WhatsApp socket initialized successfully
{
  "component": "baileys"
}
2025-06-17 21:13:27 [INFO]: Karere Backend initialized successfully
2025-06-17 21:13:27 [INFO]: Connecting to WhatsApp...
{
  "component": "baileys"
}
2025-06-17 21:13:27 [WARN]: Cannot send to frontend: no active connection
{
  "type": "connection_status"
}
2025-06-17 21:13:28 [INFO]: WhatsApp connection is open
{
  "component": "baileys"
}
2025-06-17 21:13:28 [WARN]: Cannot send to frontend: no active connection
{
  "type": "baileys_ready"
}
2025-06-17 21:13:28 [WARN]: Cannot send to frontend: no active connection
{
  "type": "connection_status"
}
2025-06-17 21:13:28 [INFO]: Loading initial chats
{
  "component": "baileys"
}
2025-06-17 21:13:28 [INFO]: Performance: get_chats completed in 12ms
{
  "count": 50,
  "type": "performance",
  "operation": "get_chats",
  "duration": 12
}
2025-06-17 21:13:28 [INFO]: Performance: load_initial_chats completed in 16ms
{
  "source": "database",
  "count": 50,
  "type": "performance",
  "operation": "load_initial_chats",
  "duration": 16
}
2025-06-17 21:13:28 [INFO]: Initial chats loaded from database
{
  "count": 50,
  "component": "baileys"
}
2025-06-17 21:13:30 [INFO]: Client requested chats. Sending cached list.
2025-06-17 21:13:30 [INFO]: Performance: websocket_message_processing completed in 7ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 7
}
2025-06-17 21:13:32 [INFO]: Fetching message history
{
  "jid": "353857055000@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:13:32 [INFO]: Performance: get_messages completed in 4ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 4
}
2025-06-17 21:13:32 [INFO]: Performance: get_messages completed in 0ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 0
}
2025-06-17 21:13:32 [INFO]: Performance: get_message_history completed in 46ms
{
  "jid": "353857055000@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 46
}
2025-06-17 21:13:32 [INFO]: Message history sent
{
  "jid": "353857055000@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:13:32 [INFO]: Performance: websocket_message_processing completed in 50ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 50
}
2025-06-17 21:13:37 [INFO]: Fetching message history
{
  "jid": "557199027750@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:13:37 [INFO]: Performance: get_messages completed in 2ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 2
}
2025-06-17 21:13:37 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:13:37 [INFO]: Performance: get_message_history completed in 21ms
{
  "jid": "557199027750@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 21
}
2025-06-17 21:13:37 [INFO]: Message history sent
{
  "jid": "557199027750@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:13:37 [INFO]: Performance: websocket_message_processing completed in 23ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 23
}
2025-06-17 21:13:38 [INFO]: Fetching message history
{
  "jid": "353857055000@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:13:38 [INFO]: Performance: get_messages completed in 2ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 2
}
2025-06-17 21:13:38 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:13:38 [INFO]: Performance: get_message_history completed in 16ms
{
  "jid": "353857055000@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 16
}
2025-06-17 21:13:38 [INFO]: Message history sent
{
  "jid": "353857055000@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:13:38 [INFO]: Performance: websocket_message_processing completed in 18ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 18
}
2025-06-17 21:14:05 [INFO]: Performance: websocket_connection completed in 34716ms
{
  "type": "performance",
  "operation": "websocket_connection",
  "duration": 34716
}
2025-06-17 21:14:05 [ERROR]: Uncaught Exception
Error: write EPIPE
    at afterWriteDispatched (node:internal/stream_base_commons:159:15)
    at writeGeneric (node:internal/stream_base_commons:150:3)
    at Socket._writeGeneric (node:net:971:11)
    at Socket._write (node:net:983:8)
    at writeOrBuffer (node:internal/streams/writable:572:12)
    at _write (node:internal/streams/writable:501:10)
    at Writable.write (node:internal/streams/writable:510:10)
    at Console.log (/home/tobagin/Projects/Karere/backend/node_modules/winston/lib/winston/transports/console.js:87:23)
    at Console._write (/home/tobagin/Projects/Karere/backend/node_modules/winston-transport/modern.js:103:17)
    at doWrite (/home/tobagin/Projects/Karere/backend/node_modules/winston-transport/node_modules/readable-stream/lib/_stream_writable.js:390:139)
{
  "error": "write EPIPE"
}
2025-06-17 21:14:05 [INFO]: Received uncaughtException, starting graceful shutdown
2025-06-17 21:14:05 [INFO]: Stopping cron job: health-check
2025-06-17 21:14:05 [INFO]: Stopping cron job: log-rotation
2025-06-17 21:14:05 [INFO]: Stopping cron job: database-cleanup
2025-06-17 21:14:05 [INFO]: Stopping cron job: memory-report
2025-06-17 21:14:05 [INFO]: Shutting down service: database
2025-06-17 21:14:05 [INFO]: Shutting down service: websocket
2025-06-17 21:16:22 [INFO]: Starting Karere Backend initialization
2025-06-17 21:16:22 [INFO]: Initializing Service Manager
2025-06-17 21:16:22 [INFO]: Cron job scheduled: health-check (*/5 * * * *)
2025-06-17 21:16:22 [INFO]: Cron job scheduled: log-rotation (0 * * * *)
2025-06-17 21:16:22 [INFO]: Cron job scheduled: database-cleanup (0 2 * * *)
2025-06-17 21:16:22 [INFO]: Cron job scheduled: memory-report (0 * * * *)
2025-06-17 21:16:22 [INFO]: System Information
{
  "nodeVersion": "v22.16.0",
  "platform": "linux",
  "arch": "arm64",
  "memory": {
    "rss": 134545408,
    "heapTotal": 46845952,
    "heapUsed": 32508120,
    "external": 3511728,
    "arrayBuffers": 70016
  },
  "uptime": 2.703331417
}
2025-06-17 21:16:22 [INFO]: Karere Backend Starting
{
  "pid": 44812
}
2025-06-17 21:16:22 [INFO]: Service Manager initialized successfully
2025-06-17 21:16:22 [INFO]: Initializing database
{
  "path": "data/karere.db"
}
2025-06-17 21:16:22 [INFO]: Database tables and indexes created successfully
2025-06-17 21:16:22 [INFO]: Performance: database_initialization completed in 41ms
{
  "type": "performance",
  "operation": "database_initialization",
  "duration": 41
}
2025-06-17 21:16:22 [INFO]: Database initialized successfully
2025-06-17 21:16:22 [INFO]: Service registered: database
2025-06-17 21:16:22 [INFO]: Performance: websocket_server_init completed in 11ms
{
  "type": "performance",
  "operation": "websocket_server_init",
  "duration": 11
}
2025-06-17 21:16:22 [INFO]: WebSocket server started on ws://localhost:8765
2025-06-17 21:16:22 [INFO]: Service registered: websocket
2025-06-17 21:16:22 [INFO]: Initializing WhatsApp connection
{
  "component": "baileys"
}
2025-06-17 21:16:22 [INFO]: Using WhatsApp version 2.3000.1023223821
{
  "component": "baileys"
}
2025-06-17 21:16:22 [INFO]: Performance: whatsapp_connection completed in 315ms
{
  "type": "performance",
  "operation": "whatsapp_connection",
  "duration": 315
}
2025-06-17 21:16:22 [INFO]: WhatsApp socket initialized successfully
{
  "component": "baileys"
}
2025-06-17 21:16:22 [INFO]: Karere Backend initialized successfully
2025-06-17 21:16:22 [INFO]: Connecting to WhatsApp...
{
  "component": "baileys"
}
2025-06-17 21:16:22 [WARN]: Cannot send to frontend: no active connection
{
  "type": "connection_status"
}
2025-06-17 21:16:23 [INFO]: WhatsApp connection is open
{
  "component": "baileys"
}
2025-06-17 21:16:23 [WARN]: Cannot send to frontend: no active connection
{
  "type": "baileys_ready"
}
2025-06-17 21:16:23 [WARN]: Cannot send to frontend: no active connection
{
  "type": "connection_status"
}
2025-06-17 21:16:23 [INFO]: Loading initial chats
{
  "component": "baileys"
}
2025-06-17 21:16:23 [INFO]: Performance: get_chats completed in 8ms
{
  "count": 50,
  "type": "performance",
  "operation": "get_chats",
  "duration": 8
}
2025-06-17 21:16:23 [INFO]: Performance: load_initial_chats completed in 11ms
{
  "source": "database",
  "count": 50,
  "type": "performance",
  "operation": "load_initial_chats",
  "duration": 11
}
2025-06-17 21:16:23 [INFO]: Initial chats loaded from database
{
  "count": 50,
  "component": "baileys"
}
2025-06-17 21:16:26 [INFO]: Client requested chats. Sending cached list.
2025-06-17 21:16:26 [INFO]: Performance: websocket_message_processing completed in 5ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 5
}
2025-06-17 21:16:28 [INFO]: Fetching message history
{
  "jid": "353857055000@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:16:28 [INFO]: Performance: get_messages completed in 2ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 2
}
2025-06-17 21:16:28 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:16:28 [INFO]: Performance: get_message_history completed in 41ms
{
  "jid": "353857055000@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 41
}
2025-06-17 21:16:28 [INFO]: Message history sent
{
  "jid": "353857055000@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:16:28 [INFO]: Performance: websocket_message_processing completed in 45ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 45
}
2025-06-17 21:16:33 [INFO]: Fetching message history
{
  "jid": "557199027750@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:16:33 [INFO]: Performance: get_messages completed in 2ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 2
}
2025-06-17 21:16:33 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:16:33 [INFO]: Performance: get_message_history completed in 30ms
{
  "jid": "557199027750@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 30
}
2025-06-17 21:16:33 [INFO]: Message history sent
{
  "jid": "557199027750@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:16:33 [INFO]: Performance: websocket_message_processing completed in 33ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 33
}
2025-06-17 21:16:35 [INFO]: Fetching message history
{
  "jid": "553399888256@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:16:35 [INFO]: Performance: get_messages completed in 2ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 2
}
2025-06-17 21:16:35 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:16:35 [INFO]: Performance: get_message_history completed in 19ms
{
  "jid": "553399888256@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 19
}
2025-06-17 21:16:35 [INFO]: Message history sent
{
  "jid": "553399888256@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:16:35 [INFO]: Performance: websocket_message_processing completed in 20ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 20
}
2025-06-17 21:16:41 [INFO]: Fetching message history
{
  "jid": "557199027750@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:16:41 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:16:41 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:16:41 [INFO]: Performance: get_message_history completed in 17ms
{
  "jid": "557199027750@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 17
}
2025-06-17 21:16:41 [INFO]: Message history sent
{
  "jid": "557199027750@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:16:41 [INFO]: Performance: websocket_message_processing completed in 20ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 20
}
2025-06-17 21:16:43 [INFO]: Fetching message history
{
  "jid": "553399888256@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:16:43 [INFO]: Performance: get_messages completed in 3ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 3
}
2025-06-17 21:16:43 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:16:43 [INFO]: Performance: get_message_history completed in 26ms
{
  "jid": "553399888256@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 26
}
2025-06-17 21:16:43 [INFO]: Message history sent
{
  "jid": "553399888256@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:16:43 [INFO]: Performance: websocket_message_processing completed in 30ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 30
}
2025-06-17 21:16:46 [INFO]: Fetching message history
{
  "jid": "353899678402@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:16:46 [INFO]: Performance: get_messages completed in 2ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 2
}
2025-06-17 21:16:46 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:16:46 [INFO]: Performance: get_message_history completed in 25ms
{
  "jid": "353899678402@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 25
}
2025-06-17 21:16:46 [INFO]: Message history sent
{
  "jid": "353899678402@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:16:46 [INFO]: Performance: websocket_message_processing completed in 28ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 28
}
2025-06-17 21:16:47 [INFO]: Fetching message history
{
  "jid": "353833313852@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:16:47 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:16:47 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:16:47 [INFO]: Performance: get_message_history completed in 21ms
{
  "jid": "353833313852@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 21
}
2025-06-17 21:16:47 [INFO]: Message history sent
{
  "jid": "353833313852@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:16:47 [INFO]: Performance: websocket_message_processing completed in 24ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 24
}
2025-06-17 21:16:49 [INFO]: Fetching message history
{
  "jid": "353857055000@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:16:49 [INFO]: Performance: get_messages completed in 2ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 2
}
2025-06-17 21:16:49 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:16:49 [INFO]: Performance: get_message_history completed in 27ms
{
  "jid": "353857055000@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 27
}
2025-06-17 21:16:49 [INFO]: Message history sent
{
  "jid": "353857055000@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:16:49 [INFO]: Performance: websocket_message_processing completed in 32ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 32
}
2025-06-17 21:16:50 [INFO]: Fetching message history
{
  "jid": "353899678402@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:16:50 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:16:50 [INFO]: Performance: get_messages completed in 2ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 2
}
2025-06-17 21:16:50 [INFO]: Performance: get_message_history completed in 31ms
{
  "jid": "353899678402@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 31
}
2025-06-17 21:16:50 [INFO]: Message history sent
{
  "jid": "353899678402@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:16:50 [INFO]: Performance: websocket_message_processing completed in 35ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 35
}
2025-06-17 21:17:19 [INFO]: Performance: websocket_connection completed in 52779ms
{
  "type": "performance",
  "operation": "websocket_connection",
  "duration": 52779
}
2025-06-17 21:17:19 [ERROR]: Uncaught Exception
Error: write EPIPE
    at afterWriteDispatched (node:internal/stream_base_commons:159:15)
    at writeGeneric (node:internal/stream_base_commons:150:3)
    at Socket._writeGeneric (node:net:971:11)
    at Socket._write (node:net:983:8)
    at writeOrBuffer (node:internal/streams/writable:572:12)
    at _write (node:internal/streams/writable:501:10)
    at Writable.write (node:internal/streams/writable:510:10)
    at Console.log (/home/tobagin/Projects/Karere/backend/node_modules/winston/lib/winston/transports/console.js:87:23)
    at Console._write (/home/tobagin/Projects/Karere/backend/node_modules/winston-transport/modern.js:103:17)
    at doWrite (/home/tobagin/Projects/Karere/backend/node_modules/winston-transport/node_modules/readable-stream/lib/_stream_writable.js:390:139)
{
  "error": "write EPIPE"
}
2025-06-17 21:17:19 [INFO]: Received uncaughtException, starting graceful shutdown
2025-06-17 21:17:19 [INFO]: Stopping cron job: health-check
2025-06-17 21:17:19 [INFO]: Stopping cron job: log-rotation
2025-06-17 21:17:19 [INFO]: Stopping cron job: database-cleanup
2025-06-17 21:17:19 [INFO]: Stopping cron job: memory-report
2025-06-17 21:17:19 [INFO]: Shutting down service: database
2025-06-17 21:17:19 [INFO]: Shutting down service: websocket
2025-06-17 21:17:28 [INFO]: Starting Karere Backend initialization
2025-06-17 21:17:28 [INFO]: Initializing Service Manager
2025-06-17 21:17:28 [INFO]: Cron job scheduled: health-check (*/5 * * * *)
2025-06-17 21:17:28 [INFO]: Cron job scheduled: log-rotation (0 * * * *)
2025-06-17 21:17:28 [INFO]: Cron job scheduled: database-cleanup (0 2 * * *)
2025-06-17 21:17:28 [INFO]: Cron job scheduled: memory-report (0 * * * *)
2025-06-17 21:17:28 [INFO]: System Information
{
  "nodeVersion": "v22.16.0",
  "platform": "linux",
  "arch": "arm64",
  "memory": {
    "rss": 141148160,
    "heapTotal": 47894528,
    "heapUsed": 31236704,
    "external": 3511728,
    "arrayBuffers": 70016
  },
  "uptime": 1.962960269
}
2025-06-17 21:17:28 [INFO]: Karere Backend Starting
{
  "pid": 45134
}
2025-06-17 21:17:28 [INFO]: Service Manager initialized successfully
2025-06-17 21:17:28 [INFO]: Initializing database
{
  "path": "data/karere.db"
}
2025-06-17 21:17:29 [INFO]: Database tables and indexes created successfully
2025-06-17 21:17:29 [INFO]: Performance: database_initialization completed in 145ms
{
  "type": "performance",
  "operation": "database_initialization",
  "duration": 145
}
2025-06-17 21:17:29 [INFO]: Database initialized successfully
2025-06-17 21:17:29 [INFO]: Service registered: database
2025-06-17 21:17:29 [INFO]: Performance: websocket_server_init completed in 18ms
{
  "type": "performance",
  "operation": "websocket_server_init",
  "duration": 18
}
2025-06-17 21:17:29 [INFO]: WebSocket server started on ws://localhost:8765
2025-06-17 21:17:29 [INFO]: Service registered: websocket
2025-06-17 21:17:29 [INFO]: Initializing WhatsApp connection
{
  "component": "baileys"
}
2025-06-17 21:17:29 [INFO]: Using WhatsApp version 2.3000.1023223821
{
  "component": "baileys"
}
2025-06-17 21:17:29 [INFO]: Performance: whatsapp_connection completed in 552ms
{
  "type": "performance",
  "operation": "whatsapp_connection",
  "duration": 552
}
2025-06-17 21:17:29 [INFO]: WhatsApp socket initialized successfully
{
  "component": "baileys"
}
2025-06-17 21:17:29 [INFO]: Karere Backend initialized successfully
2025-06-17 21:17:29 [INFO]: Connecting to WhatsApp...
{
  "component": "baileys"
}
2025-06-17 21:17:29 [WARN]: Cannot send to frontend: no active connection
{
  "type": "connection_status"
}
2025-06-17 21:17:30 [INFO]: WhatsApp connection is open
{
  "component": "baileys"
}
2025-06-17 21:17:30 [WARN]: Cannot send to frontend: no active connection
{
  "type": "baileys_ready"
}
2025-06-17 21:17:30 [WARN]: Cannot send to frontend: no active connection
{
  "type": "connection_status"
}
2025-06-17 21:17:30 [INFO]: Loading initial chats
{
  "component": "baileys"
}
2025-06-17 21:17:30 [INFO]: Performance: get_chats completed in 11ms
{
  "count": 50,
  "type": "performance",
  "operation": "get_chats",
  "duration": 11
}
2025-06-17 21:17:30 [INFO]: Performance: load_initial_chats completed in 16ms
{
  "source": "database",
  "count": 50,
  "type": "performance",
  "operation": "load_initial_chats",
  "duration": 16
}
2025-06-17 21:17:30 [INFO]: Initial chats loaded from database
{
  "count": 50,
  "component": "baileys"
}
2025-06-17 21:17:33 [INFO]: Client requested chats. Sending cached list.
2025-06-17 21:17:33 [INFO]: Performance: websocket_message_processing completed in 6ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 6
}
2025-06-17 21:17:36 [INFO]: Fetching message history
{
  "jid": "553399888256@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:17:36 [INFO]: Performance: get_messages completed in 3ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 3
}
2025-06-17 21:17:36 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:17:36 [INFO]: Performance: get_message_history completed in 49ms
{
  "jid": "553399888256@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 49
}
2025-06-17 21:17:36 [INFO]: Message history sent
{
  "jid": "553399888256@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:17:36 [INFO]: Performance: websocket_message_processing completed in 54ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 54
}
2025-06-17 21:17:38 [INFO]: Fetching message history
{
  "jid": "557199027750@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:17:38 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:17:38 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:17:38 [INFO]: Performance: get_message_history completed in 19ms
{
  "jid": "557199027750@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 19
}
2025-06-17 21:17:38 [INFO]: Message history sent
{
  "jid": "557199027750@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:17:38 [INFO]: Performance: websocket_message_processing completed in 23ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 23
}
2025-06-17 21:17:39 [INFO]: Fetching message history
{
  "jid": "353857055000@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:17:39 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:17:39 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:17:39 [INFO]: Performance: get_message_history completed in 19ms
{
  "jid": "353857055000@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 19
}
2025-06-17 21:17:39 [INFO]: Message history sent
{
  "jid": "353857055000@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:17:39 [INFO]: Performance: websocket_message_processing completed in 21ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 21
}
2025-06-17 21:17:40 [INFO]: Fetching message history
{
  "jid": "557199027750@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:17:40 [INFO]: Performance: get_messages completed in 5ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 5
}
2025-06-17 21:17:40 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:17:40 [INFO]: Performance: get_message_history completed in 22ms
{
  "jid": "557199027750@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 22
}
2025-06-17 21:17:40 [INFO]: Message history sent
{
  "jid": "557199027750@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:17:40 [INFO]: Performance: websocket_message_processing completed in 25ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 25
}
2025-06-17 21:17:43 [INFO]: Fetching message history
{
  "jid": "553399888256@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:17:43 [INFO]: Performance: get_messages completed in 2ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 2
}
2025-06-17 21:17:43 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:17:43 [INFO]: Performance: get_message_history completed in 27ms
{
  "jid": "553399888256@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 27
}
2025-06-17 21:17:43 [INFO]: Message history sent
{
  "jid": "553399888256@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:17:43 [INFO]: Performance: websocket_message_processing completed in 34ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 34
}
2025-06-17 21:17:44 [INFO]: Fetching message history
{
  "jid": "353857055000@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:17:44 [INFO]: Performance: get_messages completed in 3ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 3
}
2025-06-17 21:17:44 [INFO]: Performance: get_messages completed in 0ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 0
}
2025-06-17 21:17:44 [INFO]: Performance: get_message_history completed in 29ms
{
  "jid": "353857055000@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 29
}
2025-06-17 21:17:44 [INFO]: Message history sent
{
  "jid": "353857055000@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:17:44 [INFO]: Performance: websocket_message_processing completed in 33ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 33
}
2025-06-17 21:18:14 [INFO]: Performance: websocket_connection completed in 40908ms
{
  "type": "performance",
  "operation": "websocket_connection",
  "duration": 40908
}
2025-06-17 21:18:25 [INFO]: Starting Karere Backend initialization
2025-06-17 21:18:25 [INFO]: Initializing Service Manager
2025-06-17 21:18:25 [INFO]: Cron job scheduled: health-check (*/5 * * * *)
2025-06-17 21:18:25 [INFO]: Cron job scheduled: log-rotation (0 * * * *)
2025-06-17 21:18:25 [INFO]: Cron job scheduled: database-cleanup (0 2 * * *)
2025-06-17 21:18:25 [INFO]: Cron job scheduled: memory-report (0 * * * *)
2025-06-17 21:18:25 [INFO]: System Information
{
  "nodeVersion": "v22.16.0",
  "platform": "linux",
  "arch": "arm64",
  "memory": {
    "rss": 139603968,
    "heapTotal": 47300608,
    "heapUsed": 32908984,
    "external": 3511728,
    "arrayBuffers": 70016
  },
  "uptime": 1.7172196
}
2025-06-17 21:18:25 [INFO]: Karere Backend Starting
{
  "pid": 45320
}
2025-06-17 21:18:25 [INFO]: Service Manager initialized successfully
2025-06-17 21:18:25 [INFO]: Initializing database
{
  "path": "data/karere.db"
}
2025-06-17 21:18:25 [INFO]: Database tables and indexes created successfully
2025-06-17 21:18:25 [INFO]: Performance: database_initialization completed in 100ms
{
  "type": "performance",
  "operation": "database_initialization",
  "duration": 100
}
2025-06-17 21:18:25 [INFO]: Database initialized successfully
2025-06-17 21:18:25 [INFO]: Service registered: database
2025-06-17 21:18:25 [INFO]: Performance: websocket_server_init completed in 41ms
{
  "type": "performance",
  "operation": "websocket_server_init",
  "duration": 41
}
2025-06-17 21:18:25 [INFO]: WebSocket server started on ws://localhost:8765
2025-06-17 21:18:25 [INFO]: Service registered: websocket
2025-06-17 21:18:25 [INFO]: Initializing WhatsApp connection
{
  "component": "baileys"
}
2025-06-17 21:18:26 [INFO]: Using WhatsApp version 2.3000.1023223821
{
  "component": "baileys"
}
2025-06-17 21:18:26 [INFO]: Performance: whatsapp_connection completed in 481ms
{
  "type": "performance",
  "operation": "whatsapp_connection",
  "duration": 481
}
2025-06-17 21:18:26 [INFO]: WhatsApp socket initialized successfully
{
  "component": "baileys"
}
2025-06-17 21:18:26 [INFO]: Karere Backend initialized successfully
2025-06-17 21:18:26 [INFO]: Connecting to WhatsApp...
{
  "component": "baileys"
}
2025-06-17 21:18:27 [INFO]: WhatsApp connection is open
{
  "component": "baileys"
}
2025-06-17 21:18:27 [INFO]: Loading initial chats
{
  "component": "baileys"
}
2025-06-17 21:18:27 [INFO]: Performance: get_chats completed in 15ms
{
  "count": 50,
  "type": "performance",
  "operation": "get_chats",
  "duration": 15
}
2025-06-17 21:18:27 [INFO]: Performance: load_initial_chats completed in 20ms
{
  "source": "database",
  "count": 50,
  "type": "performance",
  "operation": "load_initial_chats",
  "duration": 20
}
2025-06-17 21:18:27 [INFO]: Initial chats loaded from database
{
  "count": 50,
  "component": "baileys"
}
2025-06-17 21:18:27 [INFO]: Performance: get_chats completed in 11ms
{
  "count": 50,
  "type": "performance",
  "operation": "get_chats",
  "duration": 11
}
2025-06-17 21:18:27 [INFO]: Sent chats from database
{
  "count": 50
}
2025-06-17 21:18:27 [INFO]: Performance: websocket_message_processing completed in 16ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 16
}
2025-06-17 21:18:29 [INFO]: Fetching message history
{
  "jid": "353857055000@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:18:29 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:18:29 [INFO]: Performance: get_messages completed in 0ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 0
}
2025-06-17 21:18:29 [INFO]: Performance: get_message_history completed in 39ms
{
  "jid": "353857055000@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 39
}
2025-06-17 21:18:29 [INFO]: Message history sent
{
  "jid": "353857055000@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:18:29 [INFO]: Performance: websocket_message_processing completed in 42ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 42
}
2025-06-17 21:19:00 [INFO]: Fetching message history
{
  "jid": "557199027750@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:19:00 [INFO]: Performance: get_messages completed in 4ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 4
}
2025-06-17 21:19:00 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:19:00 [INFO]: Performance: get_message_history completed in 38ms
{
  "jid": "557199027750@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 38
}
2025-06-17 21:19:00 [INFO]: Message history sent
{
  "jid": "557199027750@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:19:00 [INFO]: Performance: websocket_message_processing completed in 43ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 43
}
2025-06-17 21:19:02 [INFO]: Fetching message history
{
  "jid": "353857055000@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:19:02 [INFO]: Performance: get_messages completed in 2ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 2
}
2025-06-17 21:19:02 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:19:02 [INFO]: Performance: get_message_history completed in 34ms
{
  "jid": "353857055000@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 34
}
2025-06-17 21:19:02 [INFO]: Message history sent
{
  "jid": "353857055000@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:19:02 [INFO]: Performance: websocket_message_processing completed in 37ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 37
}
2025-06-17 21:19:04 [INFO]: Fetching message history
{
  "jid": "557199027750@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:19:04 [INFO]: Performance: get_messages completed in 0ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 0
}
2025-06-17 21:19:04 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:19:04 [INFO]: Performance: get_message_history completed in 17ms
{
  "jid": "557199027750@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 17
}
2025-06-17 21:19:04 [INFO]: Message history sent
{
  "jid": "557199027750@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:19:04 [INFO]: Performance: websocket_message_processing completed in 19ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 19
}
2025-06-17 21:21:07 [INFO]: Performance: websocket_connection completed in 161347ms
{
  "type": "performance",
  "operation": "websocket_connection",
  "duration": 161347
}
2025-06-17 21:21:07 [ERROR]: Uncaught Exception
Error: write EPIPE
    at afterWriteDispatched (node:internal/stream_base_commons:159:15)
    at writeGeneric (node:internal/stream_base_commons:150:3)
    at Socket._writeGeneric (node:net:971:11)
    at Socket._write (node:net:983:8)
    at writeOrBuffer (node:internal/streams/writable:572:12)
    at _write (node:internal/streams/writable:501:10)
    at Writable.write (node:internal/streams/writable:510:10)
    at Console.log (/home/tobagin/Projects/Karere/backend/node_modules/winston/lib/winston/transports/console.js:87:23)
    at Console._write (/home/tobagin/Projects/Karere/backend/node_modules/winston-transport/modern.js:103:17)
    at doWrite (/home/tobagin/Projects/Karere/backend/node_modules/winston-transport/node_modules/readable-stream/lib/_stream_writable.js:390:139)
{
  "error": "write EPIPE"
}
2025-06-17 21:21:07 [INFO]: Received uncaughtException, starting graceful shutdown
2025-06-17 21:21:07 [INFO]: Stopping cron job: health-check
2025-06-17 21:21:07 [INFO]: Stopping cron job: log-rotation
2025-06-17 21:21:07 [INFO]: Stopping cron job: database-cleanup
2025-06-17 21:21:07 [INFO]: Stopping cron job: memory-report
2025-06-17 21:21:07 [INFO]: Shutting down service: database
2025-06-17 21:21:07 [INFO]: Shutting down service: websocket
2025-06-17 21:21:16 [INFO]: Starting Karere Backend initialization
2025-06-17 21:21:16 [INFO]: Initializing Service Manager
2025-06-17 21:21:16 [INFO]: Cron job scheduled: health-check (*/5 * * * *)
2025-06-17 21:21:16 [INFO]: Cron job scheduled: log-rotation (0 * * * *)
2025-06-17 21:21:16 [INFO]: Cron job scheduled: database-cleanup (0 2 * * *)
2025-06-17 21:21:16 [INFO]: Cron job scheduled: memory-report (0 * * * *)
2025-06-17 21:21:16 [INFO]: System Information
{
  "nodeVersion": "v22.16.0",
  "platform": "linux",
  "arch": "arm64",
  "memory": {
    "rss": 133140480,
    "heapTotal": 46776320,
    "heapUsed": 32890344,
    "external": 3511728,
    "arrayBuffers": 70016
  },
  "uptime": 1.833212897
}
2025-06-17 21:21:16 [INFO]: Karere Backend Starting
{
  "pid": 45573
}
2025-06-17 21:21:16 [INFO]: Service Manager initialized successfully
2025-06-17 21:21:16 [INFO]: Initializing database
{
  "path": "data/karere.db"
}
2025-06-17 21:21:16 [INFO]: Database tables and indexes created successfully
2025-06-17 21:21:16 [INFO]: Performance: database_initialization completed in 31ms
{
  "type": "performance",
  "operation": "database_initialization",
  "duration": 31
}
2025-06-17 21:21:16 [INFO]: Database initialized successfully
2025-06-17 21:21:16 [INFO]: Service registered: database
2025-06-17 21:21:16 [INFO]: Performance: websocket_server_init completed in 14ms
{
  "type": "performance",
  "operation": "websocket_server_init",
  "duration": 14
}
2025-06-17 21:21:16 [INFO]: WebSocket server started on ws://localhost:8765
2025-06-17 21:21:16 [INFO]: Service registered: websocket
2025-06-17 21:21:16 [INFO]: Initializing WhatsApp connection
{
  "component": "baileys"
}
2025-06-17 21:21:16 [INFO]: Using WhatsApp version 2.3000.1023223821
{
  "component": "baileys"
}
2025-06-17 21:21:16 [INFO]: Performance: whatsapp_connection completed in 475ms
{
  "type": "performance",
  "operation": "whatsapp_connection",
  "duration": 475
}
2025-06-17 21:21:16 [INFO]: WhatsApp socket initialized successfully
{
  "component": "baileys"
}
2025-06-17 21:21:16 [INFO]: Karere Backend initialized successfully
2025-06-17 21:21:16 [INFO]: Connecting to WhatsApp...
{
  "component": "baileys"
}
2025-06-17 21:21:17 [INFO]: WhatsApp connection is open
{
  "component": "baileys"
}
2025-06-17 21:21:17 [INFO]: Loading initial chats
{
  "component": "baileys"
}
2025-06-17 21:21:17 [INFO]: Performance: get_chats completed in 16ms
{
  "count": 50,
  "type": "performance",
  "operation": "get_chats",
  "duration": 16
}
2025-06-17 21:21:17 [INFO]: Performance: load_initial_chats completed in 19ms
{
  "source": "database",
  "count": 50,
  "type": "performance",
  "operation": "load_initial_chats",
  "duration": 19
}
2025-06-17 21:21:17 [INFO]: Initial chats loaded from database
{
  "count": 50,
  "component": "baileys"
}
2025-06-17 21:21:17 [INFO]: Performance: get_chats completed in 7ms
{
  "count": 50,
  "type": "performance",
  "operation": "get_chats",
  "duration": 7
}
2025-06-17 21:21:17 [INFO]: Sent chats from database
{
  "count": 50
}
2025-06-17 21:21:17 [INFO]: Performance: websocket_message_processing completed in 14ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 14
}
2025-06-17 21:21:20 [INFO]: Fetching message history
{
  "jid": "353857055000@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:21:20 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:21:20 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:21:20 [INFO]: Performance: get_message_history completed in 56ms
{
  "jid": "353857055000@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 56
}
2025-06-17 21:21:20 [INFO]: Message history sent
{
  "jid": "353857055000@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:21:20 [INFO]: Performance: websocket_message_processing completed in 61ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 61
}
2025-06-17 21:21:22 [INFO]: Fetching message history
{
  "jid": "557199027750@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:21:22 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:21:22 [INFO]: Performance: get_messages completed in 0ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 0
}
2025-06-17 21:21:22 [INFO]: Performance: get_message_history completed in 21ms
{
  "jid": "557199027750@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 21
}
2025-06-17 21:21:22 [INFO]: Message history sent
{
  "jid": "557199027750@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:21:22 [INFO]: Performance: websocket_message_processing completed in 23ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 23
}
2025-06-17 21:21:25 [INFO]: Fetching message history
{
  "jid": "553399888256@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:21:25 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:21:25 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:21:25 [INFO]: Performance: get_message_history completed in 26ms
{
  "jid": "553399888256@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 26
}
2025-06-17 21:21:25 [INFO]: Message history sent
{
  "jid": "553399888256@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:21:25 [INFO]: Performance: websocket_message_processing completed in 28ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 28
}
2025-06-17 21:21:26 [INFO]: Fetching message history
{
  "jid": "557199027750@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:21:26 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:21:26 [INFO]: Performance: get_messages completed in 0ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 0
}
2025-06-17 21:21:26 [INFO]: Performance: get_message_history completed in 17ms
{
  "jid": "557199027750@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 17
}
2025-06-17 21:21:26 [INFO]: Message history sent
{
  "jid": "557199027750@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:21:26 [INFO]: Performance: websocket_message_processing completed in 21ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 21
}
2025-06-17 21:21:27 [INFO]: Fetching message history
{
  "jid": "353857055000@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:21:27 [INFO]: Performance: get_messages completed in 2ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 2
}
2025-06-17 21:21:27 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:21:27 [INFO]: Performance: get_message_history completed in 19ms
{
  "jid": "353857055000@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 19
}
2025-06-17 21:21:27 [INFO]: Message history sent
{
  "jid": "353857055000@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:21:27 [INFO]: Performance: websocket_message_processing completed in 21ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 21
}
2025-06-17 21:21:27 [INFO]: Fetching message history
{
  "jid": "557199027750@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:21:27 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:21:27 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:21:27 [INFO]: Performance: get_message_history completed in 17ms
{
  "jid": "557199027750@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 17
}
2025-06-17 21:21:27 [INFO]: Message history sent
{
  "jid": "557199027750@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:21:27 [INFO]: Performance: websocket_message_processing completed in 19ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 19
}
2025-06-17 21:22:32 [INFO]: Performance: websocket_connection completed in 76280ms
{
  "type": "performance",
  "operation": "websocket_connection",
  "duration": 76280
}
2025-06-17 21:22:32 [ERROR]: Uncaught Exception
Error: write EPIPE
    at afterWriteDispatched (node:internal/stream_base_commons:159:15)
    at writeGeneric (node:internal/stream_base_commons:150:3)
    at Socket._writeGeneric (node:net:971:11)
    at Socket._write (node:net:983:8)
    at writeOrBuffer (node:internal/streams/writable:572:12)
    at _write (node:internal/streams/writable:501:10)
    at Writable.write (node:internal/streams/writable:510:10)
    at Console.log (/home/tobagin/Projects/Karere/backend/node_modules/winston/lib/winston/transports/console.js:87:23)
    at Console._write (/home/tobagin/Projects/Karere/backend/node_modules/winston-transport/modern.js:103:17)
    at doWrite (/home/tobagin/Projects/Karere/backend/node_modules/winston-transport/node_modules/readable-stream/lib/_stream_writable.js:390:139)
{
  "error": "write EPIPE"
}
2025-06-17 21:22:32 [INFO]: Received uncaughtException, starting graceful shutdown
2025-06-17 21:22:32 [INFO]: Stopping cron job: health-check
2025-06-17 21:22:32 [INFO]: Stopping cron job: log-rotation
2025-06-17 21:22:32 [INFO]: Stopping cron job: database-cleanup
2025-06-17 21:22:32 [INFO]: Stopping cron job: memory-report
2025-06-17 21:22:32 [INFO]: Shutting down service: database
2025-06-17 21:22:32 [INFO]: Shutting down service: websocket
2025-06-17 21:22:41 [INFO]: Starting Karere Backend initialization
2025-06-17 21:22:41 [INFO]: Initializing Service Manager
2025-06-17 21:22:41 [INFO]: Cron job scheduled: health-check (*/5 * * * *)
2025-06-17 21:22:41 [INFO]: Cron job scheduled: log-rotation (0 * * * *)
2025-06-17 21:22:41 [INFO]: Cron job scheduled: database-cleanup (0 2 * * *)
2025-06-17 21:22:41 [INFO]: Cron job scheduled: memory-report (0 * * * *)
2025-06-17 21:22:41 [INFO]: System Information
{
  "nodeVersion": "v22.16.0",
  "platform": "linux",
  "arch": "arm64",
  "memory": {
    "rss": 135876608,
    "heapTotal": 47632384,
    "heapUsed": 31283856,
    "external": 3511728,
    "arrayBuffers": 70016
  },
  "uptime": 1.256624768
}
2025-06-17 21:22:41 [INFO]: Karere Backend Starting
{
  "pid": 45772
}
2025-06-17 21:22:41 [INFO]: Service Manager initialized successfully
2025-06-17 21:22:41 [INFO]: Initializing database
{
  "path": "data/karere.db"
}
2025-06-17 21:22:41 [INFO]: Database tables and indexes created successfully
2025-06-17 21:22:41 [INFO]: Performance: database_initialization completed in 33ms
{
  "type": "performance",
  "operation": "database_initialization",
  "duration": 33
}
2025-06-17 21:22:41 [INFO]: Database initialized successfully
2025-06-17 21:22:41 [INFO]: Service registered: database
2025-06-17 21:22:41 [INFO]: Performance: websocket_server_init completed in 11ms
{
  "type": "performance",
  "operation": "websocket_server_init",
  "duration": 11
}
2025-06-17 21:22:41 [INFO]: WebSocket server started on ws://localhost:8765
2025-06-17 21:22:41 [INFO]: Service registered: websocket
2025-06-17 21:22:41 [INFO]: Initializing WhatsApp connection
{
  "component": "baileys"
}
2025-06-17 21:22:41 [INFO]: Using WhatsApp version 2.3000.1023223821
{
  "component": "baileys"
}
2025-06-17 21:22:41 [INFO]: Performance: whatsapp_connection completed in 245ms
{
  "type": "performance",
  "operation": "whatsapp_connection",
  "duration": 245
}
2025-06-17 21:22:41 [INFO]: WhatsApp socket initialized successfully
{
  "component": "baileys"
}
2025-06-17 21:22:41 [INFO]: Karere Backend initialized successfully
2025-06-17 21:22:41 [INFO]: Connecting to WhatsApp...
{
  "component": "baileys"
}
2025-06-17 21:22:41 [WARN]: Cannot send to frontend: no active connection
{
  "type": "connection_status"
}
2025-06-17 21:22:42 [INFO]: WhatsApp connection is open
{
  "component": "baileys"
}
2025-06-17 21:22:42 [INFO]: Loading initial chats
{
  "component": "baileys"
}
2025-06-17 21:22:42 [INFO]: Performance: get_chats completed in 105ms
{
  "count": 50,
  "type": "performance",
  "operation": "get_chats",
  "duration": 105
}
2025-06-17 21:22:42 [INFO]: Performance: load_initial_chats completed in 115ms
{
  "source": "database",
  "count": 50,
  "type": "performance",
  "operation": "load_initial_chats",
  "duration": 115
}
2025-06-17 21:22:42 [INFO]: Initial chats loaded from database
{
  "count": 50,
  "component": "baileys"
}
2025-06-17 21:22:42 [INFO]: Performance: get_chats completed in 26ms
{
  "count": 50,
  "type": "performance",
  "operation": "get_chats",
  "duration": 26
}
2025-06-17 21:22:42 [INFO]: Sent chats from database
{
  "count": 50
}
2025-06-17 21:22:42 [INFO]: Performance: websocket_message_processing completed in 40ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 40
}
2025-06-17 21:22:44 [INFO]: Fetching message history
{
  "jid": "353857055000@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:22:44 [INFO]: Performance: get_messages completed in 5ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 5
}
2025-06-17 21:22:44 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:22:44 [INFO]: Performance: get_message_history completed in 66ms
{
  "jid": "353857055000@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 66
}
2025-06-17 21:22:44 [INFO]: Message history sent
{
  "jid": "353857055000@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:22:44 [INFO]: Performance: websocket_message_processing completed in 70ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 70
}
2025-06-17 21:22:45 [INFO]: Fetching message history
{
  "jid": "557199027750@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:22:45 [INFO]: Performance: get_messages completed in 2ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 2
}
2025-06-17 21:22:45 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:22:45 [INFO]: Performance: get_message_history completed in 21ms
{
  "jid": "557199027750@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 21
}
2025-06-17 21:22:45 [INFO]: Message history sent
{
  "jid": "557199027750@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:22:45 [INFO]: Performance: websocket_message_processing completed in 24ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 24
}
2025-06-17 21:22:48 [INFO]: Fetching message history
{
  "jid": "553399888256@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:22:48 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:22:48 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:22:48 [INFO]: Performance: get_message_history completed in 15ms
{
  "jid": "553399888256@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 15
}
2025-06-17 21:22:48 [INFO]: Message history sent
{
  "jid": "553399888256@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:22:48 [INFO]: Performance: websocket_message_processing completed in 18ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 18
}
2025-06-17 21:22:52 [INFO]: Fetching message history
{
  "jid": "557199027750@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:22:52 [INFO]: Performance: get_messages completed in 2ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 2
}
2025-06-17 21:22:52 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:22:52 [INFO]: Performance: get_message_history completed in 20ms
{
  "jid": "557199027750@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 20
}
2025-06-17 21:22:52 [INFO]: Message history sent
{
  "jid": "557199027750@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:22:52 [INFO]: Performance: websocket_message_processing completed in 23ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 23
}
2025-06-17 21:22:54 [INFO]: Fetching message history
{
  "jid": "553399888256@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:22:54 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:22:54 [INFO]: Performance: get_messages completed in 0ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 0
}
2025-06-17 21:22:54 [INFO]: Performance: get_message_history completed in 24ms
{
  "jid": "553399888256@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 24
}
2025-06-17 21:22:54 [INFO]: Message history sent
{
  "jid": "553399888256@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:22:54 [INFO]: Performance: websocket_message_processing completed in 27ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 27
}
2025-06-17 21:23:36 [INFO]: Performance: websocket_connection completed in 54728ms
{
  "type": "performance",
  "operation": "websocket_connection",
  "duration": 54728
}
2025-06-17 21:23:36 [ERROR]: Uncaught Exception
Error: write EPIPE
    at afterWriteDispatched (node:internal/stream_base_commons:159:15)
    at writeGeneric (node:internal/stream_base_commons:150:3)
    at Socket._writeGeneric (node:net:971:11)
    at Socket._write (node:net:983:8)
    at writeOrBuffer (node:internal/streams/writable:572:12)
    at _write (node:internal/streams/writable:501:10)
    at Writable.write (node:internal/streams/writable:510:10)
    at Console.log (/home/tobagin/Projects/Karere/backend/node_modules/winston/lib/winston/transports/console.js:87:23)
    at Console._write (/home/tobagin/Projects/Karere/backend/node_modules/winston-transport/modern.js:103:17)
    at doWrite (/home/tobagin/Projects/Karere/backend/node_modules/winston-transport/node_modules/readable-stream/lib/_stream_writable.js:390:139)
{
  "error": "write EPIPE"
}
2025-06-17 21:23:36 [INFO]: Received uncaughtException, starting graceful shutdown
2025-06-17 21:23:36 [INFO]: Stopping cron job: health-check
2025-06-17 21:23:36 [INFO]: Stopping cron job: log-rotation
2025-06-17 21:23:36 [INFO]: Stopping cron job: database-cleanup
2025-06-17 21:23:36 [INFO]: Stopping cron job: memory-report
2025-06-17 21:23:36 [INFO]: Shutting down service: database
2025-06-17 21:23:36 [INFO]: Shutting down service: websocket
2025-06-17 21:23:47 [INFO]: Starting Karere Backend initialization
2025-06-17 21:23:47 [INFO]: Initializing Service Manager
2025-06-17 21:23:47 [INFO]: Cron job scheduled: health-check (*/5 * * * *)
2025-06-17 21:23:47 [INFO]: Cron job scheduled: log-rotation (0 * * * *)
2025-06-17 21:23:47 [INFO]: Cron job scheduled: database-cleanup (0 2 * * *)
2025-06-17 21:23:47 [INFO]: Cron job scheduled: memory-report (0 * * * *)
2025-06-17 21:23:47 [INFO]: System Information
{
  "nodeVersion": "v22.16.0",
  "platform": "linux",
  "arch": "arm64",
  "memory": {
    "rss": 134713344,
    "heapTotal": 47632384,
    "heapUsed": 31240752,
    "external": 3511728,
    "arrayBuffers": 70016
  },
  "uptime": 1.684624947
}
2025-06-17 21:23:47 [INFO]: Karere Backend Starting
{
  "pid": 45958
}
2025-06-17 21:23:47 [INFO]: Service Manager initialized successfully
2025-06-17 21:23:47 [INFO]: Initializing database
{
  "path": "data/karere.db"
}
2025-06-17 21:23:48 [INFO]: Database tables and indexes created successfully
2025-06-17 21:23:48 [INFO]: Performance: database_initialization completed in 27ms
{
  "type": "performance",
  "operation": "database_initialization",
  "duration": 27
}
2025-06-17 21:23:48 [INFO]: Database initialized successfully
2025-06-17 21:23:48 [INFO]: Service registered: database
2025-06-17 21:23:48 [INFO]: Performance: websocket_server_init completed in 11ms
{
  "type": "performance",
  "operation": "websocket_server_init",
  "duration": 11
}
2025-06-17 21:23:48 [INFO]: WebSocket server started on ws://localhost:8765
2025-06-17 21:23:48 [INFO]: Service registered: websocket
2025-06-17 21:23:48 [INFO]: Initializing WhatsApp connection
{
  "component": "baileys"
}
2025-06-17 21:23:48 [INFO]: Using WhatsApp version 2.3000.1023223821
{
  "component": "baileys"
}
2025-06-17 21:23:48 [INFO]: Performance: whatsapp_connection completed in 430ms
{
  "type": "performance",
  "operation": "whatsapp_connection",
  "duration": 430
}
2025-06-17 21:23:48 [INFO]: WhatsApp socket initialized successfully
{
  "component": "baileys"
}
2025-06-17 21:23:48 [INFO]: Karere Backend initialized successfully
2025-06-17 21:23:48 [INFO]: Connecting to WhatsApp...
{
  "component": "baileys"
}
2025-06-17 21:23:49 [INFO]: WhatsApp connection is open
{
  "component": "baileys"
}
2025-06-17 21:23:49 [INFO]: Loading initial chats
{
  "component": "baileys"
}
2025-06-17 21:23:49 [INFO]: Performance: get_chats completed in 15ms
{
  "count": 50,
  "type": "performance",
  "operation": "get_chats",
  "duration": 15
}
2025-06-17 21:23:49 [INFO]: Performance: load_initial_chats completed in 21ms
{
  "source": "database",
  "count": 50,
  "type": "performance",
  "operation": "load_initial_chats",
  "duration": 21
}
2025-06-17 21:23:49 [INFO]: Initial chats loaded from database
{
  "count": 50,
  "component": "baileys"
}
2025-06-17 21:23:49 [INFO]: Performance: get_chats completed in 10ms
{
  "count": 50,
  "type": "performance",
  "operation": "get_chats",
  "duration": 10
}
2025-06-17 21:23:49 [INFO]: Sent chats from database
{
  "count": 50
}
2025-06-17 21:23:49 [INFO]: Performance: websocket_message_processing completed in 15ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 15
}
2025-06-17 21:23:50 [INFO]: Fetching message history
{
  "jid": "353857055000@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:23:50 [INFO]: Performance: get_messages completed in 2ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 2
}
2025-06-17 21:23:50 [INFO]: Performance: get_messages completed in 2ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 2
}
2025-06-17 21:23:50 [INFO]: Performance: get_message_history completed in 51ms
{
  "jid": "353857055000@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 51
}
2025-06-17 21:23:50 [INFO]: Message history sent
{
  "jid": "353857055000@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:23:50 [INFO]: Performance: websocket_message_processing completed in 60ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 60
}
2025-06-17 21:23:51 [INFO]: Fetching message history
{
  "jid": "557199027750@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:23:51 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:23:51 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:23:51 [INFO]: Performance: get_message_history completed in 17ms
{
  "jid": "557199027750@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 17
}
2025-06-17 21:23:51 [INFO]: Message history sent
{
  "jid": "557199027750@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:23:51 [INFO]: Performance: websocket_message_processing completed in 19ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 19
}
2025-06-17 21:23:53 [INFO]: Fetching message history
{
  "jid": "553399888256@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:23:53 [INFO]: Performance: get_messages completed in 2ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 2
}
2025-06-17 21:23:53 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:23:53 [INFO]: Performance: get_message_history completed in 23ms
{
  "jid": "553399888256@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 23
}
2025-06-17 21:23:53 [INFO]: Message history sent
{
  "jid": "553399888256@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:23:53 [INFO]: Performance: websocket_message_processing completed in 26ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 26
}
2025-06-17 21:23:54 [INFO]: Fetching message history
{
  "jid": "353899678402@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:23:54 [INFO]: Performance: get_messages completed in 3ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 3
}
2025-06-17 21:23:54 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:23:54 [INFO]: Performance: get_message_history completed in 17ms
{
  "jid": "353899678402@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 17
}
2025-06-17 21:23:54 [INFO]: Message history sent
{
  "jid": "353899678402@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:23:54 [INFO]: Performance: websocket_message_processing completed in 19ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 19
}
2025-06-17 21:23:55 [INFO]: Fetching message history
{
  "jid": "557199027750@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:23:55 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:23:55 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:23:55 [INFO]: Performance: get_message_history completed in 22ms
{
  "jid": "557199027750@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 22
}
2025-06-17 21:23:55 [INFO]: Message history sent
{
  "jid": "557199027750@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:23:55 [INFO]: Performance: websocket_message_processing completed in 24ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 24
}
2025-06-17 21:23:58 [INFO]: Fetching message history
{
  "jid": "353857055000@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:23:58 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:23:58 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:23:58 [INFO]: Performance: get_message_history completed in 13ms
{
  "jid": "353857055000@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 13
}
2025-06-17 21:23:58 [INFO]: Message history sent
{
  "jid": "353857055000@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:23:58 [INFO]: Performance: websocket_message_processing completed in 16ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 16
}
2025-06-17 21:25:01 [INFO]: Performance: websocket_connection completed in 73317ms
{
  "type": "performance",
  "operation": "websocket_connection",
  "duration": 73317
}
2025-06-17 21:25:01 [ERROR]: Uncaught Exception
Error: write EPIPE
    at afterWriteDispatched (node:internal/stream_base_commons:159:15)
    at writeGeneric (node:internal/stream_base_commons:150:3)
    at Socket._writeGeneric (node:net:971:11)
    at Socket._write (node:net:983:8)
    at writeOrBuffer (node:internal/streams/writable:572:12)
    at _write (node:internal/streams/writable:501:10)
    at Writable.write (node:internal/streams/writable:510:10)
    at Console.log (/home/tobagin/Projects/Karere/backend/node_modules/winston/lib/winston/transports/console.js:87:23)
    at Console._write (/home/tobagin/Projects/Karere/backend/node_modules/winston-transport/modern.js:103:17)
    at doWrite (/home/tobagin/Projects/Karere/backend/node_modules/winston-transport/node_modules/readable-stream/lib/_stream_writable.js:390:139)
{
  "error": "write EPIPE"
}
2025-06-17 21:25:01 [INFO]: Received uncaughtException, starting graceful shutdown
2025-06-17 21:25:01 [INFO]: Stopping cron job: health-check
2025-06-17 21:25:01 [INFO]: Stopping cron job: log-rotation
2025-06-17 21:25:01 [INFO]: Stopping cron job: database-cleanup
2025-06-17 21:25:01 [INFO]: Stopping cron job: memory-report
2025-06-17 21:25:01 [INFO]: Shutting down service: database
2025-06-17 21:25:01 [INFO]: Shutting down service: websocket
2025-06-17 21:25:15 [INFO]: Starting Karere Backend initialization
2025-06-17 21:25:15 [INFO]: Initializing Service Manager
2025-06-17 21:25:15 [INFO]: Cron job scheduled: health-check (*/5 * * * *)
2025-06-17 21:25:15 [INFO]: Cron job scheduled: log-rotation (0 * * * *)
2025-06-17 21:25:15 [INFO]: Cron job scheduled: database-cleanup (0 2 * * *)
2025-06-17 21:25:15 [INFO]: Cron job scheduled: memory-report (0 * * * *)
2025-06-17 21:25:15 [INFO]: System Information
{
  "nodeVersion": "v22.16.0",
  "platform": "linux",
  "arch": "arm64",
  "memory": {
    "rss": 140091392,
    "heapTotal": 47108096,
    "heapUsed": 31905992,
    "external": 3511728,
    "arrayBuffers": 70016
  },
  "uptime": 3.205955649
}
2025-06-17 21:25:15 [INFO]: Karere Backend Starting
{
  "pid": 46222
}
2025-06-17 21:25:15 [INFO]: Service Manager initialized successfully
2025-06-17 21:25:15 [INFO]: Initializing database
{
  "path": "data/karere.db"
}
2025-06-17 21:25:15 [INFO]: Database tables and indexes created successfully
2025-06-17 21:25:15 [INFO]: Performance: database_initialization completed in 81ms
{
  "type": "performance",
  "operation": "database_initialization",
  "duration": 81
}
2025-06-17 21:25:15 [INFO]: Database initialized successfully
2025-06-17 21:25:15 [INFO]: Service registered: database
2025-06-17 21:25:15 [INFO]: Performance: websocket_server_init completed in 15ms
{
  "type": "performance",
  "operation": "websocket_server_init",
  "duration": 15
}
2025-06-17 21:25:15 [INFO]: WebSocket server started on ws://localhost:8765
2025-06-17 21:25:15 [INFO]: Service registered: websocket
2025-06-17 21:25:15 [INFO]: Initializing WhatsApp connection
{
  "component": "baileys"
}
2025-06-17 21:25:17 [INFO]: Using WhatsApp version 2.3000.1023223821
{
  "component": "baileys"
}
2025-06-17 21:25:17 [INFO]: Performance: whatsapp_connection completed in 1166ms
{
  "type": "performance",
  "operation": "whatsapp_connection",
  "duration": 1166
}
2025-06-17 21:25:17 [INFO]: WhatsApp socket initialized successfully
{
  "component": "baileys"
}
2025-06-17 21:25:17 [INFO]: Karere Backend initialized successfully
2025-06-17 21:25:17 [INFO]: Connecting to WhatsApp...
{
  "component": "baileys"
}
2025-06-17 21:25:17 [WARN]: Cannot send to frontend: no active connection
{
  "type": "connection_status"
}
2025-06-17 21:25:17 [INFO]: WhatsApp connection is open
{
  "component": "baileys"
}
2025-06-17 21:25:17 [WARN]: Cannot send to frontend: no active connection
{
  "type": "baileys_ready"
}
2025-06-17 21:25:17 [WARN]: Cannot send to frontend: no active connection
{
  "type": "connection_status"
}
2025-06-17 21:25:17 [INFO]: Loading initial chats
{
  "component": "baileys"
}
2025-06-17 21:25:17 [INFO]: Performance: get_chats completed in 15ms
{
  "count": 50,
  "type": "performance",
  "operation": "get_chats",
  "duration": 15
}
2025-06-17 21:25:17 [INFO]: Performance: load_initial_chats completed in 19ms
{
  "source": "database",
  "count": 50,
  "type": "performance",
  "operation": "load_initial_chats",
  "duration": 19
}
2025-06-17 21:25:17 [INFO]: Initial chats loaded from database
{
  "count": 50,
  "component": "baileys"
}
2025-06-17 21:25:19 [INFO]: Client requested chats. Sending cached list.
2025-06-17 21:25:19 [INFO]: Performance: websocket_message_processing completed in 5ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 5
}
2025-06-17 21:26:35 [INFO]: Received SIGTERM, starting graceful shutdown
2025-06-17 21:26:35 [INFO]: Stopping cron job: health-check
2025-06-17 21:26:35 [INFO]: Stopping cron job: log-rotation
2025-06-17 21:26:35 [INFO]: Stopping cron job: database-cleanup
2025-06-17 21:26:35 [INFO]: Stopping cron job: memory-report
2025-06-17 21:26:35 [INFO]: Shutting down service: database
2025-06-17 21:26:35 [INFO]: Shutting down service: websocket
2025-06-17 21:33:57 [INFO]: Starting Karere Backend initialization
2025-06-17 21:33:57 [INFO]: Initializing Service Manager
2025-06-17 21:33:57 [INFO]: Cron job scheduled: health-check (*/5 * * * *)
2025-06-17 21:33:57 [INFO]: Cron job scheduled: log-rotation (0 * * * *)
2025-06-17 21:33:57 [INFO]: Cron job scheduled: database-cleanup (0 2 * * *)
2025-06-17 21:33:57 [INFO]: Cron job scheduled: memory-report (0 * * * *)
2025-06-17 21:33:57 [INFO]: System Information
{
  "nodeVersion": "v22.16.0",
  "platform": "linux",
  "arch": "arm64",
  "memory": {
    "rss": 132386816,
    "heapTotal": 47108096,
    "heapUsed": 32169640,
    "external": 3511728,
    "arrayBuffers": 70016
  },
  "uptime": 5.96404357
}
2025-06-17 21:33:57 [INFO]: Karere Backend Starting
{
  "pid": 46941
}
2025-06-17 21:33:57 [INFO]: Service Manager initialized successfully
2025-06-17 21:33:57 [INFO]: Initializing database
{
  "path": "data/karere.db"
}
2025-06-17 21:33:57 [INFO]: Database tables and indexes created successfully
2025-06-17 21:33:57 [INFO]: Performance: database_initialization completed in 108ms
{
  "type": "performance",
  "operation": "database_initialization",
  "duration": 108
}
2025-06-17 21:33:57 [INFO]: Database initialized successfully
2025-06-17 21:33:57 [INFO]: Service registered: database
2025-06-17 21:33:57 [INFO]: Performance: websocket_server_init completed in 23ms
{
  "type": "performance",
  "operation": "websocket_server_init",
  "duration": 23
}
2025-06-17 21:33:57 [INFO]: WebSocket server started on ws://localhost:8765
2025-06-17 21:33:57 [INFO]: Service registered: websocket
2025-06-17 21:33:57 [INFO]: Initializing WhatsApp connection
{
  "component": "baileys"
}
2025-06-17 21:33:57 [INFO]: Using WhatsApp version 2.3000.1023223821
{
  "component": "baileys"
}
2025-06-17 21:33:57 [INFO]: Performance: whatsapp_connection completed in 413ms
{
  "type": "performance",
  "operation": "whatsapp_connection",
  "duration": 413
}
2025-06-17 21:33:57 [INFO]: WhatsApp socket initialized successfully
{
  "component": "baileys"
}
2025-06-17 21:33:57 [INFO]: Karere Backend initialized successfully
2025-06-17 21:33:57 [INFO]: Connecting to WhatsApp...
{
  "component": "baileys"
}
2025-06-17 21:33:57 [WARN]: Cannot send to frontend: no active connection
{
  "type": "connection_status"
}
2025-06-17 21:33:58 [INFO]: WhatsApp connection is open
{
  "component": "baileys"
}
2025-06-17 21:33:58 [INFO]: Loading initial chats
{
  "component": "baileys"
}
2025-06-17 21:33:58 [INFO]: Performance: get_chats completed in 10ms
{
  "count": 50,
  "type": "performance",
  "operation": "get_chats",
  "duration": 10
}
2025-06-17 21:33:58 [INFO]: Performance: load_initial_chats completed in 13ms
{
  "source": "database",
  "count": 50,
  "type": "performance",
  "operation": "load_initial_chats",
  "duration": 13
}
2025-06-17 21:33:58 [INFO]: Initial chats loaded from database
{
  "count": 50,
  "component": "baileys"
}
2025-06-17 21:33:58 [INFO]: Performance: get_chats completed in 8ms
{
  "count": 50,
  "type": "performance",
  "operation": "get_chats",
  "duration": 8
}
2025-06-17 21:33:58 [INFO]: Sent chats from database
{
  "count": 50
}
2025-06-17 21:33:58 [INFO]: Performance: websocket_message_processing completed in 13ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 13
}
2025-06-17 21:34:32 [INFO]: Performance: websocket_connection completed in 34662ms
{
  "type": "performance",
  "operation": "websocket_connection",
  "duration": 34662
}
2025-06-17 21:34:43 [INFO]: Client requested chats. Sending cached list.
2025-06-17 21:34:48 [INFO]: Starting Karere Backend initialization
2025-06-17 21:34:48 [INFO]: Initializing Service Manager
2025-06-17 21:34:48 [INFO]: Cron job scheduled: health-check (*/5 * * * *)
2025-06-17 21:34:48 [INFO]: Cron job scheduled: log-rotation (0 * * * *)
2025-06-17 21:34:48 [INFO]: Cron job scheduled: database-cleanup (0 2 * * *)
2025-06-17 21:34:48 [INFO]: Cron job scheduled: memory-report (0 * * * *)
2025-06-17 21:34:48 [INFO]: System Information
{
  "nodeVersion": "v22.16.0",
  "platform": "linux",
  "arch": "arm64",
  "memory": {
    "rss": 137510912,
    "heapTotal": 47632384,
    "heapUsed": 31328944,
    "external": 3511728,
    "arrayBuffers": 70016
  },
  "uptime": 6.833243404
}
2025-06-17 21:34:48 [INFO]: Karere Backend Starting
{
  "pid": 47087
}
2025-06-17 21:34:48 [INFO]: Service Manager initialized successfully
2025-06-17 21:34:48 [INFO]: Initializing database
{
  "path": "data/karere.db"
}
2025-06-17 21:34:48 [INFO]: Database tables and indexes created successfully
2025-06-17 21:34:48 [INFO]: Performance: database_initialization completed in 88ms
{
  "type": "performance",
  "operation": "database_initialization",
  "duration": 88
}
2025-06-17 21:34:48 [INFO]: Database initialized successfully
2025-06-17 21:34:48 [INFO]: Service registered: database
2025-06-17 21:34:48 [INFO]: Performance: websocket_server_init completed in 35ms
{
  "type": "performance",
  "operation": "websocket_server_init",
  "duration": 35
}
2025-06-17 21:34:48 [INFO]: WebSocket server started on ws://localhost:8765
2025-06-17 21:34:48 [INFO]: Service registered: websocket
2025-06-17 21:34:48 [INFO]: Initializing WhatsApp connection
{
  "component": "baileys"
}
2025-06-17 21:34:49 [INFO]: Using WhatsApp version 2.3000.1023223821
{
  "component": "baileys"
}
2025-06-17 21:34:49 [INFO]: Performance: whatsapp_connection completed in 650ms
{
  "type": "performance",
  "operation": "whatsapp_connection",
  "duration": 650
}
2025-06-17 21:34:49 [INFO]: WhatsApp socket initialized successfully
{
  "component": "baileys"
}
2025-06-17 21:34:49 [INFO]: Karere Backend initialized successfully
2025-06-17 21:34:49 [INFO]: Connecting to WhatsApp...
{
  "component": "baileys"
}
2025-06-17 21:34:49 [WARN]: Cannot send to frontend: no active connection
{
  "type": "connection_status"
}
2025-06-17 21:34:50 [INFO]: WhatsApp connection is open
{
  "component": "baileys"
}
2025-06-17 21:34:50 [WARN]: Cannot send to frontend: no active connection
{
  "type": "baileys_ready"
}
2025-06-17 21:34:50 [WARN]: Cannot send to frontend: no active connection
{
  "type": "connection_status"
}
2025-06-17 21:34:50 [INFO]: Loading initial chats
{
  "component": "baileys"
}
2025-06-17 21:34:50 [INFO]: Performance: get_chats completed in 13ms
{
  "count": 50,
  "type": "performance",
  "operation": "get_chats",
  "duration": 13
}
2025-06-17 21:34:50 [INFO]: Performance: load_initial_chats completed in 19ms
{
  "source": "database",
  "count": 50,
  "type": "performance",
  "operation": "load_initial_chats",
  "duration": 19
}
2025-06-17 21:34:50 [INFO]: Initial chats loaded from database
{
  "count": 50,
  "component": "baileys"
}
2025-06-17 21:34:56 [INFO]: Client requested chats. Sending cached list.
2025-06-17 21:34:56 [INFO]: Performance: websocket_message_processing completed in 5ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 5
}
2025-06-17 21:34:57 [INFO]: Fetching message history
{
  "jid": "557199027750@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:34:57 [INFO]: Performance: get_messages completed in 13ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 13
}
2025-06-17 21:34:57 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:34:57 [INFO]: Performance: get_message_history completed in 60ms
{
  "jid": "557199027750@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 60
}
2025-06-17 21:34:57 [INFO]: Message history sent
{
  "jid": "557199027750@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:34:57 [INFO]: Performance: websocket_message_processing completed in 64ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 64
}
2025-06-17 21:35:00 [INFO]: Fetching message history
{
  "jid": "353857055000@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:35:00 [INFO]: Performance: get_messages completed in 2ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 2
}
2025-06-17 21:35:00 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:35:00 [INFO]: Performance: get_message_history completed in 24ms
{
  "jid": "353857055000@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 24
}
2025-06-17 21:35:00 [INFO]: Message history sent
{
  "jid": "353857055000@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:35:00 [INFO]: Performance: websocket_message_processing completed in 27ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 27
}
2025-06-17 21:35:03 [INFO]: Fetching message history
{
  "jid": "553399888256@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:35:03 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:35:03 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:35:03 [INFO]: Performance: get_message_history completed in 18ms
{
  "jid": "553399888256@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 18
}
2025-06-17 21:35:03 [INFO]: Message history sent
{
  "jid": "553399888256@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:35:03 [INFO]: Performance: websocket_message_processing completed in 20ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 20
}
2025-06-17 21:36:55 [INFO]: Performance: websocket_connection completed in 119670ms
{
  "type": "performance",
  "operation": "websocket_connection",
  "duration": 119670
}
2025-06-17 21:36:55 [ERROR]: Uncaught Exception
Error: write EPIPE
    at afterWriteDispatched (node:internal/stream_base_commons:159:15)
    at writeGeneric (node:internal/stream_base_commons:150:3)
    at Socket._writeGeneric (node:net:971:11)
    at Socket._write (node:net:983:8)
    at writeOrBuffer (node:internal/streams/writable:572:12)
    at _write (node:internal/streams/writable:501:10)
    at Writable.write (node:internal/streams/writable:510:10)
    at Console.log (/home/tobagin/Projects/Karere/backend/node_modules/winston/lib/winston/transports/console.js:87:23)
    at Console._write (/home/tobagin/Projects/Karere/backend/node_modules/winston-transport/modern.js:103:17)
    at doWrite (/home/tobagin/Projects/Karere/backend/node_modules/winston-transport/node_modules/readable-stream/lib/_stream_writable.js:390:139)
{
  "error": "write EPIPE"
}
2025-06-17 21:36:55 [INFO]: Received uncaughtException, starting graceful shutdown
2025-06-17 21:36:55 [INFO]: Stopping cron job: health-check
2025-06-17 21:36:55 [INFO]: Stopping cron job: log-rotation
2025-06-17 21:36:55 [INFO]: Stopping cron job: database-cleanup
2025-06-17 21:36:55 [INFO]: Stopping cron job: memory-report
2025-06-17 21:36:55 [INFO]: Shutting down service: database
2025-06-17 21:36:55 [INFO]: Shutting down service: websocket
2025-06-17 21:37:09 [INFO]: Starting Karere Backend initialization
2025-06-17 21:37:09 [INFO]: Initializing Service Manager
2025-06-17 21:37:09 [INFO]: Cron job scheduled: health-check (*/5 * * * *)
2025-06-17 21:37:09 [INFO]: Cron job scheduled: log-rotation (0 * * * *)
2025-06-17 21:37:09 [INFO]: Cron job scheduled: database-cleanup (0 2 * * *)
2025-06-17 21:37:09 [INFO]: Cron job scheduled: memory-report (0 * * * *)
2025-06-17 21:37:09 [INFO]: System Information
{
  "nodeVersion": "v22.16.0",
  "platform": "linux",
  "arch": "arm64",
  "memory": {
    "rss": 131842048,
    "heapTotal": 47370240,
    "heapUsed": 31816152,
    "external": 3511728,
    "arrayBuffers": 70016
  },
  "uptime": 4.197270025
}
2025-06-17 21:37:09 [INFO]: Karere Backend Starting
{
  "pid": 47413
}
2025-06-17 21:37:09 [INFO]: Service Manager initialized successfully
2025-06-17 21:37:09 [INFO]: Initializing database
{
  "path": "data/karere.db"
}
2025-06-17 21:37:09 [INFO]: Database tables and indexes created successfully
2025-06-17 21:37:09 [INFO]: Performance: database_initialization completed in 264ms
{
  "type": "performance",
  "operation": "database_initialization",
  "duration": 264
}
2025-06-17 21:37:09 [INFO]: Database initialized successfully
2025-06-17 21:37:09 [INFO]: Service registered: database
2025-06-17 21:37:09 [INFO]: Performance: websocket_server_init completed in 38ms
{
  "type": "performance",
  "operation": "websocket_server_init",
  "duration": 38
}
2025-06-17 21:37:09 [INFO]: WebSocket server started on ws://localhost:8765
2025-06-17 21:37:09 [INFO]: Service registered: websocket
2025-06-17 21:37:09 [INFO]: Initializing WhatsApp connection
{
  "component": "baileys"
}
2025-06-17 21:37:10 [INFO]: Using WhatsApp version 2.3000.1023223821
{
  "component": "baileys"
}
2025-06-17 21:37:10 [INFO]: Performance: whatsapp_connection completed in 470ms
{
  "type": "performance",
  "operation": "whatsapp_connection",
  "duration": 470
}
2025-06-17 21:37:10 [INFO]: WhatsApp socket initialized successfully
{
  "component": "baileys"
}
2025-06-17 21:37:10 [INFO]: Karere Backend initialized successfully
2025-06-17 21:37:10 [INFO]: Connecting to WhatsApp...
{
  "component": "baileys"
}
2025-06-17 21:37:10 [WARN]: Cannot send to frontend: no active connection
{
  "type": "connection_status"
}
2025-06-17 21:37:10 [INFO]: WhatsApp connection is open
{
  "component": "baileys"
}
2025-06-17 21:37:10 [WARN]: Cannot send to frontend: no active connection
{
  "type": "baileys_ready"
}
2025-06-17 21:37:10 [WARN]: Cannot send to frontend: no active connection
{
  "type": "connection_status"
}
2025-06-17 21:37:10 [INFO]: Loading initial chats
{
  "component": "baileys"
}
2025-06-17 21:37:10 [INFO]: Performance: get_chats completed in 12ms
{
  "count": 50,
  "type": "performance",
  "operation": "get_chats",
  "duration": 12
}
2025-06-17 21:37:10 [INFO]: Performance: load_initial_chats completed in 19ms
{
  "source": "database",
  "count": 50,
  "type": "performance",
  "operation": "load_initial_chats",
  "duration": 19
}
2025-06-17 21:37:10 [INFO]: Initial chats loaded from database
{
  "count": 50,
  "component": "baileys"
}
2025-06-17 21:37:12 [INFO]: Client requested chats. Sending cached list.
2025-06-17 21:37:12 [INFO]: Performance: websocket_message_processing completed in 5ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 5
}
2025-06-17 21:37:17 [INFO]: Fetching message history
{
  "jid": "353857055000@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:37:17 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:37:18 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:37:18 [INFO]: Performance: get_message_history completed in 44ms
{
  "jid": "353857055000@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 44
}
2025-06-17 21:37:18 [INFO]: Message history sent
{
  "jid": "353857055000@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:37:18 [INFO]: Performance: websocket_message_processing completed in 48ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 48
}
2025-06-17 21:37:19 [INFO]: Fetching message history
{
  "jid": "557199027750@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:37:19 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:37:19 [INFO]: Performance: get_messages completed in 0ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 0
}
2025-06-17 21:37:19 [INFO]: Performance: get_message_history completed in 16ms
{
  "jid": "557199027750@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 16
}
2025-06-17 21:37:19 [INFO]: Message history sent
{
  "jid": "557199027750@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:37:19 [INFO]: Performance: websocket_message_processing completed in 18ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 18
}
2025-06-17 21:37:21 [INFO]: Fetching message history
{
  "jid": "553399888256@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:37:21 [INFO]: Performance: get_messages completed in 2ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 2
}
2025-06-17 21:37:21 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:37:21 [INFO]: Performance: get_message_history completed in 36ms
{
  "jid": "553399888256@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 36
}
2025-06-17 21:37:21 [INFO]: Message history sent
{
  "jid": "553399888256@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:37:21 [INFO]: Performance: websocket_message_processing completed in 38ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 38
}
2025-06-17 21:38:04 [INFO]: Performance: websocket_connection completed in 52462ms
{
  "type": "performance",
  "operation": "websocket_connection",
  "duration": 52462
}
2025-06-17 21:38:51 [INFO]: Starting Karere Backend initialization
2025-06-17 21:38:51 [INFO]: Initializing Service Manager
2025-06-17 21:38:51 [INFO]: Cron job scheduled: health-check (*/5 * * * *)
2025-06-17 21:38:51 [INFO]: Cron job scheduled: log-rotation (0 * * * *)
2025-06-17 21:38:51 [INFO]: Cron job scheduled: database-cleanup (0 2 * * *)
2025-06-17 21:38:51 [INFO]: Cron job scheduled: memory-report (0 * * * *)
2025-06-17 21:38:51 [INFO]: System Information
{
  "nodeVersion": "v22.16.0",
  "platform": "linux",
  "arch": "arm64",
  "memory": {
    "rss": 134979584,
    "heapTotal": 47370240,
    "heapUsed": 32349248,
    "external": 3511728,
    "arrayBuffers": 70016
  },
  "uptime": 2.292815867
}
2025-06-17 21:38:51 [INFO]: Karere Backend Starting
{
  "pid": 47917
}
2025-06-17 21:38:51 [INFO]: Service Manager initialized successfully
2025-06-17 21:38:51 [INFO]: Initializing database
{
  "path": "data/karere.db"
}
2025-06-17 21:38:51 [INFO]: Database tables and indexes created successfully
2025-06-17 21:38:51 [INFO]: Performance: database_initialization completed in 60ms
{
  "type": "performance",
  "operation": "database_initialization",
  "duration": 60
}
2025-06-17 21:38:51 [INFO]: Database initialized successfully
2025-06-17 21:38:51 [INFO]: Service registered: database
2025-06-17 21:38:51 [INFO]: Performance: websocket_server_init completed in 23ms
{
  "type": "performance",
  "operation": "websocket_server_init",
  "duration": 23
}
2025-06-17 21:38:51 [INFO]: WebSocket server started on ws://localhost:8765
2025-06-17 21:38:51 [INFO]: Service registered: websocket
2025-06-17 21:38:51 [INFO]: Initializing WhatsApp connection
{
  "component": "baileys"
}
2025-06-17 21:38:52 [INFO]: Using WhatsApp version 2.3000.1023223821
{
  "component": "baileys"
}
2025-06-17 21:38:52 [INFO]: Performance: whatsapp_connection completed in 559ms
{
  "type": "performance",
  "operation": "whatsapp_connection",
  "duration": 559
}
2025-06-17 21:38:52 [INFO]: WhatsApp socket initialized successfully
{
  "component": "baileys"
}
2025-06-17 21:38:52 [INFO]: Karere Backend initialized successfully
2025-06-17 21:38:52 [INFO]: Connecting to WhatsApp...
{
  "component": "baileys"
}
2025-06-17 21:38:52 [WARN]: Cannot send to frontend: no active connection
{
  "type": "connection_status"
}
2025-06-17 21:38:53 [INFO]: WhatsApp connection is open
{
  "component": "baileys"
}
2025-06-17 21:38:53 [WARN]: Cannot send to frontend: no active connection
{
  "type": "baileys_ready"
}
2025-06-17 21:38:53 [WARN]: Cannot send to frontend: no active connection
{
  "type": "connection_status"
}
2025-06-17 21:38:53 [INFO]: Loading initial chats
{
  "component": "baileys"
}
2025-06-17 21:38:53 [INFO]: Performance: get_chats completed in 6ms
{
  "count": 50,
  "type": "performance",
  "operation": "get_chats",
  "duration": 6
}
2025-06-17 21:38:53 [INFO]: Performance: load_initial_chats completed in 11ms
{
  "source": "database",
  "count": 50,
  "type": "performance",
  "operation": "load_initial_chats",
  "duration": 11
}
2025-06-17 21:38:53 [INFO]: Initial chats loaded from database
{
  "count": 50,
  "component": "baileys"
}
2025-06-17 21:38:56 [INFO]: Client requested chats. Sending cached list.
2025-06-17 21:38:56 [INFO]: Performance: websocket_message_processing completed in 9ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 9
}
2025-06-17 21:38:58 [INFO]: Fetching message history
{
  "jid": "353857055000@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:38:58 [INFO]: Performance: get_messages completed in 3ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 3
}
2025-06-17 21:38:58 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:38:58 [INFO]: Performance: get_message_history completed in 44ms
{
  "jid": "353857055000@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 44
}
2025-06-17 21:38:58 [INFO]: Message history sent
{
  "jid": "353857055000@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:38:58 [INFO]: Performance: websocket_message_processing completed in 49ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 49
}
2025-06-17 21:39:00 [INFO]: Fetching message history
{
  "jid": "557199027750@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:39:00 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:39:00 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:39:00 [INFO]: Performance: get_message_history completed in 18ms
{
  "jid": "557199027750@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 18
}
2025-06-17 21:39:00 [INFO]: Message history sent
{
  "jid": "557199027750@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:39:00 [INFO]: Performance: websocket_message_processing completed in 21ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 21
}
2025-06-17 21:39:01 [INFO]: Fetching message history
{
  "jid": "353857055000@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:39:01 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:39:01 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:39:01 [INFO]: Performance: get_message_history completed in 27ms
{
  "jid": "353857055000@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 27
}
2025-06-17 21:39:01 [INFO]: Message history sent
{
  "jid": "353857055000@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:39:01 [INFO]: Performance: websocket_message_processing completed in 31ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 31
}
2025-06-17 21:39:03 [INFO]: Fetching message history
{
  "jid": "557199027750@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:39:03 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:39:03 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:39:03 [INFO]: Performance: get_message_history completed in 13ms
{
  "jid": "557199027750@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 13
}
2025-06-17 21:39:03 [INFO]: Message history sent
{
  "jid": "557199027750@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:39:03 [INFO]: Performance: websocket_message_processing completed in 16ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 16
}
2025-06-17 21:40:04 [INFO]: Performance: websocket_connection completed in 68506ms
{
  "type": "performance",
  "operation": "websocket_connection",
  "duration": 68506
}
2025-06-17 21:40:04 [ERROR]: Uncaught Exception
Error: write EPIPE
    at afterWriteDispatched (node:internal/stream_base_commons:159:15)
    at writeGeneric (node:internal/stream_base_commons:150:3)
    at Socket._writeGeneric (node:net:971:11)
    at Socket._write (node:net:983:8)
    at writeOrBuffer (node:internal/streams/writable:572:12)
    at _write (node:internal/streams/writable:501:10)
    at Writable.write (node:internal/streams/writable:510:10)
    at Console.log (/home/tobagin/Projects/Karere/backend/node_modules/winston/lib/winston/transports/console.js:87:23)
    at Console._write (/home/tobagin/Projects/Karere/backend/node_modules/winston-transport/modern.js:103:17)
    at doWrite (/home/tobagin/Projects/Karere/backend/node_modules/winston-transport/node_modules/readable-stream/lib/_stream_writable.js:390:139)
{
  "error": "write EPIPE"
}
2025-06-17 21:40:04 [INFO]: Received uncaughtException, starting graceful shutdown
2025-06-17 21:40:04 [INFO]: Stopping cron job: health-check
2025-06-17 21:40:04 [INFO]: Stopping cron job: log-rotation
2025-06-17 21:40:04 [INFO]: Stopping cron job: database-cleanup
2025-06-17 21:40:04 [INFO]: Stopping cron job: memory-report
2025-06-17 21:40:04 [INFO]: Shutting down service: database
2025-06-17 21:40:04 [INFO]: Shutting down service: websocket
2025-06-17 21:40:16 [INFO]: Starting Karere Backend initialization
2025-06-17 21:40:16 [INFO]: Initializing Service Manager
2025-06-17 21:40:16 [INFO]: Cron job scheduled: health-check (*/5 * * * *)
2025-06-17 21:40:16 [INFO]: Cron job scheduled: log-rotation (0 * * * *)
2025-06-17 21:40:16 [INFO]: Cron job scheduled: database-cleanup (0 2 * * *)
2025-06-17 21:40:17 [INFO]: Cron job scheduled: memory-report (0 * * * *)
2025-06-17 21:40:17 [INFO]: System Information
{
  "nodeVersion": "v22.16.0",
  "platform": "linux",
  "arch": "arm64",
  "memory": {
    "rss": 132771840,
    "heapTotal": 47894528,
    "heapUsed": 31451552,
    "external": 3511728,
    "arrayBuffers": 70016
  },
  "uptime": 3.383342208
}
2025-06-17 21:40:17 [INFO]: Karere Backend Starting
{
  "pid": 48157
}
2025-06-17 21:40:17 [INFO]: Service Manager initialized successfully
2025-06-17 21:40:17 [INFO]: Initializing database
{
  "path": "data/karere.db"
}
2025-06-17 21:40:17 [INFO]: Database tables and indexes created successfully
2025-06-17 21:40:17 [INFO]: Performance: database_initialization completed in 274ms
{
  "type": "performance",
  "operation": "database_initialization",
  "duration": 274
}
2025-06-17 21:40:17 [INFO]: Database initialized successfully
2025-06-17 21:40:17 [INFO]: Service registered: database
2025-06-17 21:40:17 [INFO]: Performance: websocket_server_init completed in 13ms
{
  "type": "performance",
  "operation": "websocket_server_init",
  "duration": 13
}
2025-06-17 21:40:17 [INFO]: WebSocket server started on ws://localhost:8765
2025-06-17 21:40:17 [INFO]: Service registered: websocket
2025-06-17 21:40:17 [INFO]: Initializing WhatsApp connection
{
  "component": "baileys"
}
2025-06-17 21:40:18 [INFO]: Using WhatsApp version 2.3000.1023223821
{
  "component": "baileys"
}
2025-06-17 21:40:18 [INFO]: Performance: whatsapp_connection completed in 1049ms
{
  "type": "performance",
  "operation": "whatsapp_connection",
  "duration": 1049
}
2025-06-17 21:40:18 [INFO]: WhatsApp socket initialized successfully
{
  "component": "baileys"
}
2025-06-17 21:40:18 [INFO]: Karere Backend initialized successfully
2025-06-17 21:40:18 [INFO]: Connecting to WhatsApp...
{
  "component": "baileys"
}
2025-06-17 21:40:18 [WARN]: Cannot send to frontend: no active connection
{
  "type": "connection_status"
}
2025-06-17 21:40:19 [INFO]: WhatsApp connection is open
{
  "component": "baileys"
}
2025-06-17 21:40:19 [WARN]: Cannot send to frontend: no active connection
{
  "type": "baileys_ready"
}
2025-06-17 21:40:19 [WARN]: Cannot send to frontend: no active connection
{
  "type": "connection_status"
}
2025-06-17 21:40:19 [INFO]: Loading initial chats
{
  "component": "baileys"
}
2025-06-17 21:40:19 [INFO]: Performance: get_chats completed in 7ms
{
  "count": 50,
  "type": "performance",
  "operation": "get_chats",
  "duration": 7
}
2025-06-17 21:40:19 [INFO]: Performance: load_initial_chats completed in 13ms
{
  "source": "database",
  "count": 50,
  "type": "performance",
  "operation": "load_initial_chats",
  "duration": 13
}
2025-06-17 21:40:19 [INFO]: Initial chats loaded from database
{
  "count": 50,
  "component": "baileys"
}
2025-06-17 21:40:20 [INFO]: Client requested chats. Sending cached list.
2025-06-17 21:40:20 [INFO]: Performance: websocket_message_processing completed in 11ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 11
}
2025-06-17 21:40:22 [INFO]: Fetching message history
{
  "jid": "353857055000@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:40:22 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:40:22 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:40:22 [INFO]: Performance: get_message_history completed in 48ms
{
  "jid": "353857055000@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 48
}
2025-06-17 21:40:22 [INFO]: Message history sent
{
  "jid": "353857055000@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:40:22 [INFO]: Performance: websocket_message_processing completed in 52ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 52
}
2025-06-17 21:40:23 [INFO]: Fetching message history
{
  "jid": "557199027750@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:40:23 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:40:23 [INFO]: Performance: get_messages completed in 5ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 5
}
2025-06-17 21:40:23 [INFO]: Performance: get_message_history completed in 23ms
{
  "jid": "557199027750@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 23
}
2025-06-17 21:40:23 [INFO]: Message history sent
{
  "jid": "557199027750@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:40:23 [INFO]: Performance: websocket_message_processing completed in 28ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 28
}
2025-06-17 21:40:25 [INFO]: Fetching message history
{
  "jid": "553399888256@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:40:25 [INFO]: Performance: get_messages completed in 2ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 2
}
2025-06-17 21:40:25 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:40:25 [INFO]: Performance: get_message_history completed in 18ms
{
  "jid": "553399888256@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 18
}
2025-06-17 21:40:25 [INFO]: Message history sent
{
  "jid": "553399888256@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:40:25 [INFO]: Performance: websocket_message_processing completed in 22ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 22
}
2025-06-17 21:41:39 [INFO]: Performance: websocket_connection completed in 78532ms
{
  "type": "performance",
  "operation": "websocket_connection",
  "duration": 78532
}
2025-06-17 21:41:51 [INFO]: Starting Karere Backend initialization
2025-06-17 21:41:51 [INFO]: Initializing Service Manager
2025-06-17 21:41:51 [INFO]: Cron job scheduled: health-check (*/5 * * * *)
2025-06-17 21:41:51 [INFO]: Cron job scheduled: log-rotation (0 * * * *)
2025-06-17 21:41:51 [INFO]: Cron job scheduled: database-cleanup (0 2 * * *)
2025-06-17 21:41:51 [INFO]: Cron job scheduled: memory-report (0 * * * *)
2025-06-17 21:41:51 [INFO]: System Information
{
  "nodeVersion": "v22.16.0",
  "platform": "linux",
  "arch": "arm64",
  "memory": {
    "rss": 137740288,
    "heapTotal": 47370240,
    "heapUsed": 31346992,
    "external": 3511728,
    "arrayBuffers": 70016
  },
  "uptime": 3.014620521
}
2025-06-17 21:41:51 [INFO]: Karere Backend Starting
{
  "pid": 48369
}
2025-06-17 21:41:51 [INFO]: Service Manager initialized successfully
2025-06-17 21:41:51 [INFO]: Initializing database
{
  "path": "data/karere.db"
}
2025-06-17 21:41:51 [INFO]: Database tables and indexes created successfully
2025-06-17 21:41:51 [INFO]: Performance: database_initialization completed in 197ms
{
  "type": "performance",
  "operation": "database_initialization",
  "duration": 197
}
2025-06-17 21:41:51 [INFO]: Database initialized successfully
2025-06-17 21:41:51 [INFO]: Service registered: database
2025-06-17 21:41:51 [INFO]: Performance: websocket_server_init completed in 45ms
{
  "type": "performance",
  "operation": "websocket_server_init",
  "duration": 45
}
2025-06-17 21:41:51 [INFO]: WebSocket server started on ws://localhost:8765
2025-06-17 21:41:51 [INFO]: Service registered: websocket
2025-06-17 21:41:51 [INFO]: Initializing WhatsApp connection
{
  "component": "baileys"
}
2025-06-17 21:41:52 [INFO]: Using WhatsApp version 2.3000.1023223821
{
  "component": "baileys"
}
2025-06-17 21:41:52 [INFO]: Performance: whatsapp_connection completed in 937ms
{
  "type": "performance",
  "operation": "whatsapp_connection",
  "duration": 937
}
2025-06-17 21:41:52 [INFO]: WhatsApp socket initialized successfully
{
  "component": "baileys"
}
2025-06-17 21:41:52 [INFO]: Karere Backend initialized successfully
2025-06-17 21:41:52 [INFO]: Connecting to WhatsApp...
{
  "component": "baileys"
}
2025-06-17 21:41:52 [WARN]: Cannot send to frontend: no active connection
{
  "type": "connection_status"
}
2025-06-17 21:41:53 [INFO]: WhatsApp connection is open
{
  "component": "baileys"
}
2025-06-17 21:41:53 [WARN]: Cannot send to frontend: no active connection
{
  "type": "baileys_ready"
}
2025-06-17 21:41:53 [WARN]: Cannot send to frontend: no active connection
{
  "type": "connection_status"
}
2025-06-17 21:41:53 [INFO]: Loading initial chats
{
  "component": "baileys"
}
2025-06-17 21:41:53 [INFO]: Performance: get_chats completed in 9ms
{
  "count": 50,
  "type": "performance",
  "operation": "get_chats",
  "duration": 9
}
2025-06-17 21:41:53 [INFO]: Performance: load_initial_chats completed in 13ms
{
  "source": "database",
  "count": 50,
  "type": "performance",
  "operation": "load_initial_chats",
  "duration": 13
}
2025-06-17 21:41:53 [INFO]: Initial chats loaded from database
{
  "count": 50,
  "component": "baileys"
}
2025-06-17 21:41:55 [INFO]: Client requested chats. Sending cached list.
2025-06-17 21:41:55 [INFO]: Performance: websocket_message_processing completed in 5ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 5
}
2025-06-17 21:41:57 [INFO]: Fetching message history
{
  "jid": "557199027750@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:41:57 [INFO]: Performance: get_messages completed in 10ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 10
}
2025-06-17 21:41:57 [INFO]: Performance: get_messages completed in 4ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 4
}
2025-06-17 21:41:57 [INFO]: Performance: get_message_history completed in 160ms
{
  "jid": "557199027750@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 160
}
2025-06-17 21:41:57 [INFO]: Message history sent
{
  "jid": "557199027750@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:41:57 [INFO]: Performance: websocket_message_processing completed in 181ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 181
}
2025-06-17 21:41:58 [INFO]: Fetching message history
{
  "jid": "353857055000@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:41:58 [INFO]: Performance: get_messages completed in 2ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 2
}
2025-06-17 21:41:58 [INFO]: Performance: get_messages completed in 0ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 0
}
2025-06-17 21:41:58 [INFO]: Performance: get_message_history completed in 34ms
{
  "jid": "353857055000@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 34
}
2025-06-17 21:41:58 [INFO]: Message history sent
{
  "jid": "353857055000@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:41:58 [INFO]: Performance: websocket_message_processing completed in 38ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 38
}
2025-06-17 21:42:29 [INFO]: Fetching message history
{
  "jid": "557199027750@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:42:29 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:42:29 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:42:30 [INFO]: Performance: get_message_history completed in 66ms
{
  "jid": "557199027750@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 66
}
2025-06-17 21:42:30 [INFO]: Message history sent
{
  "jid": "557199027750@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:42:30 [INFO]: Performance: websocket_message_processing completed in 85ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 85
}
2025-06-17 21:42:30 [INFO]: Fetching message history
{
  "jid": "553399888256@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:42:30 [INFO]: Performance: get_messages completed in 4ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 4
}
2025-06-17 21:42:30 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 21:42:30 [INFO]: Performance: get_message_history completed in 24ms
{
  "jid": "553399888256@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 24
}
2025-06-17 21:42:30 [INFO]: Message history sent
{
  "jid": "553399888256@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:42:30 [INFO]: Performance: websocket_message_processing completed in 27ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 27
}
2025-06-17 21:43:11 [INFO]: Performance: websocket_connection completed in 76118ms
{
  "type": "performance",
  "operation": "websocket_connection",
  "duration": 76118
}
2025-06-17 21:43:24 [INFO]: Starting Karere Backend initialization
2025-06-17 21:43:24 [INFO]: Initializing Service Manager
2025-06-17 21:43:24 [INFO]: Cron job scheduled: health-check (*/5 * * * *)
2025-06-17 21:43:24 [INFO]: Cron job scheduled: log-rotation (0 * * * *)
2025-06-17 21:43:24 [INFO]: Cron job scheduled: database-cleanup (0 2 * * *)
2025-06-17 21:43:24 [INFO]: Cron job scheduled: memory-report (0 * * * *)
2025-06-17 21:43:24 [INFO]: System Information
{
  "nodeVersion": "v22.16.0",
  "platform": "linux",
  "arch": "arm64",
  "memory": {
    "rss": 136585216,
    "heapTotal": 47894528,
    "heapUsed": 31035912,
    "external": 3511728,
    "arrayBuffers": 70016
  },
  "uptime": 3.183943888
}
2025-06-17 21:43:24 [INFO]: Karere Backend Starting
{
  "pid": 48607
}
2025-06-17 21:43:24 [INFO]: Service Manager initialized successfully
2025-06-17 21:43:24 [INFO]: Initializing database
{
  "path": "data/karere.db"
}
2025-06-17 21:43:24 [INFO]: Database tables and indexes created successfully
2025-06-17 21:43:24 [INFO]: Performance: database_initialization completed in 61ms
{
  "type": "performance",
  "operation": "database_initialization",
  "duration": 61
}
2025-06-17 21:43:24 [INFO]: Database initialized successfully
2025-06-17 21:43:24 [INFO]: Service registered: database
2025-06-17 21:43:24 [INFO]: Performance: websocket_server_init completed in 7ms
{
  "type": "performance",
  "operation": "websocket_server_init",
  "duration": 7
}
2025-06-17 21:43:24 [INFO]: WebSocket server started on ws://localhost:8765
2025-06-17 21:43:24 [INFO]: Service registered: websocket
2025-06-17 21:43:24 [INFO]: Initializing WhatsApp connection
{
  "component": "baileys"
}
2025-06-17 21:43:24 [INFO]: Using WhatsApp version 2.3000.1023223821
{
  "component": "baileys"
}
2025-06-17 21:43:24 [INFO]: Performance: whatsapp_connection completed in 314ms
{
  "type": "performance",
  "operation": "whatsapp_connection",
  "duration": 314
}
2025-06-17 21:43:24 [INFO]: WhatsApp socket initialized successfully
{
  "component": "baileys"
}
2025-06-17 21:43:24 [INFO]: Karere Backend initialized successfully
2025-06-17 21:43:24 [INFO]: Connecting to WhatsApp...
{
  "component": "baileys"
}
2025-06-17 21:43:24 [WARN]: Cannot send to frontend: no active connection
{
  "type": "connection_status"
}
2025-06-17 21:43:25 [INFO]: WhatsApp connection is open
{
  "component": "baileys"
}
2025-06-17 21:43:25 [WARN]: Cannot send to frontend: no active connection
{
  "type": "baileys_ready"
}
2025-06-17 21:43:25 [WARN]: Cannot send to frontend: no active connection
{
  "type": "connection_status"
}
2025-06-17 21:43:25 [INFO]: Loading initial chats
{
  "component": "baileys"
}
2025-06-17 21:43:25 [INFO]: Performance: get_chats completed in 8ms
{
  "count": 50,
  "type": "performance",
  "operation": "get_chats",
  "duration": 8
}
2025-06-17 21:43:25 [INFO]: Performance: load_initial_chats completed in 14ms
{
  "source": "database",
  "count": 50,
  "type": "performance",
  "operation": "load_initial_chats",
  "duration": 14
}
2025-06-17 21:43:25 [INFO]: Initial chats loaded from database
{
  "count": 50,
  "component": "baileys"
}
2025-06-17 21:43:28 [INFO]: Client requested chats. Sending cached list.
2025-06-17 21:43:28 [INFO]: Performance: websocket_message_processing completed in 9ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 9
}
2025-06-17 21:43:30 [INFO]: Fetching message history
{
  "jid": "353857055000@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 21:43:31 [INFO]: Performance: get_messages completed in 7ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 7
}
2025-06-17 21:43:31 [INFO]: Performance: get_messages completed in 2ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 2
}
2025-06-17 21:43:31 [INFO]: Performance: get_message_history completed in 91ms
{
  "jid": "353857055000@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 91
}
2025-06-17 21:43:31 [INFO]: Message history sent
{
  "jid": "353857055000@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 21:43:31 [INFO]: Performance: websocket_message_processing completed in 102ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 102
}
2025-06-17 21:56:43 [INFO]: Performance: websocket_connection completed in 795554ms
{
  "type": "performance",
  "operation": "websocket_connection",
  "duration": 795554
}
2025-06-17 21:56:43 [ERROR]: Uncaught Exception
Error: write EPIPE
    at afterWriteDispatched (node:internal/stream_base_commons:159:15)
    at writeGeneric (node:internal/stream_base_commons:150:3)
    at Socket._writeGeneric (node:net:971:11)
    at Socket._write (node:net:983:8)
    at writeOrBuffer (node:internal/streams/writable:572:12)
    at _write (node:internal/streams/writable:501:10)
    at Writable.write (node:internal/streams/writable:510:10)
    at Console.log (/home/tobagin/Projects/Karere/backend/node_modules/winston/lib/winston/transports/console.js:87:23)
    at Console._write (/home/tobagin/Projects/Karere/backend/node_modules/winston-transport/modern.js:103:17)
    at doWrite (/home/tobagin/Projects/Karere/backend/node_modules/winston-transport/node_modules/readable-stream/lib/_stream_writable.js:390:139)
{
  "error": "write EPIPE"
}
2025-06-17 21:56:43 [INFO]: Received uncaughtException, starting graceful shutdown
2025-06-17 21:56:43 [INFO]: Stopping cron job: health-check
2025-06-17 21:56:43 [INFO]: Stopping cron job: log-rotation
2025-06-17 21:56:43 [INFO]: Stopping cron job: database-cleanup
2025-06-17 21:56:43 [INFO]: Stopping cron job: memory-report
2025-06-17 21:56:43 [INFO]: Shutting down service: database
2025-06-17 21:56:43 [INFO]: Shutting down service: websocket
2025-06-17 21:56:57 [INFO]: Starting Karere Backend initialization
2025-06-17 21:56:57 [INFO]: Initializing Service Manager
2025-06-17 21:56:57 [INFO]: Cron job scheduled: health-check (*/5 * * * *)
2025-06-17 21:56:57 [INFO]: Cron job scheduled: log-rotation (0 * * * *)
2025-06-17 21:56:57 [INFO]: Cron job scheduled: database-cleanup (0 2 * * *)
2025-06-17 21:56:57 [INFO]: Cron job scheduled: memory-report (0 * * * *)
2025-06-17 21:56:57 [INFO]: System Information
{
  "nodeVersion": "v22.16.0",
  "platform": "linux",
  "arch": "arm64",
  "memory": {
    "rss": 138031104,
    "heapTotal": 47370240,
    "heapUsed": 31137768,
    "external": 3511728,
    "arrayBuffers": 70016
  },
  "uptime": 3.938372826
}
2025-06-17 21:56:57 [INFO]: Karere Backend Starting
{
  "pid": 49440
}
2025-06-17 21:56:57 [INFO]: Service Manager initialized successfully
2025-06-17 21:56:57 [INFO]: Initializing database
{
  "path": "data/karere.db"
}
2025-06-17 21:56:57 [INFO]: Database tables and indexes created successfully
2025-06-17 21:56:57 [INFO]: Performance: database_initialization completed in 168ms
{
  "type": "performance",
  "operation": "database_initialization",
  "duration": 168
}
2025-06-17 21:56:57 [INFO]: Database initialized successfully
2025-06-17 21:56:57 [INFO]: Service registered: database
2025-06-17 21:56:57 [INFO]: Performance: websocket_server_init completed in 26ms
{
  "type": "performance",
  "operation": "websocket_server_init",
  "duration": 26
}
2025-06-17 21:56:57 [INFO]: WebSocket server started on ws://localhost:8765
2025-06-17 21:56:57 [INFO]: Service registered: websocket
2025-06-17 21:56:57 [INFO]: Initializing WhatsApp connection
{
  "component": "baileys"
}
2025-06-17 21:56:57 [INFO]: Using WhatsApp version 2.3000.1023223821
{
  "component": "baileys"
}
2025-06-17 21:56:57 [INFO]: Performance: whatsapp_connection completed in 407ms
{
  "type": "performance",
  "operation": "whatsapp_connection",
  "duration": 407
}
2025-06-17 21:56:57 [INFO]: WhatsApp socket initialized successfully
{
  "component": "baileys"
}
2025-06-17 21:56:57 [INFO]: Karere Backend initialized successfully
2025-06-17 21:56:57 [INFO]: Connecting to WhatsApp...
{
  "component": "baileys"
}
2025-06-17 21:56:57 [WARN]: Cannot send to frontend: no active connection
{
  "type": "connection_status"
}
2025-06-17 21:56:58 [INFO]: WhatsApp connection is open
{
  "component": "baileys"
}
2025-06-17 21:56:58 [INFO]: Loading initial chats
{
  "component": "baileys"
}
2025-06-17 21:56:58 [INFO]: Performance: get_chats completed in 18ms
{
  "count": 50,
  "type": "performance",
  "operation": "get_chats",
  "duration": 18
}
2025-06-17 21:56:58 [INFO]: Performance: load_initial_chats completed in 24ms
{
  "source": "database",
  "count": 50,
  "type": "performance",
  "operation": "load_initial_chats",
  "duration": 24
}
2025-06-17 21:56:58 [INFO]: Initial chats loaded from database
{
  "count": 50,
  "component": "baileys"
}
2025-06-17 21:59:29 [INFO]: Performance: websocket_connection completed in 150885ms
{
  "type": "performance",
  "operation": "websocket_connection",
  "duration": 150885
}
2025-06-17 21:59:29 [ERROR]: Uncaught Exception
Error: write EPIPE
    at afterWriteDispatched (node:internal/stream_base_commons:159:15)
    at writeGeneric (node:internal/stream_base_commons:150:3)
    at Socket._writeGeneric (node:net:971:11)
    at Socket._write (node:net:983:8)
    at writeOrBuffer (node:internal/streams/writable:572:12)
    at _write (node:internal/streams/writable:501:10)
    at Writable.write (node:internal/streams/writable:510:10)
    at Console.log (/home/tobagin/Projects/Karere/backend/node_modules/winston/lib/winston/transports/console.js:87:23)
    at Console._write (/home/tobagin/Projects/Karere/backend/node_modules/winston-transport/modern.js:103:17)
    at doWrite (/home/tobagin/Projects/Karere/backend/node_modules/winston-transport/node_modules/readable-stream/lib/_stream_writable.js:390:139)
{
  "error": "write EPIPE"
}
2025-06-17 21:59:29 [INFO]: Received uncaughtException, starting graceful shutdown
2025-06-17 21:59:29 [INFO]: Stopping cron job: health-check
2025-06-17 21:59:29 [INFO]: Stopping cron job: log-rotation
2025-06-17 21:59:29 [INFO]: Stopping cron job: database-cleanup
2025-06-17 21:59:29 [INFO]: Stopping cron job: memory-report
2025-06-17 21:59:29 [INFO]: Shutting down service: database
2025-06-17 21:59:29 [INFO]: Shutting down service: websocket
2025-06-17 21:59:47 [INFO]: Starting Karere Backend initialization
2025-06-17 21:59:47 [INFO]: Initializing Service Manager
2025-06-17 21:59:47 [INFO]: Cron job scheduled: health-check (*/5 * * * *)
2025-06-17 21:59:47 [INFO]: Cron job scheduled: log-rotation (0 * * * *)
2025-06-17 21:59:47 [INFO]: Cron job scheduled: database-cleanup (0 2 * * *)
2025-06-17 21:59:47 [INFO]: Cron job scheduled: memory-report (0 * * * *)
2025-06-17 21:59:47 [INFO]: System Information
{
  "nodeVersion": "v22.16.0",
  "platform": "linux",
  "arch": "arm64",
  "memory": {
    "rss": 135606272,
    "heapTotal": 44224512,
    "heapUsed": 34303576,
    "external": 3511728,
    "arrayBuffers": 70016
  },
  "uptime": 2.442501943
}
2025-06-17 21:59:47 [INFO]: Karere Backend Starting
{
  "pid": 49698
}
2025-06-17 21:59:47 [INFO]: Service Manager initialized successfully
2025-06-17 21:59:47 [INFO]: Initializing database
{
  "path": "data/karere.db"
}
2025-06-17 21:59:47 [INFO]: Database tables and indexes created successfully
2025-06-17 21:59:47 [INFO]: Performance: database_initialization completed in 84ms
{
  "type": "performance",
  "operation": "database_initialization",
  "duration": 84
}
2025-06-17 21:59:47 [INFO]: Database initialized successfully
2025-06-17 21:59:47 [INFO]: Service registered: database
2025-06-17 21:59:47 [INFO]: Performance: websocket_server_init completed in 10ms
{
  "type": "performance",
  "operation": "websocket_server_init",
  "duration": 10
}
2025-06-17 21:59:47 [INFO]: WebSocket server started on ws://localhost:8765
2025-06-17 21:59:47 [INFO]: Service registered: websocket
2025-06-17 21:59:47 [INFO]: Initializing WhatsApp connection
{
  "component": "baileys"
}
2025-06-17 21:59:47 [INFO]: Using WhatsApp version 2.3000.1023223821
{
  "component": "baileys"
}
2025-06-17 21:59:47 [INFO]: Performance: whatsapp_connection completed in 261ms
{
  "type": "performance",
  "operation": "whatsapp_connection",
  "duration": 261
}
2025-06-17 21:59:47 [INFO]: WhatsApp socket initialized successfully
{
  "component": "baileys"
}
2025-06-17 21:59:47 [INFO]: Karere Backend initialized successfully
2025-06-17 21:59:47 [INFO]: Connecting to WhatsApp...
{
  "component": "baileys"
}
2025-06-17 21:59:47 [WARN]: Cannot send to frontend: no active connection
{
  "type": "connection_status"
}
2025-06-17 21:59:48 [INFO]: WhatsApp connection is open
{
  "component": "baileys"
}
2025-06-17 21:59:48 [INFO]: Loading initial chats
{
  "component": "baileys"
}
2025-06-17 21:59:48 [INFO]: Performance: get_chats completed in 7ms
{
  "count": 50,
  "type": "performance",
  "operation": "get_chats",
  "duration": 7
}
2025-06-17 21:59:48 [INFO]: Performance: load_initial_chats completed in 12ms
{
  "source": "database",
  "count": 50,
  "type": "performance",
  "operation": "load_initial_chats",
  "duration": 12
}
2025-06-17 21:59:48 [INFO]: Initial chats loaded from database
{
  "count": 50,
  "component": "baileys"
}
2025-06-17 22:00:00 [INFO]: Memory Usage Report
{
  "heapUsed": "33.92MB",
  "heapTotal": "47.09MB",
  "external": "3.59MB",
  "rss": "138.60MB"
}
2025-06-17 22:01:56 [INFO]: Performance: websocket_connection completed in 127776ms
{
  "type": "performance",
  "operation": "websocket_connection",
  "duration": 127776
}
2025-06-17 22:01:56 [ERROR]: Uncaught Exception
Error: write EPIPE
    at afterWriteDispatched (node:internal/stream_base_commons:159:15)
    at writeGeneric (node:internal/stream_base_commons:150:3)
    at Socket._writeGeneric (node:net:971:11)
    at Socket._write (node:net:983:8)
    at writeOrBuffer (node:internal/streams/writable:572:12)
    at _write (node:internal/streams/writable:501:10)
    at Writable.write (node:internal/streams/writable:510:10)
    at Console.log (/home/tobagin/Projects/Karere/backend/node_modules/winston/lib/winston/transports/console.js:87:23)
    at Console._write (/home/tobagin/Projects/Karere/backend/node_modules/winston-transport/modern.js:103:17)
    at doWrite (/home/tobagin/Projects/Karere/backend/node_modules/winston-transport/node_modules/readable-stream/lib/_stream_writable.js:390:139)
{
  "error": "write EPIPE"
}
2025-06-17 22:01:56 [INFO]: Received uncaughtException, starting graceful shutdown
2025-06-17 22:01:56 [INFO]: Stopping cron job: health-check
2025-06-17 22:01:56 [INFO]: Stopping cron job: log-rotation
2025-06-17 22:01:56 [INFO]: Stopping cron job: database-cleanup
2025-06-17 22:01:56 [INFO]: Stopping cron job: memory-report
2025-06-17 22:01:56 [INFO]: Shutting down service: database
2025-06-17 22:01:56 [INFO]: Shutting down service: websocket
2025-06-17 22:02:07 [INFO]: Starting Karere Backend initialization
2025-06-17 22:02:07 [INFO]: Initializing Service Manager
2025-06-17 22:02:07 [INFO]: Cron job scheduled: health-check (*/5 * * * *)
2025-06-17 22:02:07 [INFO]: Cron job scheduled: log-rotation (0 * * * *)
2025-06-17 22:02:07 [INFO]: Cron job scheduled: database-cleanup (0 2 * * *)
2025-06-17 22:02:07 [INFO]: Cron job scheduled: memory-report (0 * * * *)
2025-06-17 22:02:07 [INFO]: System Information
{
  "nodeVersion": "v22.16.0",
  "platform": "linux",
  "arch": "arm64",
  "memory": {
    "rss": 134610944,
    "heapTotal": 47108096,
    "heapUsed": 31351888,
    "external": 3511728,
    "arrayBuffers": 70016
  },
  "uptime": 2.31015858
}
2025-06-17 22:02:07 [INFO]: Karere Backend Starting
{
  "pid": 50013
}
2025-06-17 22:02:07 [INFO]: Service Manager initialized successfully
2025-06-17 22:02:07 [INFO]: Initializing database
{
  "path": "data/karere.db"
}
2025-06-17 22:02:07 [INFO]: Database tables and indexes created successfully
2025-06-17 22:02:07 [INFO]: Performance: database_initialization completed in 59ms
{
  "type": "performance",
  "operation": "database_initialization",
  "duration": 59
}
2025-06-17 22:02:07 [INFO]: Database initialized successfully
2025-06-17 22:02:07 [INFO]: Service registered: database
2025-06-17 22:02:07 [INFO]: Performance: websocket_server_init completed in 12ms
{
  "type": "performance",
  "operation": "websocket_server_init",
  "duration": 12
}
2025-06-17 22:02:07 [INFO]: WebSocket server started on ws://localhost:8765
2025-06-17 22:02:07 [INFO]: Service registered: websocket
2025-06-17 22:02:07 [INFO]: Initializing WhatsApp connection
{
  "component": "baileys"
}
2025-06-17 22:02:08 [INFO]: Using WhatsApp version 2.3000.1023223821
{
  "component": "baileys"
}
2025-06-17 22:02:08 [INFO]: Performance: whatsapp_connection completed in 714ms
{
  "type": "performance",
  "operation": "whatsapp_connection",
  "duration": 714
}
2025-06-17 22:02:08 [INFO]: WhatsApp socket initialized successfully
{
  "component": "baileys"
}
2025-06-17 22:02:08 [INFO]: Karere Backend initialized successfully
2025-06-17 22:02:08 [INFO]: Connecting to WhatsApp...
{
  "component": "baileys"
}
2025-06-17 22:02:08 [WARN]: Cannot send to frontend: no active connection
{
  "type": "connection_status"
}
2025-06-17 22:02:09 [INFO]: WhatsApp connection is open
{
  "component": "baileys"
}
2025-06-17 22:02:09 [WARN]: Cannot send to frontend: no active connection
{
  "type": "baileys_ready"
}
2025-06-17 22:02:09 [WARN]: Cannot send to frontend: no active connection
{
  "type": "connection_status"
}
2025-06-17 22:02:09 [INFO]: Loading initial chats
{
  "component": "baileys"
}
2025-06-17 22:02:09 [INFO]: Performance: get_chats completed in 12ms
{
  "count": 50,
  "type": "performance",
  "operation": "get_chats",
  "duration": 12
}
2025-06-17 22:02:09 [INFO]: Performance: load_initial_chats completed in 17ms
{
  "source": "database",
  "count": 50,
  "type": "performance",
  "operation": "load_initial_chats",
  "duration": 17
}
2025-06-17 22:02:09 [INFO]: Initial chats loaded from database
{
  "count": 50,
  "component": "baileys"
}
2025-06-17 22:02:12 [INFO]: Client requested chats. Sending cached list.
2025-06-17 22:02:12 [INFO]: Performance: websocket_message_processing completed in 13ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 13
}
2025-06-17 22:02:16 [INFO]: Fetching message history
{
  "jid": "353857055000@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 22:02:16 [INFO]: Performance: get_messages completed in 6ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 6
}
2025-06-17 22:02:16 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 22:02:16 [INFO]: Performance: get_message_history completed in 84ms
{
  "jid": "353857055000@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 84
}
2025-06-17 22:02:16 [INFO]: Message history sent
{
  "jid": "353857055000@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 22:02:16 [INFO]: Performance: websocket_message_processing completed in 90ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 90
}
2025-06-17 22:02:20 [INFO]: Fetching message history
{
  "jid": "557199027750@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 22:02:20 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 22:02:20 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 22:02:20 [INFO]: Performance: get_message_history completed in 21ms
{
  "jid": "557199027750@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 21
}
2025-06-17 22:02:20 [INFO]: Message history sent
{
  "jid": "557199027750@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 22:02:20 [INFO]: Performance: websocket_message_processing completed in 23ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 23
}
2025-06-17 22:02:21 [INFO]: Fetching message history
{
  "jid": "353857055000@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 22:02:21 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 22:02:21 [INFO]: Performance: get_messages completed in 3ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 3
}
2025-06-17 22:02:21 [INFO]: Performance: get_message_history completed in 43ms
{
  "jid": "353857055000@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 43
}
2025-06-17 22:02:21 [INFO]: Message history sent
{
  "jid": "353857055000@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 22:02:21 [INFO]: Performance: websocket_message_processing completed in 49ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 49
}
2025-06-17 22:02:38 [INFO]: Fetching message history
{
  "jid": "557199027750@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 22:02:38 [INFO]: Performance: get_messages completed in 2ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 2
}
2025-06-17 22:02:38 [INFO]: Performance: get_messages completed in 2ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 2
}
2025-06-17 22:02:38 [INFO]: Performance: get_message_history completed in 30ms
{
  "jid": "557199027750@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 30
}
2025-06-17 22:02:38 [INFO]: Message history sent
{
  "jid": "557199027750@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 22:02:38 [INFO]: Performance: websocket_message_processing completed in 36ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 36
}
2025-06-17 22:02:39 [INFO]: Fetching message history
{
  "jid": "553399888256@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 22:02:39 [INFO]: Performance: get_messages completed in 2ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 2
}
2025-06-17 22:02:39 [INFO]: Performance: get_messages completed in 0ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 0
}
2025-06-17 22:02:39 [INFO]: Performance: get_message_history completed in 18ms
{
  "jid": "553399888256@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 18
}
2025-06-17 22:02:39 [INFO]: Message history sent
{
  "jid": "553399888256@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 22:02:39 [INFO]: Performance: websocket_message_processing completed in 21ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 21
}
2025-06-17 22:02:40 [INFO]: Fetching message history
{
  "jid": "353899678402@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 22:02:40 [INFO]: Performance: get_messages completed in 2ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 2
}
2025-06-17 22:02:40 [INFO]: Performance: get_messages completed in 0ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 0
}
2025-06-17 22:02:40 [INFO]: Performance: get_message_history completed in 16ms
{
  "jid": "353899678402@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 16
}
2025-06-17 22:02:40 [INFO]: Message history sent
{
  "jid": "353899678402@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 22:02:40 [INFO]: Performance: websocket_message_processing completed in 18ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 18
}
2025-06-17 22:02:41 [INFO]: Fetching message history
{
  "jid": "12678582296@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 22:02:41 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 22:02:41 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 22:02:41 [INFO]: Performance: get_message_history completed in 13ms
{
  "jid": "12678582296@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 13
}
2025-06-17 22:02:41 [INFO]: Message history sent
{
  "jid": "12678582296@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 22:02:41 [INFO]: Performance: websocket_message_processing completed in 14ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 14
}
2025-06-17 22:20:00 [INFO]: Performance: websocket_connection completed in 1068484ms
{
  "type": "performance",
  "operation": "websocket_connection",
  "duration": 1068484
}
2025-06-17 22:20:00 [ERROR]: Uncaught Exception
Error: write EPIPE
    at afterWriteDispatched (node:internal/stream_base_commons:159:15)
    at writeGeneric (node:internal/stream_base_commons:150:3)
    at Socket._writeGeneric (node:net:971:11)
    at Socket._write (node:net:983:8)
    at writeOrBuffer (node:internal/streams/writable:572:12)
    at _write (node:internal/streams/writable:501:10)
    at Writable.write (node:internal/streams/writable:510:10)
    at Console.log (/home/tobagin/Projects/Karere/backend/node_modules/winston/lib/winston/transports/console.js:87:23)
    at Console._write (/home/tobagin/Projects/Karere/backend/node_modules/winston-transport/modern.js:103:17)
    at doWrite (/home/tobagin/Projects/Karere/backend/node_modules/winston-transport/node_modules/readable-stream/lib/_stream_writable.js:390:139)
{
  "error": "write EPIPE"
}
2025-06-17 22:20:00 [INFO]: Received uncaughtException, starting graceful shutdown
2025-06-17 22:20:00 [INFO]: Stopping cron job: health-check
2025-06-17 22:20:00 [INFO]: Stopping cron job: log-rotation
2025-06-17 22:20:00 [INFO]: Stopping cron job: database-cleanup
2025-06-17 22:20:00 [INFO]: Stopping cron job: memory-report
2025-06-17 22:20:00 [INFO]: Shutting down service: database
2025-06-17 22:20:00 [INFO]: Shutting down service: websocket
2025-06-17 22:34:12 [INFO]: Starting Karere Backend initialization
2025-06-17 22:34:12 [INFO]: Initializing Service Manager
2025-06-17 22:34:13 [INFO]: Cron job scheduled: health-check (*/5 * * * *)
2025-06-17 22:34:13 [INFO]: Cron job scheduled: log-rotation (0 * * * *)
2025-06-17 22:34:13 [INFO]: Cron job scheduled: database-cleanup (0 2 * * *)
2025-06-17 22:34:13 [INFO]: Cron job scheduled: memory-report (0 * * * *)
2025-06-17 22:34:13 [INFO]: System Information
{
  "nodeVersion": "v22.16.0",
  "platform": "linux",
  "arch": "arm64",
  "memory": {
    "rss": 137904128,
    "heapTotal": 46583808,
    "heapUsed": 32676744,
    "external": 3511728,
    "arrayBuffers": 70016
  },
  "uptime": 5.802930059
}
2025-06-17 22:34:13 [INFO]: Karere Backend Starting
{
  "pid": 51857
}
2025-06-17 22:34:13 [INFO]: Service Manager initialized successfully
2025-06-17 22:34:13 [INFO]: Initializing database
{
  "path": "data/karere.db"
}
2025-06-17 22:34:13 [INFO]: Database tables and indexes created successfully
2025-06-17 22:34:13 [INFO]: Performance: database_initialization completed in 77ms
{
  "type": "performance",
  "operation": "database_initialization",
  "duration": 77
}
2025-06-17 22:34:13 [INFO]: Database initialized successfully
2025-06-17 22:34:13 [INFO]: Service registered: database
2025-06-17 22:34:13 [INFO]: Performance: websocket_server_init completed in 8ms
{
  "type": "performance",
  "operation": "websocket_server_init",
  "duration": 8
}
2025-06-17 22:34:13 [INFO]: WebSocket server started on ws://localhost:8765
2025-06-17 22:34:13 [INFO]: Service registered: websocket
2025-06-17 22:34:13 [INFO]: Initializing WhatsApp connection
{
  "component": "baileys"
}
2025-06-17 22:34:13 [INFO]: Using WhatsApp version 2.3000.1023223821
{
  "component": "baileys"
}
2025-06-17 22:34:13 [INFO]: Performance: whatsapp_connection completed in 360ms
{
  "type": "performance",
  "operation": "whatsapp_connection",
  "duration": 360
}
2025-06-17 22:34:13 [INFO]: WhatsApp socket initialized successfully
{
  "component": "baileys"
}
2025-06-17 22:34:13 [INFO]: Karere Backend initialized successfully
2025-06-17 22:34:13 [INFO]: Connecting to WhatsApp...
{
  "component": "baileys"
}
2025-06-17 22:34:13 [WARN]: Cannot send to frontend: no active connection
{
  "type": "connection_status"
}
2025-06-17 22:34:14 [INFO]: WhatsApp connection is open
{
  "component": "baileys"
}
2025-06-17 22:34:14 [INFO]: Loading initial chats
{
  "component": "baileys"
}
2025-06-17 22:34:14 [INFO]: Performance: get_chats completed in 9ms
{
  "count": 50,
  "type": "performance",
  "operation": "get_chats",
  "duration": 9
}
2025-06-17 22:34:14 [INFO]: Performance: load_initial_chats completed in 13ms
{
  "source": "database",
  "count": 50,
  "type": "performance",
  "operation": "load_initial_chats",
  "duration": 13
}
2025-06-17 22:34:14 [INFO]: Initial chats loaded from database
{
  "count": 50,
  "component": "baileys"
}
2025-06-17 22:34:14 [INFO]: Client requested chats. Sending cached list.
2025-06-17 22:34:14 [INFO]: Performance: websocket_message_processing completed in 5ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 5
}
2025-06-17 22:34:20 [INFO]: Fetching message history
{
  "jid": "353857055000@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 22:34:20 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 22:34:20 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 22:34:20 [INFO]: Performance: get_message_history completed in 38ms
{
  "jid": "353857055000@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 38
}
2025-06-17 22:34:20 [INFO]: Message history sent
{
  "jid": "353857055000@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 22:34:20 [INFO]: Performance: websocket_message_processing completed in 42ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 42
}
2025-06-17 22:34:22 [INFO]: Fetching message history
{
  "jid": "557199027750@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 22:34:22 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 22:34:22 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 22:34:22 [INFO]: Performance: get_message_history completed in 40ms
{
  "jid": "557199027750@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 40
}
2025-06-17 22:34:22 [INFO]: Message history sent
{
  "jid": "557199027750@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 22:34:22 [INFO]: Performance: websocket_message_processing completed in 41ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 41
}
2025-06-17 22:34:23 [INFO]: Fetching message history
{
  "jid": "553399888256@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 22:34:23 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 22:34:23 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 22:34:23 [INFO]: Performance: get_message_history completed in 15ms
{
  "jid": "553399888256@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 15
}
2025-06-17 22:34:23 [INFO]: Message history sent
{
  "jid": "553399888256@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 22:34:23 [INFO]: Performance: websocket_message_processing completed in 17ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 17
}
2025-06-17 22:34:24 [INFO]: Fetching message history
{
  "jid": "353899678402@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 22:34:24 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 22:34:24 [INFO]: Performance: get_messages completed in 0ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 0
}
2025-06-17 22:34:24 [INFO]: Performance: get_message_history completed in 15ms
{
  "jid": "353899678402@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 15
}
2025-06-17 22:34:24 [INFO]: Message history sent
{
  "jid": "353899678402@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 22:34:24 [INFO]: Performance: websocket_message_processing completed in 18ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 18
}
2025-06-17 22:34:37 [INFO]: Received SIGTERM, starting graceful shutdown
2025-06-17 22:34:37 [INFO]: Stopping cron job: health-check
2025-06-17 22:34:37 [INFO]: Stopping cron job: log-rotation
2025-06-17 22:34:37 [INFO]: Stopping cron job: database-cleanup
2025-06-17 22:34:37 [INFO]: Stopping cron job: memory-report
2025-06-17 22:34:37 [INFO]: Shutting down service: database
2025-06-17 22:34:37 [INFO]: Shutting down service: websocket
2025-06-17 22:34:37 [WARN]: Shutdown already in progress, forcing exit
2025-06-17 23:11:26 [INFO]: Starting Karere Backend initialization
2025-06-17 23:11:26 [INFO]: Initializing Service Manager
2025-06-17 23:11:27 [INFO]: Cron job scheduled: health-check (*/5 * * * *)
2025-06-17 23:11:27 [INFO]: Cron job scheduled: log-rotation (0 * * * *)
2025-06-17 23:11:27 [INFO]: Cron job scheduled: database-cleanup (0 2 * * *)
2025-06-17 23:11:27 [INFO]: Cron job scheduled: memory-report (0 * * * *)
2025-06-17 23:11:27 [INFO]: System Information
{
  "nodeVersion": "v22.16.0",
  "platform": "linux",
  "arch": "arm64",
  "memory": {
    "rss": 137154560,
    "heapTotal": 46776320,
    "heapUsed": 32867800,
    "external": 3511728,
    "arrayBuffers": 70016
  },
  "uptime": 4.719383589
}
2025-06-17 23:11:27 [INFO]: Karere Backend Starting
{
  "pid": 53379
}
2025-06-17 23:11:27 [INFO]: Service Manager initialized successfully
2025-06-17 23:11:27 [INFO]: Initializing database
{
  "path": "data/karere.db"
}
2025-06-17 23:11:27 [INFO]: Database tables and indexes created successfully
2025-06-17 23:11:27 [INFO]: Performance: database_initialization completed in 73ms
{
  "type": "performance",
  "operation": "database_initialization",
  "duration": 73
}
2025-06-17 23:11:27 [INFO]: Database initialized successfully
2025-06-17 23:11:27 [INFO]: Service registered: database
2025-06-17 23:11:27 [INFO]: Performance: websocket_server_init completed in 8ms
{
  "type": "performance",
  "operation": "websocket_server_init",
  "duration": 8
}
2025-06-17 23:11:27 [INFO]: WebSocket server started on ws://localhost:8765
2025-06-17 23:11:27 [INFO]: Service registered: websocket
2025-06-17 23:11:27 [INFO]: Initializing WhatsApp connection
{
  "component": "baileys"
}
2025-06-17 23:11:27 [INFO]: Using WhatsApp version 2.3000.1023223821
{
  "component": "baileys"
}
2025-06-17 23:11:27 [INFO]: Performance: whatsapp_connection completed in 342ms
{
  "type": "performance",
  "operation": "whatsapp_connection",
  "duration": 342
}
2025-06-17 23:11:27 [INFO]: WhatsApp socket initialized successfully
{
  "component": "baileys"
}
2025-06-17 23:11:27 [INFO]: Karere Backend initialized successfully
2025-06-17 23:11:27 [INFO]: Connecting to WhatsApp...
{
  "component": "baileys"
}
2025-06-17 23:11:27 [WARN]: Cannot send to frontend: no active connection
{
  "type": "connection_status"
}
2025-06-17 23:11:28 [INFO]: Performance: message_upsert completed in 0ms
{
  "type": "performance",
  "operation": "message_upsert",
  "duration": 0
}
2025-06-17 23:11:28 [INFO]: Performance: message_upsert completed in 0ms
{
  "type": "performance",
  "operation": "message_upsert",
  "duration": 0
}
2025-06-17 23:11:28 [INFO]: WhatsApp connection is open
{
  "component": "baileys"
}
2025-06-17 23:11:28 [INFO]: Loading initial chats
{
  "component": "baileys"
}
2025-06-17 23:11:28 [INFO]: Performance: get_chats completed in 11ms
{
  "count": 50,
  "type": "performance",
  "operation": "get_chats",
  "duration": 11
}
2025-06-17 23:11:28 [INFO]: Performance: load_initial_chats completed in 17ms
{
  "source": "database",
  "count": 50,
  "type": "performance",
  "operation": "load_initial_chats",
  "duration": 17
}
2025-06-17 23:11:28 [INFO]: Initial chats loaded from database
{
  "count": 50,
  "component": "baileys"
}
2025-06-17 23:11:33 [INFO]: Received SIGTERM, starting graceful shutdown
2025-06-17 23:11:33 [INFO]: Stopping cron job: health-check
2025-06-17 23:11:33 [INFO]: Stopping cron job: log-rotation
2025-06-17 23:11:33 [INFO]: Stopping cron job: database-cleanup
2025-06-17 23:11:33 [INFO]: Stopping cron job: memory-report
2025-06-17 23:11:33 [INFO]: Shutting down service: database
2025-06-17 23:11:33 [INFO]: Shutting down service: websocket
2025-06-17 23:12:45 [INFO]: Starting Karere Backend initialization
2025-06-17 23:12:45 [INFO]: Initializing Service Manager
2025-06-17 23:12:45 [INFO]: Cron job scheduled: health-check (*/5 * * * *)
2025-06-17 23:12:45 [INFO]: Cron job scheduled: log-rotation (0 * * * *)
2025-06-17 23:12:45 [INFO]: Cron job scheduled: database-cleanup (0 2 * * *)
2025-06-17 23:12:45 [INFO]: Cron job scheduled: memory-report (0 * * * *)
2025-06-17 23:12:45 [INFO]: System Information
{
  "nodeVersion": "v22.16.0",
  "platform": "linux",
  "arch": "arm64",
  "memory": {
    "rss": 139022336,
    "heapTotal": 47108096,
    "heapUsed": 32172040,
    "external": 3511728,
    "arrayBuffers": 70016
  },
  "uptime": 1.810027621
}
2025-06-17 23:12:45 [INFO]: Karere Backend Starting
{
  "pid": 53574
}
2025-06-17 23:12:45 [INFO]: Service Manager initialized successfully
2025-06-17 23:12:45 [INFO]: Initializing database
{
  "path": "data/karere.db"
}
2025-06-17 23:12:45 [INFO]: Database tables and indexes created successfully
2025-06-17 23:12:45 [INFO]: Performance: database_initialization completed in 41ms
{
  "type": "performance",
  "operation": "database_initialization",
  "duration": 41
}
2025-06-17 23:12:45 [INFO]: Database initialized successfully
2025-06-17 23:12:45 [INFO]: Service registered: database
2025-06-17 23:12:45 [INFO]: Performance: websocket_server_init completed in 10ms
{
  "type": "performance",
  "operation": "websocket_server_init",
  "duration": 10
}
2025-06-17 23:12:45 [INFO]: WebSocket server started on ws://localhost:8765
2025-06-17 23:12:45 [INFO]: Service registered: websocket
2025-06-17 23:12:45 [INFO]: Initializing WhatsApp connection
{
  "component": "baileys"
}
2025-06-17 23:12:45 [INFO]: Using WhatsApp version 2.3000.1023223821
{
  "component": "baileys"
}
2025-06-17 23:12:45 [INFO]: Performance: whatsapp_connection completed in 398ms
{
  "type": "performance",
  "operation": "whatsapp_connection",
  "duration": 398
}
2025-06-17 23:12:45 [INFO]: WhatsApp socket initialized successfully
{
  "component": "baileys"
}
2025-06-17 23:12:45 [INFO]: Karere Backend initialized successfully
2025-06-17 23:12:45 [INFO]: Connecting to WhatsApp...
{
  "component": "baileys"
}
2025-06-17 23:12:45 [WARN]: Cannot send to frontend: no active connection
{
  "type": "connection_status"
}
2025-06-17 23:12:46 [INFO]: WhatsApp connection is open
{
  "component": "baileys"
}
2025-06-17 23:12:46 [INFO]: Loading initial chats
{
  "component": "baileys"
}
2025-06-17 23:12:46 [INFO]: Performance: get_chats completed in 6ms
{
  "count": 50,
  "type": "performance",
  "operation": "get_chats",
  "duration": 6
}
2025-06-17 23:12:46 [INFO]: Performance: load_initial_chats completed in 11ms
{
  "source": "database",
  "count": 50,
  "type": "performance",
  "operation": "load_initial_chats",
  "duration": 11
}
2025-06-17 23:12:46 [INFO]: Initial chats loaded from database
{
  "count": 50,
  "component": "baileys"
}
2025-06-17 23:12:56 [INFO]: Received SIGTERM, starting graceful shutdown
2025-06-17 23:12:56 [INFO]: Stopping cron job: health-check
2025-06-17 23:12:56 [INFO]: Stopping cron job: log-rotation
2025-06-17 23:12:56 [INFO]: Stopping cron job: database-cleanup
2025-06-17 23:12:56 [INFO]: Stopping cron job: memory-report
2025-06-17 23:12:56 [INFO]: Shutting down service: database
2025-06-17 23:12:56 [INFO]: Shutting down service: websocket
2025-06-17 23:15:02 [INFO]: Starting Karere Backend initialization
2025-06-17 23:15:02 [INFO]: Initializing Service Manager
2025-06-17 23:15:02 [INFO]: Cron job scheduled: health-check (*/5 * * * *)
2025-06-17 23:15:02 [INFO]: Cron job scheduled: log-rotation (0 * * * *)
2025-06-17 23:15:02 [INFO]: Cron job scheduled: database-cleanup (0 2 * * *)
2025-06-17 23:15:02 [INFO]: Cron job scheduled: memory-report (0 * * * *)
2025-06-17 23:15:02 [INFO]: System Information
{
  "nodeVersion": "v22.16.0",
  "platform": "linux",
  "arch": "arm64",
  "memory": {
    "rss": 134041600,
    "heapTotal": 47108096,
    "heapUsed": 32476112,
    "external": 3511728,
    "arrayBuffers": 70016
  },
  "uptime": 1.756170418
}
2025-06-17 23:15:02 [INFO]: Karere Backend Starting
{
  "pid": 53758
}
2025-06-17 23:15:02 [INFO]: Service Manager initialized successfully
2025-06-17 23:15:02 [INFO]: Initializing database
{
  "path": "data/karere.db"
}
2025-06-17 23:15:02 [INFO]: Database tables and indexes created successfully
2025-06-17 23:15:02 [INFO]: Performance: database_initialization completed in 37ms
{
  "type": "performance",
  "operation": "database_initialization",
  "duration": 37
}
2025-06-17 23:15:02 [INFO]: Database initialized successfully
2025-06-17 23:15:02 [INFO]: Service registered: database
2025-06-17 23:15:02 [INFO]: Performance: websocket_server_init completed in 10ms
{
  "type": "performance",
  "operation": "websocket_server_init",
  "duration": 10
}
2025-06-17 23:15:02 [INFO]: WebSocket server started on ws://localhost:8765
2025-06-17 23:15:02 [INFO]: Service registered: websocket
2025-06-17 23:15:02 [INFO]: Initializing WhatsApp connection
{
  "component": "baileys"
}
2025-06-17 23:15:03 [INFO]: Using WhatsApp version 2.3000.1023223821
{
  "component": "baileys"
}
2025-06-17 23:15:03 [INFO]: Performance: whatsapp_connection completed in 285ms
{
  "type": "performance",
  "operation": "whatsapp_connection",
  "duration": 285
}
2025-06-17 23:15:03 [INFO]: WhatsApp socket initialized successfully
{
  "component": "baileys"
}
2025-06-17 23:15:03 [INFO]: Karere Backend initialized successfully
2025-06-17 23:15:03 [INFO]: Connecting to WhatsApp...
{
  "component": "baileys"
}
2025-06-17 23:15:03 [WARN]: Cannot send to frontend: no active connection
{
  "type": "connection_status"
}
2025-06-17 23:15:04 [INFO]: WhatsApp connection is open
{
  "component": "baileys"
}
2025-06-17 23:15:04 [INFO]: Loading initial chats
{
  "component": "baileys"
}
2025-06-17 23:15:04 [INFO]: Performance: get_chats completed in 44ms
{
  "count": 50,
  "type": "performance",
  "operation": "get_chats",
  "duration": 44
}
2025-06-17 23:15:04 [INFO]: Performance: load_initial_chats completed in 49ms
{
  "source": "database",
  "count": 50,
  "type": "performance",
  "operation": "load_initial_chats",
  "duration": 49
}
2025-06-17 23:15:04 [INFO]: Initial chats loaded from database
{
  "count": 50,
  "component": "baileys"
}
2025-06-17 23:15:04 [INFO]: Client requested chats. Sending cached list.
2025-06-17 23:15:04 [INFO]: Performance: websocket_message_processing completed in 8ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 8
}
2025-06-17 23:15:13 [INFO]: Fetching message history
{
  "jid": "353857055000@s.whatsapp.net",
  "limit": 50,
  "offset": 0,
  "component": "messaging"
}
2025-06-17 23:15:13 [INFO]: Performance: get_messages completed in 3ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 3
}
2025-06-17 23:15:13 [INFO]: Performance: get_messages completed in 1ms
{
  "count": 0,
  "type": "performance",
  "operation": "get_messages",
  "duration": 1
}
2025-06-17 23:15:13 [INFO]: Performance: get_message_history completed in 57ms
{
  "jid": "353857055000@s.whatsapp.net",
  "messageCount": 0,
  "type": "performance",
  "operation": "get_message_history",
  "duration": 57
}
2025-06-17 23:15:13 [INFO]: Message history sent
{
  "jid": "353857055000@s.whatsapp.net",
  "count": 0,
  "component": "messaging"
}
2025-06-17 23:15:13 [INFO]: Performance: websocket_message_processing completed in 62ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 62
}
2025-06-17 23:15:17 [INFO]: Received SIGTERM, starting graceful shutdown
2025-06-17 23:15:17 [INFO]: Stopping cron job: health-check
2025-06-17 23:15:17 [INFO]: Stopping cron job: log-rotation
2025-06-17 23:15:17 [INFO]: Stopping cron job: database-cleanup
2025-06-17 23:15:17 [INFO]: Stopping cron job: memory-report
2025-06-17 23:15:17 [INFO]: Shutting down service: database
2025-06-17 23:15:17 [INFO]: Shutting down service: websocket
2025-06-17 23:15:46 [INFO]: Starting Karere Backend initialization
2025-06-17 23:15:46 [INFO]: Initializing Service Manager
2025-06-17 23:15:46 [INFO]: Cron job scheduled: health-check (*/5 * * * *)
2025-06-17 23:15:46 [INFO]: Cron job scheduled: log-rotation (0 * * * *)
2025-06-17 23:15:46 [INFO]: Cron job scheduled: database-cleanup (0 2 * * *)
2025-06-17 23:15:46 [INFO]: Cron job scheduled: memory-report (0 * * * *)
2025-06-17 23:15:46 [INFO]: System Information
{
  "nodeVersion": "v22.16.0",
  "platform": "linux",
  "arch": "arm64",
  "memory": {
    "rss": 139051008,
    "heapTotal": 47894528,
    "heapUsed": 31677448,
    "external": 3511728,
    "arrayBuffers": 70016
  },
  "uptime": 1.864922252
}
2025-06-17 23:15:46 [INFO]: Karere Backend Starting
{
  "pid": 53930
}
2025-06-17 23:15:46 [INFO]: Service Manager initialized successfully
2025-06-17 23:15:46 [INFO]: Initializing database
{
  "path": "data/karere.db"
}
2025-06-17 23:15:46 [INFO]: Database tables and indexes created successfully
2025-06-17 23:15:46 [INFO]: Performance: database_initialization completed in 53ms
{
  "type": "performance",
  "operation": "database_initialization",
  "duration": 53
}
2025-06-17 23:15:46 [INFO]: Database initialized successfully
2025-06-17 23:15:46 [INFO]: Service registered: database
2025-06-17 23:15:46 [INFO]: Performance: websocket_server_init completed in 11ms
{
  "type": "performance",
  "operation": "websocket_server_init",
  "duration": 11
}
2025-06-17 23:15:46 [INFO]: WebSocket server started on ws://localhost:8765
2025-06-17 23:15:46 [INFO]: Service registered: websocket
2025-06-17 23:15:46 [INFO]: Initializing WhatsApp connection
{
  "component": "baileys"
}
2025-06-17 23:15:47 [INFO]: Using WhatsApp version 2.3000.1023223821
{
  "component": "baileys"
}
2025-06-17 23:15:47 [INFO]: Performance: whatsapp_connection completed in 478ms
{
  "type": "performance",
  "operation": "whatsapp_connection",
  "duration": 478
}
2025-06-17 23:15:47 [INFO]: WhatsApp socket initialized successfully
{
  "component": "baileys"
}
2025-06-17 23:15:47 [INFO]: Karere Backend initialized successfully
2025-06-17 23:15:47 [INFO]: Connecting to WhatsApp...
{
  "component": "baileys"
}
2025-06-17 23:15:47 [WARN]: Cannot send to frontend: no active connection
{
  "type": "connection_status"
}
2025-06-17 23:15:48 [INFO]: WhatsApp connection is open
{
  "component": "baileys"
}
2025-06-17 23:15:48 [WARN]: Cannot send to frontend: no active connection
{
  "type": "baileys_ready"
}
2025-06-17 23:15:48 [WARN]: Cannot send to frontend: no active connection
{
  "type": "connection_status"
}
2025-06-17 23:15:48 [INFO]: Loading initial chats
{
  "component": "baileys"
}
2025-06-17 23:15:48 [INFO]: Performance: get_chats completed in 14ms
{
  "count": 50,
  "type": "performance",
  "operation": "get_chats",
  "duration": 14
}
2025-06-17 23:15:48 [INFO]: Performance: load_initial_chats completed in 18ms
{
  "source": "database",
  "count": 50,
  "type": "performance",
  "operation": "load_initial_chats",
  "duration": 18
}
2025-06-17 23:15:48 [INFO]: Initial chats loaded from database
{
  "count": 50,
  "component": "baileys"
}
2025-06-17 23:15:51 [INFO]: Client requested chats. Sending cached list.
2025-06-17 23:15:51 [INFO]: Performance: websocket_message_processing completed in 4ms
{
  "type": "performance",
  "operation": "websocket_message_processing",
  "duration": 4
}
2025-06-17 23:16:03 [INFO]: Received SIGTERM, starting graceful shutdown
2025-06-17 23:16:03 [INFO]: Stopping cron job: health-check
2025-06-17 23:16:03 [INFO]: Stopping cron job: log-rotation
2025-06-17 23:16:03 [INFO]: Stopping cron job: database-cleanup
2025-06-17 23:16:03 [INFO]: Stopping cron job: memory-report
2025-06-17 23:16:03 [INFO]: Shutting down service: database
2025-06-17 23:16:03 [INFO]: Shutting down service: websocket
2025-06-17 23:20:54 [INFO]: Starting Karere Backend initialization
2025-06-17 23:20:54 [INFO]: Initializing Service Manager
2025-06-17 23:20:54 [INFO]: Cron job scheduled: health-check (*/5 * * * *)
2025-06-17 23:20:54 [INFO]: Cron job scheduled: log-rotation (0 * * * *)
2025-06-17 23:20:54 [INFO]: Cron job scheduled: database-cleanup (0 2 * * *)
2025-06-17 23:20:54 [INFO]: Cron job scheduled: memory-report (0 * * * *)
2025-06-17 23:20:54 [INFO]: System Information
{
  "nodeVersion": "v22.16.0",
  "platform": "linux",
  "arch": "arm64",
  "memory": {
    "rss": 140115968,
    "heapTotal": 47632384,
    "heapUsed": 31435984,
    "external": 3511728,
    "arrayBuffers": 70016
  },
  "uptime": 1.402907309
}
2025-06-17 23:20:54 [INFO]: Karere Backend Starting
{
  "pid": 54333
}
2025-06-17 23:20:54 [INFO]: Service Manager initialized successfully
2025-06-17 23:20:54 [INFO]: Initializing database
{
  "path": "data/karere.db"
}
2025-06-17 23:20:54 [INFO]: Database tables and indexes created successfully
2025-06-17 23:20:54 [INFO]: Performance: database_initialization completed in 64ms
{
  "type": "performance",
  "operation": "database_initialization",
  "duration": 64
}
2025-06-17 23:20:54 [INFO]: Database initialized successfully
2025-06-17 23:20:54 [INFO]: Service registered: database
2025-06-17 23:20:54 [INFO]: Performance: websocket_server_init completed in 8ms
{
  "type": "performance",
  "operation": "websocket_server_init",
  "duration": 8
}
2025-06-17 23:20:54 [INFO]: WebSocket server started on ws://localhost:8765
2025-06-17 23:20:54 [INFO]: Service registered: websocket
2025-06-17 23:20:54 [INFO]: Initializing WhatsApp connection
{
  "component": "baileys"
}
2025-06-17 23:20:54 [INFO]: Using WhatsApp version 2.3000.1023223821
{
  "component": "baileys"
}
2025-06-17 23:20:54 [INFO]: Performance: whatsapp_connection completed in 223ms
{
  "type": "performance",
  "operation": "whatsapp_connection",
  "duration": 223
}
2025-06-17 23:20:54 [INFO]: WhatsApp socket initialized successfully
{
  "component": "baileys"
}
2025-06-17 23:20:54 [INFO]: Karere Backend initialized successfully
2025-06-17 23:20:54 [INFO]: Connecting to WhatsApp...
{
  "component": "baileys"
}
2025-06-17 23:20:54 [WARN]: Cannot send to frontend: no active connection
{
  "type": "connection_status"
}
2025-06-17 23:20:58 [INFO]: Connection closed
{
  "statusCode": 401,
  "reason": "Connection Failure",
  "component": "baileys"
}
2025-06-17 23:20:58 [INFO]: Logged out, deleting credentials and restarting
{
  "component": "baileys"
}
2025-06-17 23:20:58 [INFO]: Authentication credentials deleted
{
  "component": "baileys"
}
2025-06-17 23:21:00 [INFO]: Initializing WhatsApp connection
{
  "component": "baileys"
}
2025-06-17 23:21:00 [INFO]: Using WhatsApp version 2.3000.1023223821
{
  "component": "baileys"
}
2025-06-17 23:21:00 [INFO]: Performance: whatsapp_connection completed in 192ms
{
  "type": "performance",
  "operation": "whatsapp_connection",
  "duration": 192
}
2025-06-17 23:21:00 [INFO]: WhatsApp socket initialized successfully
{
  "component": "baileys"
}
2025-06-17 23:21:00 [INFO]: Connecting to WhatsApp...
{
  "component": "baileys"
}
2025-06-17 23:21:01 [INFO]: QR Code received, generating image
{
  "component": "baileys"
}
2025-06-17 23:21:01 [INFO]: QR code sent to frontend
{
  "component": "baileys"
}
2025-06-17 23:22:01 [INFO]: QR Code received, generating image
{
  "component": "baileys"
}
2025-06-17 23:22:01 [INFO]: QR code sent to frontend
{
  "component": "baileys"
}
2025-06-17 23:22:21 [INFO]: QR Code received, generating image
{
  "component": "baileys"
}
2025-06-17 23:22:21 [INFO]: QR code sent to frontend
{
  "component": "baileys"
}
2025-06-17 23:22:41 [INFO]: QR Code received, generating image
{
  "component": "baileys"
}
2025-06-17 23:22:41 [INFO]: QR code sent to frontend
{
  "component": "baileys"
}
2025-06-17 23:23:01 [INFO]: QR Code received, generating image
{
  "component": "baileys"
}
2025-06-17 23:23:01 [INFO]: QR code sent to frontend
{
  "component": "baileys"
}
2025-06-17 23:23:21 [INFO]: QR Code received, generating image
{
  "component": "baileys"
}
2025-06-17 23:23:21 [INFO]: QR code sent to frontend
{
  "component": "baileys"
}
2025-06-17 23:23:41 [INFO]: Connection closed
{
  "statusCode": 408,
  "reason": "QR refs attempts ended",
  "component": "baileys"
}
2025-06-17 23:23:41 [INFO]: Scheduling reconnection attempt 1/5
{
  "component": "baileys"
}
2025-06-17 23:23:46 [INFO]: Initializing WhatsApp connection
{
  "component": "baileys"
}
2025-06-17 23:23:47 [INFO]: Using WhatsApp version 2.3000.1023223821
{
  "component": "baileys"
}
2025-06-17 23:23:47 [INFO]: Performance: whatsapp_connection completed in 94ms
{
  "type": "performance",
  "operation": "whatsapp_connection",
  "duration": 94
}
2025-06-17 23:23:47 [INFO]: WhatsApp socket initialized successfully
{
  "component": "baileys"
}
2025-06-17 23:23:47 [INFO]: Connecting to WhatsApp...
{
  "component": "baileys"
}
2025-06-17 23:23:47 [INFO]: QR Code received, generating image
{
  "component": "baileys"
}
2025-06-17 23:23:47 [INFO]: QR code sent to frontend
{
  "component": "baileys"
}
2025-06-17 23:24:47 [INFO]: QR Code received, generating image
{
  "component": "baileys"
}
2025-06-17 23:24:47 [INFO]: QR code sent to frontend
{
  "component": "baileys"
}
2025-06-17 23:25:07 [INFO]: QR Code received, generating image
{
  "component": "baileys"
}
2025-06-17 23:25:07 [INFO]: QR code sent to frontend
{
  "component": "baileys"
}
2025-06-17 23:25:27 [INFO]: QR Code received, generating image
{
  "component": "baileys"
}
2025-06-17 23:25:27 [INFO]: QR code sent to frontend
{
  "component": "baileys"
}
2025-06-17 23:25:47 [INFO]: QR Code received, generating image
{
  "component": "baileys"
}
2025-06-17 23:25:47 [INFO]: QR code sent to frontend
{
  "component": "baileys"
}
2025-06-17 23:26:07 [INFO]: Received SIGTERM, starting graceful shutdown
2025-06-17 23:26:07 [INFO]: Stopping cron job: health-check
2025-06-17 23:26:07 [INFO]: Stopping cron job: log-rotation
2025-06-17 23:26:07 [INFO]: Stopping cron job: database-cleanup
2025-06-17 23:26:07 [INFO]: Stopping cron job: memory-report
2025-06-17 23:26:07 [INFO]: Shutting down service: database
2025-06-17 23:26:07 [INFO]: Shutting down service: websocket
2025-06-17 23:26:07 [INFO]: QR Code received, generating image
{
  "component": "baileys"
}
2025-06-17 23:26:07 [INFO]: QR code sent to frontend
{
  "component": "baileys"
}
2025-06-17 23:26:35 [INFO]: Starting Karere Backend initialization
2025-06-17 23:26:35 [INFO]: Initializing Service Manager
2025-06-17 23:26:35 [INFO]: Cron job scheduled: health-check (*/5 * * * *)
2025-06-17 23:26:35 [INFO]: Cron job scheduled: log-rotation (0 * * * *)
2025-06-17 23:26:35 [INFO]: Cron job scheduled: database-cleanup (0 2 * * *)
2025-06-17 23:26:35 [INFO]: Cron job scheduled: memory-report (0 * * * *)
2025-06-17 23:26:35 [INFO]: System Information
{
  "nodeVersion": "v22.16.0",
  "platform": "linux",
  "arch": "arm64",
  "memory": {
    "rss": 138067968,
    "heapTotal": 46845952,
    "heapUsed": 31990088,
    "external": 3511728,
    "arrayBuffers": 70016
  },
  "uptime": 3.538106896
}
2025-06-17 23:26:35 [INFO]: Karere Backend Starting
{
  "pid": 55080
}
2025-06-17 23:26:35 [INFO]: Service Manager initialized successfully
2025-06-17 23:26:35 [INFO]: Initializing database
{
  "path": "data/karere.db"
}
2025-06-17 23:26:35 [INFO]: Database tables and indexes created successfully
2025-06-17 23:26:35 [INFO]: Performance: database_initialization completed in 81ms
{
  "type": "performance",
  "operation": "database_initialization",
  "duration": 81
}
2025-06-17 23:26:35 [INFO]: Database initialized successfully
2025-06-17 23:26:35 [INFO]: Service registered: database
2025-06-17 23:26:35 [INFO]: Performance: websocket_server_init completed in 7ms
{
  "type": "performance",
  "operation": "websocket_server_init",
  "duration": 7
}
2025-06-17 23:26:35 [INFO]: WebSocket server started on ws://localhost:8765
2025-06-17 23:26:35 [INFO]: Service registered: websocket
2025-06-17 23:26:35 [INFO]: Initializing WhatsApp connection
{
  "component": "baileys"
}
2025-06-17 23:26:36 [INFO]: Using WhatsApp version 2.3000.1023223821
{
  "component": "baileys"
}
2025-06-17 23:26:36 [INFO]: Performance: whatsapp_connection completed in 699ms
{
  "type": "performance",
  "operation": "whatsapp_connection",
  "duration": 699
}
2025-06-17 23:26:36 [INFO]: WhatsApp socket initialized successfully
{
  "component": "baileys"
}
2025-06-17 23:26:36 [INFO]: Karere Backend initialized successfully
2025-06-17 23:26:36 [INFO]: Connecting to WhatsApp...
{
  "component": "baileys"
}
2025-06-17 23:26:36 [WARN]: Cannot send to frontend: no active connection
{
  "type": "connection_status"
}
2025-06-17 23:26:37 [INFO]: QR Code received, generating image
{
  "component": "baileys"
}
2025-06-17 23:26:37 [WARN]: Cannot send to frontend: no active connection
{
  "type": "qr"
}
2025-06-17 23:26:37 [INFO]: QR code sent to frontend
{
  "component": "baileys"
}
2025-06-17 23:26:40 [INFO]: Received SIGTERM, starting graceful shutdown
2025-06-17 23:26:40 [INFO]: Stopping cron job: health-check
2025-06-17 23:26:40 [INFO]: Stopping cron job: log-rotation
2025-06-17 23:26:40 [INFO]: Stopping cron job: database-cleanup
2025-06-17 23:26:40 [INFO]: Stopping cron job: memory-report
2025-06-17 23:26:40 [INFO]: Shutting down service: database
2025-06-17 23:26:40 [INFO]: Shutting down service: websocket
2025-06-17 23:27:59 [INFO]: Starting Karere Backend initialization
2025-06-17 23:27:59 [INFO]: Initializing Service Manager
2025-06-17 23:27:59 [INFO]: Cron job scheduled: health-check (*/5 * * * *)
2025-06-17 23:27:59 [INFO]: Cron job scheduled: log-rotation (0 * * * *)
2025-06-17 23:27:59 [INFO]: Cron job scheduled: database-cleanup (0 2 * * *)
2025-06-17 23:27:59 [INFO]: Cron job scheduled: memory-report (0 * * * *)
2025-06-17 23:27:59 [INFO]: System Information
{
  "nodeVersion": "v22.16.0",
  "platform": "linux",
  "arch": "arm64",
  "memory": {
    "rss": 133787648,
    "heapTotal": 47370240,
    "heapUsed": 31490272,
    "external": 3511728,
    "arrayBuffers": 70016
  },
  "uptime": 1.631358554
}
2025-06-17 23:27:59 [INFO]: Karere Backend Starting
{
  "pid": 55309
}
2025-06-17 23:27:59 [INFO]: Service Manager initialized successfully
2025-06-17 23:27:59 [INFO]: Initializing database
{
  "path": "data/karere.db"
}
2025-06-17 23:27:59 [INFO]: Database tables and indexes created successfully
2025-06-17 23:27:59 [INFO]: Performance: database_initialization completed in 49ms
{
  "type": "performance",
  "operation": "database_initialization",
  "duration": 49
}
2025-06-17 23:27:59 [INFO]: Database initialized successfully
2025-06-17 23:27:59 [INFO]: Service registered: database
2025-06-17 23:27:59 [INFO]: Performance: websocket_server_init completed in 8ms
{
  "type": "performance",
  "operation": "websocket_server_init",
  "duration": 8
}
2025-06-17 23:27:59 [INFO]: WebSocket server started on ws://localhost:8765
2025-06-17 23:27:59 [INFO]: Service registered: websocket
2025-06-17 23:27:59 [INFO]: Initializing WhatsApp connection
{
  "component": "baileys"
}
2025-06-17 23:28:00 [INFO]: Using WhatsApp version 2.3000.1023223821
{
  "component": "baileys"
}
2025-06-17 23:28:00 [INFO]: Performance: whatsapp_connection completed in 539ms
{
  "type": "performance",
  "operation": "whatsapp_connection",
  "duration": 539
}
2025-06-17 23:28:00 [INFO]: WhatsApp socket initialized successfully
{
  "component": "baileys"
}
2025-06-17 23:28:00 [INFO]: Karere Backend initialized successfully
2025-06-17 23:28:00 [INFO]: Connecting to WhatsApp...
{
  "component": "baileys"
}
2025-06-17 23:28:00 [WARN]: Cannot send to frontend: no active connection
{
  "type": "connection_status"
}
2025-06-17 23:28:01 [INFO]: QR Code received, generating image
{
  "component": "baileys"
}
2025-06-17 23:28:01 [WARN]: Cannot send to frontend: no active connection
{
  "type": "qr"
}
2025-06-17 23:28:01 [INFO]: QR code sent to frontend
{
  "component": "baileys"
}
2025-06-17 23:29:01 [INFO]: QR Code received, generating image
{
  "component": "baileys"
}
2025-06-17 23:29:01 [INFO]: QR code sent to frontend
{
  "component": "baileys"
}
2025-06-17 23:29:21 [INFO]: QR Code received, generating image
{
  "component": "baileys"
}
2025-06-17 23:29:21 [INFO]: QR code sent to frontend
{
  "component": "baileys"
}
2025-06-17 23:29:41 [INFO]: QR Code received, generating image
{
  "component": "baileys"
}
2025-06-17 23:29:41 [INFO]: QR code sent to frontend
{
  "component": "baileys"
}
2025-06-17 23:30:01 [INFO]: QR Code received, generating image
{
  "component": "baileys"
}
2025-06-17 23:30:01 [INFO]: QR code sent to frontend
{
  "component": "baileys"
}
2025-06-17 23:30:21 [INFO]: QR Code received, generating image
{
  "component": "baileys"
}
2025-06-17 23:30:21 [INFO]: QR code sent to frontend
{
  "component": "baileys"
}
2025-06-17 23:30:31 [INFO]: Received SIGTERM, starting graceful shutdown
2025-06-17 23:30:31 [INFO]: Stopping cron job: health-check
2025-06-17 23:30:31 [INFO]: Stopping cron job: log-rotation
2025-06-17 23:30:31 [INFO]: Stopping cron job: database-cleanup
2025-06-17 23:30:31 [INFO]: Stopping cron job: memory-report
2025-06-17 23:30:31 [INFO]: Shutting down service: database
2025-06-17 23:30:31 [INFO]: Shutting down service: websocket
2025-06-17 23:30:32 [WARN]: Shutdown already in progress, forcing exit
2025-06-18 05:43:17 [INFO]: Starting Karere Backend initialization
2025-06-18 05:43:17 [INFO]: Initializing Service Manager
2025-06-18 05:43:17 [INFO]: Cron job scheduled: health-check (*/5 * * * *)
2025-06-18 05:43:17 [INFO]: Cron job scheduled: log-rotation (0 * * * *)
2025-06-18 05:43:17 [INFO]: Cron job scheduled: database-cleanup (0 2 * * *)
2025-06-18 05:43:17 [INFO]: Cron job scheduled: memory-report (0 * * * *)
2025-06-18 05:43:17 [INFO]: System Information
{
  "nodeVersion": "v22.16.0",
  "platform": "linux",
  "arch": "arm64",
  "memory": {
    "rss": 139935744,
    "heapTotal": 47108096,
    "heapUsed": 32572432,
    "external": 3511728,
    "arrayBuffers": 70016
  },
  "uptime": 2.668160285
}
2025-06-18 05:43:17 [INFO]: Karere Backend Starting
{
  "pid": 74966
}
2025-06-18 05:43:17 [INFO]: Service Manager initialized successfully
2025-06-18 05:43:17 [INFO]: Initializing database
{
  "path": "data/karere.db"
}
2025-06-18 05:43:17 [INFO]: Database tables and indexes created successfully
2025-06-18 05:43:17 [INFO]: Performance: database_initialization completed in 43ms
{
  "type": "performance",
  "operation": "database_initialization",
  "duration": 43
}
2025-06-18 05:43:17 [INFO]: Database initialized successfully
2025-06-18 05:43:17 [INFO]: Service registered: database
2025-06-18 05:43:17 [INFO]: Performance: websocket_server_init completed in 4ms
{
  "type": "performance",
  "operation": "websocket_server_init",
  "duration": 4
}
2025-06-18 05:43:17 [INFO]: WebSocket server started on ws://localhost:8765
2025-06-18 05:43:17 [INFO]: Service registered: websocket
2025-06-18 05:43:17 [INFO]: Initializing WhatsApp connection
{
  "component": "baileys"
}
2025-06-18 05:43:17 [INFO]: Using WhatsApp version 2.3000.1023223821
{
  "component": "baileys"
}
2025-06-18 05:43:17 [INFO]: Performance: whatsapp_connection completed in 425ms
{
  "type": "performance",
  "operation": "whatsapp_connection",
  "duration": 425
}
2025-06-18 05:43:17 [INFO]: WhatsApp socket initialized successfully
{
  "component": "baileys"
}
2025-06-18 05:43:17 [INFO]: Karere Backend initialized successfully
2025-06-18 05:43:17 [INFO]: Connecting to WhatsApp...
{
  "component": "baileys"
}
2025-06-18 05:43:17 [WARN]: Cannot send to frontend: no active connection
{
  "type": "connection_status"
}
2025-06-18 05:43:18 [INFO]: QR Code received, generating image
{
  "component": "baileys"
}
2025-06-18 05:43:18 [WARN]: Cannot send to frontend: no active connection
{
  "type": "qr"
}
2025-06-18 05:43:18 [INFO]: QR code sent to frontend
{
  "component": "baileys"
}
2025-06-18 05:43:43 [INFO]: Received SIGTERM, starting graceful shutdown
2025-06-18 05:43:43 [INFO]: Stopping cron job: health-check
2025-06-18 05:43:43 [INFO]: Stopping cron job: log-rotation
2025-06-18 05:43:43 [INFO]: Stopping cron job: database-cleanup
2025-06-18 05:43:43 [INFO]: Stopping cron job: memory-report
2025-06-18 05:43:43 [INFO]: Shutting down service: database
2025-06-18 05:43:43 [INFO]: Shutting down service: websocket
